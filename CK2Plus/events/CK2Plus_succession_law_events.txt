namespace = Plus

#reserved: Plus.600 to Plus.619
#reserved: Plus.1600 to Plus.1649

#################################
# VOTING ON SUCCESSION LAW CHANGES
# Written by Wiz
# Updated by Rylock
#################################

### VOTES ON CHANGES TO FEUDAL ELECTIVE OR TANISTRY

# Liege calls de jure vassals to vote on changing the succession law
character_event = {
	id = Plus.600 #formerly 1000182996
	desc = "EVTDESC_Plus_600"
	picture = GFX_evt_council

	is_triggered_only = yes
	
	immediate = {
		random_demesne_title = {
			limit = { has_title_flag = title_to_change }
			clr_title_flag = title_to_change
			save_event_target_as = changed_title
		}
	}

	option = {
		name = "OK"
		if = {
			limit = { has_character_flag = vote_is_for_gavelkind }
			event_target:changed_title = {
				any_de_jure_vassal_title = {
					holder_scope = { set_character_flag = vote_is_for_gavelkind }
					if = {
						limit = {
							OR = {
								AND = {
									PREV = { tier = COUNT }
									tier = BARON
								}
								AND = {
									PREV = { tier = DUKE }
									PREV = {
										OR = {
											has_law = succ_tanistry
											has_law = succ_elective_gavelkind
										}
									}
									tier = BARON
								}
								AND = {
									PREV = { tier = DUKE }
									tier = COUNT
								}
								AND = {
									PREV = { tier = KING }
									PREV = {
										OR = {
											has_law = succ_tanistry
											has_law = succ_elective_gavelkind
										}
									}
									tier = COUNT
								}
								AND = {
									PREV = { tier = KING }
									tier = DUKE
								}
								AND = {
									PREV = { tier = EMPEROR }
									tier = DUKE
								}
								AND = {
									PREV = { tier = EMPEROR }
									tier = KING
								}
							}
							OR = {
								holder_scope = { same_realm = ROOT }
								PREV = { has_law = succ_feudal_elective }
							}
							holder_scope = {
								OR = {
									same_realm = ROOT
									religion = ROOT
								}
								NOT = { has_character_flag = voted_on_gavelkind }
								NOT = { has_landed_title = PREVPREV }
							}
						}
						holder_scope = {
							set_character_flag = voted_on_gavelkind
							letter_event = { id = Plus.601 days = 3 tooltip = CUSTOMTOOLTIP10 }
						}
					}
				}
			}
		}
		if = {
			limit = { has_character_flag = vote_is_for_seniority }
			event_target:changed_title = {
				any_de_jure_vassal_title = {
					holder_scope = { set_character_flag = vote_is_for_seniority }
					if = {
						limit = {
							OR = {
								AND = {
									PREV = { tier = COUNT }
									tier = BARON
								}
								AND = {
									PREV = { tier = DUKE }
									PREV = {
										OR = {
											has_law = succ_tanistry
											has_law = succ_elective_gavelkind
										}
									}
									tier = BARON
								}
								AND = {
									PREV = { tier = DUKE }
									tier = COUNT
								}
								AND = {
									PREV = { tier = KING }
									PREV = {
										OR = {
											has_law = succ_tanistry
											has_law = succ_elective_gavelkind
										}
									}
									tier = COUNT
								}
								AND = {
									PREV = { tier = KING }
									tier = DUKE
								}
								AND = {
									PREV = { tier = EMPEROR }
									tier = DUKE
								}
								AND = {
									PREV = { tier = EMPEROR }
									tier = KING
								}
							}
							OR = {
								holder_scope = { same_realm = ROOT }
								PREV = { has_law = succ_feudal_elective }
							}
							holder_scope = {
								OR = {
									same_realm = ROOT
									religion = ROOT
								}
								NOT = { has_character_flag = voted_on_seniority }
								NOT = { has_landed_title = PREVPREV }
							}
						}
						holder_scope = {
							set_character_flag = voted_on_seniority
							letter_event = { id = Plus.603 days = 3 tooltip = CUSTOMTOOLTIP10 }
						}
					}
				}
			}
		}
		if = {
			limit = { has_character_flag = vote_is_for_primogeniture }
			event_target:changed_title = {
				any_de_jure_vassal_title = {
					holder_scope = { set_character_flag = vote_is_for_primogeniture }
					if = {
						limit = {
							OR = {
								AND = {
									PREV = { tier = COUNT }
									tier = BARON
								}
								AND = {
									PREV = { tier = DUKE }
									PREV = {
										OR = {
											has_law = succ_tanistry
											has_law = succ_elective_gavelkind
										}
									}
									tier = BARON
								}
								AND = {
									PREV = { tier = DUKE }
									tier = COUNT
								}
								AND = {
									PREV = { tier = KING }
									PREV = {
										OR = {
											has_law = succ_tanistry
											has_law = succ_elective_gavelkind
										}
									}
									tier = COUNT
								}
								AND = {
									PREV = { tier = KING }
									tier = DUKE
								}
								AND = {
									PREV = { tier = EMPEROR }
									tier = DUKE
								}
								AND = {
									PREV = { tier = EMPEROR }
									tier = KING
								}
							}
							OR = {
								holder_scope = { same_realm = ROOT }
								PREV = { has_law = succ_feudal_elective }
							}
							holder_scope = {
								OR = {
									same_realm = ROOT
									religion = ROOT
								}
								NOT = { has_character_flag = voted_on_primogeniture }
								NOT = { has_landed_title = PREVPREV }
							}
						}
						holder_scope = {
							set_character_flag = voted_on_primogeniture
							letter_event = { id = Plus.602 days = 3 tooltip = CUSTOMTOOLTIP10 }
						}
					}
				}
			}
		}
		if = {
			limit = { has_character_flag = vote_is_for_tanistry }
			event_target:changed_title = {
				any_de_jure_vassal_title = {
					holder_scope = { set_character_flag = vote_is_for_tanistry }
					if = {
						limit = {
							OR = {
								AND = {
									PREV = { tier = COUNT }
									tier = BARON
								}
								AND = {
									PREV = { tier = DUKE }
									PREV = {
										OR = {
											has_law = succ_tanistry
											has_law = succ_elective_gavelkind
										}
									}
									tier = BARON
								}
								AND = {
									PREV = { tier = DUKE }
									tier = COUNT
								}
								AND = {
									PREV = { tier = KING }
									PREV = {
										OR = {
											has_law = succ_tanistry
											has_law = succ_elective_gavelkind
										}
									}
									tier = COUNT
								}
								AND = {
									PREV = { tier = KING }
									tier = DUKE
								}
								AND = {
									PREV = { tier = EMPEROR }
									tier = DUKE
								}
								AND = {
									PREV = { tier = EMPEROR }
									tier = KING
								}
							}
							OR = {
								holder_scope = { same_realm = ROOT }
								PREV = { has_law = succ_feudal_elective }
							}
							holder_scope = {
								OR = {
									same_realm = ROOT
									religion = ROOT
								}
								NOT = { has_character_flag = voted_on_tanistry }
								NOT = { has_landed_title = PREVPREV }
							}
						}
						holder_scope = {
							set_character_flag = voted_on_tanistry
							letter_event = { id = Plus.615 days = 3 tooltip = CUSTOMTOOLTIP10 }
						}
					}
				}
			}
		}
		if = {
			limit = { has_character_flag = vote_is_for_feudal_elective }
			event_target:changed_title = {
				any_de_jure_vassal_title = {
					holder_scope = { set_character_flag = vote_is_for_feudal_elective }
					if = {
						limit = {
							OR = {
								AND = {
									PREV = { tier = COUNT }
									tier = BARON
								}
								AND = {
									PREV = { tier = DUKE }
									PREV = {
										OR = {
											has_law = succ_tanistry
											has_law = succ_elective_gavelkind
										}
									}
									tier = BARON
								}
								AND = {
									PREV = { tier = DUKE }
									tier = COUNT
								}
								AND = {
									PREV = { tier = KING }
									PREV = {
										OR = {
											has_law = succ_tanistry
											has_law = succ_elective_gavelkind
										}
									}
									tier = COUNT
								}
								AND = {
									PREV = { tier = KING }
									tier = DUKE
								}
								AND = {
									PREV = { tier = EMPEROR }
									tier = DUKE
								}
								AND = {
									PREV = { tier = EMPEROR }
									tier = KING
								}
							}
							OR = {
								holder_scope = { same_realm = ROOT }
								PREV = { has_law = succ_feudal_elective }
							}
							holder_scope = {
								OR = {
									same_realm = ROOT
									religion = ROOT
								}
								NOT = { has_character_flag = voted_on_feudal_elective }
								NOT = { has_landed_title = PREVPREV }
							}
						}
						holder_scope = {
							set_character_flag = voted_on_feudal_elective
							letter_event = { id = Plus.616 days = 3 tooltip = CUSTOMTOOLTIP10 }
						}
					}
				}
			}
		}
		hidden_tooltip = {
			character_event = {
				id = Plus.610
				days = 14
			}
		}
	}
}

# Vassals vote to approve or disapprove Gavelkind
letter_event = {
	id = Plus.601 #formerly 1000182997
	desc = "EVTDESC_Plus_601"

	is_triggered_only = yes

	option = {
		name = "EVTOPTA_Plus_601" #Approve
		ai_chance = {
			factor = 100
			modifier = {
				factor = 0.01
				event_target:changed_title = {
					current_heir = {
						character = ROOT
						NOT = { is_child_of = FROM }
					}
				}
			}
			modifier = {
				factor = 0.5
				OR = {
					leads_faction = faction_tradition
					in_faction = faction_tradition
				}
			}
			modifier = {
				factor = 0.5
				NOT = { same_realm = FROM }
			}
			modifier = {
				factor = 0.25
				event_target:changed_title = { has_law = succ_feudal_elective }
				NOT = { dynasty = FROM }
			}
			modifier = {
				factor = 2.0
				event_target:changed_title = { has_law = succ_feudal_elective }
				OR = {
					dynasty = FROM
					is_married = FROM
				}
			}
			modifier = {
				factor = 2.0
				event_target:changed_title = { has_law = succ_elective_gavelkind }
			}
			modifier = {
				factor = 10.0
				OR = {
					is_child_of = FROM
					father = { is_child_of = FROM }
				}
			}
			modifier = {
				factor = 0.1
				is_child_of = FROM
				OR = {
					AND = {
						event_target:changed_title = {
							OR = {
								has_law = agnatic_succession
								has_law = cognatic_succession
							}
						}
						is_female = no
						any_sibling = {
							NOT = { trait = bastard }
							is_female = no
							NOT = { is_older_than = ROOT }
						}
					}
					AND = {
						event_target:changed_title = {
							OR = {
								has_law = enatic_succession
								has_law = enatic_cognatic_succession
							}
						}
						is_female = yes
						any_sibling = {
							NOT = { trait = bastard }
							is_female = yes
							NOT = { is_older_than = ROOT }
						}
					}
					AND = {
						event_target:changed_title = { has_law = true_cognatic_succession }
						any_sibling = {
							NOT = { trait = bastard }
							NOT = { is_older_than = ROOT }
						}
					}
				}
			}
			modifier = {
				factor = 0.25
				event_target:changed_title = {
					crownlaw_title = {
						OR = {
							has_law = crown_authority_0
							has_law = tribal_organization_0
						}
					}
				}
			}
			modifier = {
				factor = 0.5
				event_target:changed_title = {
					crownlaw_title = {
						OR = {
							has_law = crown_authority_1
							has_law = tribal_organization_1
						}
					}
				}
			}
			modifier = {
				factor = 2.0
				event_target:changed_title = {
					crownlaw_title = {
						OR = {
							has_law = crown_authority_3
							has_law = tribal_organization_3
						}
					}
				}
			}
			modifier = {
				factor = 4.0
				event_target:changed_title = {
					crownlaw_title = {
						OR = {
							has_law = crown_authority_4
							has_law = tribal_organization_4
						}
					}
				}
			}
			modifier = {
				factor = 10.0
				FROM = {
					reverse_opinion = {
						who = ROOT
						value = 100
					}
				}
			}
			modifier = {
				factor = 5.0
				FROM = {
					reverse_opinion = {
						who = ROOT
						value = 75
					}
				}
			}
			modifier = {
				factor = 2.0
				FROM = {
					reverse_opinion = {
						who = ROOT
						value = 50
					}
				}
			}
			modifier = {
				factor = 0.5
				NOT = {
					FROM = {
						reverse_opinion = {
							who = ROOT
							value = 25
						}
					}
				}
			}
			modifier = {
				factor = 0.01
				NOT = {
					FROM = {
						reverse_opinion = {
							who = ROOT
							value = 0
						}
					}
				}
			}
		}
		FROM = {
			hidden_tooltip = { change_variable = { which = "succession_law_vote" value = 1 } }
			hidden_tooltip = {
				remove_opinion = {
					modifier = opinion_approved_succession_law
					who = ROOT
				}
				remove_opinion = {
					modifier = opinion_ignored_succession_law
					who = ROOT
				}
			}
			opinion = {
				modifier = opinion_approved_succession_law
				who = ROOT
				months = 120
			}
		}
	}

	option = {
		name = "EVTOPTB_Plus_601" #Ignore
		ai_chance = { factor = 100 }
		FROM = {
			hidden_tooltip = { change_variable = { which = "succession_law_vote" value = -1 } }
			hidden_tooltip = {
				remove_opinion = {
					modifier = opinion_approved_succession_law
					who = ROOT
				}
				remove_opinion = {
					modifier = opinion_ignored_succession_law
					who = ROOT
				}
			}
			opinion = {
				modifier = opinion_ignored_succession_law
				who = ROOT
				months = 120
			}
		}
	}
}

# Vassals vote to approve or disapprove Primogeniture
letter_event = {
	id = Plus.602 #formerly 1000182998
	desc = "EVTDESC_Plus_602"

	is_triggered_only = yes

	option = {
		name = "EVTOPTA_Plus_601" #Approve
		ai_chance = {
			factor = 75
			modifier = {
				factor = 0.01
				event_target:changed_title = {
					current_heir = {
						character = ROOT
						NOT = { is_child_of = FROM }
					}
				}
			}
			modifier = {
				factor = 0.5
				OR = {
					leads_faction = faction_tradition
					in_faction = faction_tradition
				}
			}
			modifier = {
				factor = 0.1
				is_child_of = FROM
				OR = {
					AND = {
						event_target:changed_title = {
							OR = {
								has_law = agnatic_succession
								has_law = cognatic_succession
							}
						}
						any_sibling = {
							NOT = { trait = bastard }
							is_female = no
							is_older_than = ROOT
						}
					}
					AND = {
						event_target:changed_title = {
							OR = {
								has_law = enatic_succession
								has_law = enatic_cognatic_succession
							}
						}
						any_sibling = {
							NOT = { trait = bastard }
							is_female = yes
							is_older_than = ROOT
						}
					}
					AND = {
						event_target:changed_title = { has_law = true_cognatic_succession }
						any_sibling = {
							NOT = { trait = bastard }
							is_older_than = ROOT
						}
					}
				}
			}
			modifier = {
				factor = 0.5
				NOT = { same_realm = FROM }
			}
			modifier = {
				factor = 0.25
				event_target:changed_title = { has_law = succ_feudal_elective }
				NOT = { dynasty = FROM }
			}
			modifier = {
				factor = 0.5
				NOT = { event_target:changed_title = { has_law = succ_feudal_elective } }
				NOT = { dynasty = FROM }
			}
			modifier = {
				factor = 5.0
				event_target:changed_title = { has_law = succ_feudal_elective }
				NOT = { is_child_of = FROM }
				OR = {
					is_married = FROM
					father = { is_child_of = FROM }
				}
			}
			modifier = {
				factor = 10.0
				is_child_of = FROM
				NOT = {
					AND = {
						event_target:changed_title = {
							OR = {
								has_law = agnatic_succession
								has_law = cognatic_succession
							}
						}
						any_sibling = {
							NOT = { trait = bastard }
							is_female = no
							is_older_than = ROOT
						}
					}
					AND = {
						event_target:changed_title = {
							OR = {
								has_law = enatic_succession
								has_law = enatic_cognatic_succession
							}
						}
						any_sibling = {
							NOT = { trait = bastard }
							is_female = yes
							is_older_than = ROOT
						}
					}
					AND = {
						event_target:changed_title = { has_law = true_cognatic_succession }
						any_sibling = {
							NOT = { trait = bastard }
							is_older_than = ROOT
						}
					}
				}
			}
			modifier = {
				factor = 0.5
				event_target:changed_title = {
					crownlaw_title = {
						OR = {
							has_law = crown_authority_0
							has_law = tribal_organization_0
						}
					}
				}
			}
			modifier = {
				factor = 0.5
				event_target:changed_title = {
					crownlaw_title = {
						OR = {
							has_law = crown_authority_1
							has_law = tribal_organization_1
						}
					}
				}
			}
			modifier = {
				factor = 2.0
				event_target:changed_title = {
					crownlaw_title = {
						OR = {
							has_law = crown_authority_3
							has_law = tribal_organization_3
						}
					}
				}
			}
			modifier = {
				factor = 2.0
				event_target:changed_title = {
					crownlaw_title = {
						OR = {
							has_law = crown_authority_4
							has_law = tribal_organization_4
						}
					}
				}
			}
			modifier = {
				factor = 10.0
				opinion = { who = FROM value = 99 }
			}
			modifier = {
				factor = 5.0
				opinion = { who = FROM value = 75 }
			}
			modifier = {
				factor = 2.0
				opinion = { who = FROM value = 50 }
			}
			modifier = {
				factor = 0.5
				NOT = { opinion = { who = FROM value = 25 } }
			}
			modifier = {
				factor = 0.01
				NOT = { opinion = { who = FROM value = 0 } }
			}
		}
		FROM = {
			hidden_tooltip = { change_variable = { which = "succession_law_vote" value = 1 } }
			hidden_tooltip = {
				remove_opinion = {
					modifier = opinion_approved_succession_law
					who = ROOT
				}
				remove_opinion = {
					modifier = opinion_ignored_succession_law
					who = ROOT
				}
			}
			opinion = {
				modifier = opinion_approved_succession_law
				who = ROOT
				months = 120
			}
		}
	}

	option = {
		name = "EVTOPTB_Plus_601" #Ignore
		ai_chance = { factor = 100 }
		FROM = {
			hidden_tooltip = { change_variable = { which = "succession_law_vote" value = -1 } }
			hidden_tooltip = {
				remove_opinion = {
					modifier = opinion_approved_succession_law
					who = ROOT
				}
				remove_opinion = {
					modifier = opinion_ignored_succession_law
					who = ROOT
				}
			}
			opinion = {
				modifier = opinion_ignored_succession_law
				who = ROOT
				months = 120
			}
		}
	}
}

# Vassals vote to approve or disapprove Seniority
letter_event = {
	id = Plus.603 #formerly 1000182999
	desc = "EVTDESC_Plus_603"

	is_triggered_only = yes

	option = {
		name = "EVTOPTA_Plus_601" #Approve
		ai_chance = {
			factor = 75
			modifier = {
				factor = 0.01
				event_target:changed_title = {
					current_heir = {
						character = ROOT
						NOT = { dynasty = FROM }
					}
				}
			}
			modifier = {
				factor = 0.5
				OR = {
					leads_faction = faction_tradition
					in_faction = faction_tradition
				}
			}
			modifier = {
				factor = 0.5
				NOT = { same_realm = FROM }
			}
			modifier = {
				factor = 0.25
				event_target:changed_title = { has_law = succ_feudal_elective }
				NOT = { dynasty = FROM }
			}
			modifier = {
				factor = 2.0
				OR = {
					culture_group = east_slavic
					culture_group = west_slavic
					culture_group = south_slavic
					culture = hungarian
				}
			}
			modifier = {
				factor = 10.0
				dynasty = FROM
			}
			modifier = {
				factor = 0.5
				event_target:changed_title = {
					crownlaw_title = {
						OR = {
							has_law = crown_authority_0
							has_law = tribal_organization_0
						}
					}
				}
			}
			modifier = {
				factor = 0.5
				event_target:changed_title = {
					crownlaw_title = {
						OR = {
							has_law = crown_authority_1
							has_law = tribal_organization_1
						}
					}
				}
			}
			modifier = {
				factor = 2.0
				event_target:changed_title = {
					crownlaw_title = {
						OR = {
							has_law = crown_authority_3
							has_law = tribal_organization_3
						}
					}
				}
			}
			modifier = {
				factor = 2.0
				event_target:changed_title = {
					crownlaw_title = {
						OR = {
							has_law = crown_authority_4
							has_law = tribal_organization_4
						}
					}
				}
			}
			modifier = {
				factor = 10.0
				FROM = {
					reverse_opinion = {
						who = ROOT
						value = 100
					}
				}
			}
			modifier = {
				factor = 5.0
				FROM = {
					reverse_opinion = {
						who = ROOT
						value = 75
					}
				}
			}
			modifier = {
				factor = 2.0
				FROM = {
					reverse_opinion = {
						who = ROOT
						value = 50
					}
				}
			}
			modifier = {
				factor = 0.5
				NOT = {
					FROM = {
						reverse_opinion = {
							who = ROOT
							value = 25
						}
					}
				}
			}
			modifier = {
				factor = 0.01
				NOT = {
					FROM = {
						reverse_opinion = {
							who = ROOT
							value = 0
						}
					}
				}
			}
		}
		FROM = {
			hidden_tooltip = { change_variable = { which = "succession_law_vote" value = 1 } }
			hidden_tooltip = {
				remove_opinion = {
					modifier = opinion_approved_succession_law
					who = ROOT
				}
				remove_opinion = {
					modifier = opinion_ignored_succession_law
					who = ROOT
				}
			}
			opinion = {
				modifier = opinion_approved_succession_law
				who = ROOT
				months = 120
			}
		}
	}

	option = {
		name = "EVTOPTB_Plus_601" #Ignore
		ai_chance = { factor = 100 }
		FROM = {
			hidden_tooltip = { change_variable = { which = "succession_law_vote" value = -1 } }
			hidden_tooltip = {
				remove_opinion = {
					modifier = opinion_approved_succession_law
					who = ROOT
				}
				remove_opinion = {
					modifier = opinion_ignored_succession_law
					who = ROOT
				}
			}
			opinion = {
				modifier = opinion_ignored_succession_law
				who = ROOT
				months = 120
			}
		}
	}
}

# Vassals vote to approve or disapprove Tanistry
letter_event = {
	id = Plus.615
	desc = "EVTDESC_Plus_615"

	is_triggered_only = yes

	option = {
		name = "EVTOPTA_Plus_601" #Approve
		ai_chance = {
			factor = 75
			modifier = {
				factor = 0.01
				event_target:changed_title = {
					current_heir = {
						character = ROOT
						NOT = { dynasty = FROM }
					}
				}
			}
			modifier = {
				factor = 0.5
				OR = {
					leads_faction = faction_tradition
					in_faction = faction_tradition
				}
			}
			modifier = {
				factor = 0.5
				NOT = { same_realm = FROM }
			}
			modifier = {
				factor = 0.25
				event_target:changed_title = { has_law = succ_feudal_elective }
				NOT = { dynasty = FROM }
			}
			modifier = {
				factor = 2.0
				OR = {
					culture_group = celtic
					culture = scottish
					religion = celtic_pagan
				}
			}
			modifier = {
				factor = 10.0
				dynasty = FROM
			}
			modifier = {
				factor = 0.5
				event_target:changed_title = {
					crownlaw_title = {
						OR = {
							has_law = crown_authority_0
							has_law = tribal_organization_0
						}
					}
				}
			}
			modifier = {
				factor = 0.5
				event_target:changed_title = {
					crownlaw_title = {
						OR = {
							has_law = crown_authority_1
							has_law = tribal_organization_1
						}
					}
				}
			}
			modifier = {
				factor = 2.0
				event_target:changed_title = {
					crownlaw_title = {
						OR = {
							has_law = crown_authority_3
							has_law = tribal_organization_3
						}
					}
				}
			}
			modifier = {
				factor = 2.0
				event_target:changed_title = {
					crownlaw_title = {
						OR = {
							has_law = crown_authority_4
							has_law = tribal_organization_4
						}
					}
				}
			}
			modifier = {
				factor = 10.0
				FROM = {
					reverse_opinion = {
						who = ROOT
						value = 100
					}
				}
			}
			modifier = {
				factor = 5.0
				FROM = {
					reverse_opinion = {
						who = ROOT
						value = 75
					}
				}
			}
			modifier = {
				factor = 2.0
				FROM = {
					reverse_opinion = {
						who = ROOT
						value = 50
					}
				}
			}
			modifier = {
				factor = 0.5
				NOT = {
					FROM = {
						reverse_opinion = {
							who = ROOT
							value = 25
						}
					}
				}
			}
			modifier = {
				factor = 0.01
				NOT = {
					FROM = {
						reverse_opinion = {
							who = ROOT
							value = 0
						}
					}
				}
			}
		}
		FROM = {
			hidden_tooltip = { change_variable = { which = "succession_law_vote" value = 1 } }
			hidden_tooltip = {
				remove_opinion = {
					modifier = opinion_approved_succession_law
					who = ROOT
				}
				remove_opinion = {
					modifier = opinion_ignored_succession_law
					who = ROOT
				}
			}
			opinion = {
				modifier = opinion_approved_succession_law
				who = ROOT
				months = 120
			}
		}
	}

	option = {
		name = "EVTOPTB_Plus_601" #Ignore
		ai_chance = { factor = 100 }
		FROM = {
			hidden_tooltip = { change_variable = { which = "succession_law_vote" value = -1 } }
			hidden_tooltip = {
				remove_opinion = {
					modifier = opinion_approved_succession_law
					who = ROOT
				}
				remove_opinion = {
					modifier = opinion_ignored_succession_law
					who = ROOT
				}
			}
			opinion = {
				modifier = opinion_ignored_succession_law
				who = ROOT
				months = 120
			}
		}
	}
}

# Vassals vote to approve or disapprove Feudal Elective
letter_event = {
	id = Plus.616
	desc = "EVTDESC_Plus_616"

	is_triggered_only = yes

	option = {
		name = "EVTOPTA_Plus_601" #Approve
		ai_chance = {
			factor = 75
			modifier = {
				factor = 0.01
				event_target:changed_title = {
					current_heir = {
						character = ROOT
					}
				}
			}
			modifier = {
				factor = 0.5
				OR = {
					leads_faction = faction_tradition
					in_faction = faction_tradition
				}
			}
			modifier = {
				factor = 0.5
				NOT = { same_realm = FROM }
			}
			modifier = {
				factor = 0.5
				dynasty = FROM
			}
			modifier = {
				factor = 2.5
				NOT = { dynasty = FROM }
			}
			modifier = {
				factor = 0.5
				event_target:changed_title = {
					crownlaw_title = {
						OR = {
							has_law = crown_authority_0
							has_law = tribal_organization_0
						}
					}
				}
			}
			modifier = {
				factor = 0.5
				event_target:changed_title = {
					crownlaw_title = {
						OR = {
							has_law = crown_authority_1
							has_law = tribal_organization_1
						}
					}
				}
			}
			modifier = {
				factor = 2.0
				event_target:changed_title = {
					crownlaw_title = {
						OR = {
							has_law = crown_authority_3
							has_law = tribal_organization_3
						}
					}
				}
			}
			modifier = {
				factor = 2.0
				event_target:changed_title = {
					crownlaw_title = {
						OR = {
							has_law = crown_authority_4
							has_law = tribal_organization_4
						}
					}
				}
			}
			modifier = {
				factor = 10.0
				FROM = {
					reverse_opinion = {
						who = ROOT
						value = 100
					}
				}
			}
			modifier = {
				factor = 5.0
				FROM = {
					reverse_opinion = {
						who = ROOT
						value = 75
					}
				}
			}
			modifier = {
				factor = 2.0
				FROM = {
					reverse_opinion = {
						who = ROOT
						value = 50
					}
				}
			}
			modifier = {
				factor = 0.5
				NOT = {
					FROM = {
						reverse_opinion = {
							who = ROOT
							value = 25
						}
					}
				}
			}
			modifier = {
				factor = 0.01
				NOT = {
					FROM = {
						reverse_opinion = {
							who = ROOT
							value = 0
						}
					}
				}
			}
		}
		FROM = {
			hidden_tooltip = { change_variable = { which = "succession_law_vote" value = 1 } }
			hidden_tooltip = {
				remove_opinion = {
					modifier = opinion_approved_succession_law
					who = ROOT
				}
				remove_opinion = {
					modifier = opinion_ignored_succession_law
					who = ROOT
				}
			}
			opinion = {
				modifier = opinion_approved_succession_law
				who = ROOT
				months = 120
			}
		}
	}

	option = {
		name = "EVTOPTB_Plus_601" #Ignore
		ai_chance = { factor = 100 }
		FROM = {
			hidden_tooltip = { change_variable = { which = "succession_law_vote" value = -1 } }
			hidden_tooltip = {
				remove_opinion = {
					modifier = opinion_approved_succession_law
					who = ROOT
				}
				remove_opinion = {
					modifier = opinion_ignored_succession_law
					who = ROOT
				}
			}
			opinion = {
				modifier = opinion_ignored_succession_law
				who = ROOT
				months = 120
			}
		}
	}
}

# The law passes or is defeated
character_event = {
	id = Plus.610
	desc = "EVTDESC_Plus_610"
	picture = GFX_evt_council

	is_triggered_only = yes

	immediate = {
		if = {
			limit = {
				check_variable = { which = "succession_law_vote" value = -0.5 }
				has_character_flag = vote_is_for_gavelkind
			}
			clr_character_flag = vote_is_for_gavelkind
			event_target:changed_title = {
				#set flag so we know what the former law was
				if = {
					limit = { is_primary_holder_title = yes }
					clr_title_flag = former_gavelkind
					clr_title_flag = former_seniority
					clr_title_flag = former_primogeniture
					clr_title_flag = former_feudal_elective
					clr_title_flag = former_tanistry
					clr_title_flag = former_ultimogeniture
					if = {
						limit = { has_law = succ_gavelkind }
						set_title_flag = former_gavelkind
					}
					if = {
						limit = { has_law = succ_seniority }
						set_title_flag = former_seniority
					}
					if = {
						limit = { has_law = succ_primogeniture }
						set_title_flag = former_primogeniture
					}
					if = {
						limit = { has_law = succ_feudal_elective }
						set_title_flag = former_feudal_elective
					}
					if = {
						limit = { has_law = succ_tanistry }
						set_title_flag = former_tanistry
					}
					if = {
						limit = { has_law = succ_ultimogeniture }
						set_title_flag = former_ultimogeniture
					}
				}
				
				#set opinion changes for heirs and pretenders
				current_heir = { set_character_flag = former_heir }
				ROOT = {
					any_realm_character = {
						limit = {
							any_pretender_title = { title = event_target:changed_title }
						}
						set_character_flag = former_pretender
					}
					any_independent_ruler = {
						any_realm_character = {
							limit = {
								any_pretender_title = { title = event_target:changed_title }
							}
							set_character_flag = former_pretender
						}
					}
					character_event = { id = Plus.604 days = 5 }
				}
				
				#actually change the law
				add_law = succ_gavelkind
				
				#current heir is unhappy (they have to share) if they were the previous heir
				current_heir = {
					if = { 
						limit = { has_character_flag = former_heir }
						opinion = {
							who = ROOT
							modifier = opinion_succ_law_change
							months = 240
						}
					}
				}
				
				ROOT = {
					#legitimate children are happy
					any_child = {
						limit = {
							NOT = {
								trait = bastard
								trait = monk
								trait = nun
								trait = disinherited
								has_character_flag = former_heir
								has_character_flag = former_pretender
								any_heir_title = { title = event_target:changed_title }
								any_pretender_title = { title = event_target:changed_title }
								has_opinion_modifier = { who = ROOT modifier = opinion_succ_law_change }
								has_opinion_modifier = { who = ROOT modifier = opinion_good_succ_law_change }
								has_opinion_modifier = { who = ROOT modifier = opinion_bad_succ_law_change 	}
							}
						}
						opinion = {
							who = ROOT
							modifier = opinion_good_succ_law_change
							months = 240
						}
					}
					#vassals are slightly upset
					any_vassal = {
						limit = {
							OR = {
								primary_title = { de_jure_liege_or_above = event_target:changed_title }
								event_target:changed_title = { is_primary_holder_title = yes }
								event_target:changed_title = { is_titular = yes }
							}
							NOT = {
								has_opinion_modifier = { who = ROOT modifier = opinion_succ_law_change }
								has_opinion_modifier = { who = ROOT modifier = opinion_good_succ_law_change }
								has_opinion_modifier = { who = ROOT modifier = opinion_bad_succ_law_change 	}
							}
						}
						opinion = {
							who = ROOT
							modifier = opinion_succ_law_change
							months = 240
						}
					}
				}
				
				any_de_jure_vassal_title = {
					limit = {
						holder_scope = { has_character_flag = vote_is_for_gavelkind }
					}
					holder_scope = {
						if = {
							limit = { has_character_flag = voted_on_gavelkind }
							character_event = { id = Plus.611 }
						}
						clr_character_flag = succession_vote
						clr_character_flag = voted_on_gavelkind
						clr_character_flag = vote_is_for_gavelkind
					}
				}
			}
			break = yes
		}
		if = {
			limit = {
				check_variable = { which = "succession_law_vote" value = -0.5 }
				has_character_flag = vote_is_for_primogeniture
			}			
			clr_character_flag = vote_is_for_primogeniture
			event_target:changed_title = {
				#set flag so we know what the former law was
				#set flag so we know what the former law was
				if = {
					limit = { is_primary_holder_title = yes }
					clr_title_flag = former_gavelkind
					clr_title_flag = former_seniority
					clr_title_flag = former_primogeniture
					clr_title_flag = former_feudal_elective
					clr_title_flag = former_tanistry
					clr_title_flag = former_ultimogeniture
					if = {
						limit = { has_law = succ_gavelkind }
						set_title_flag = former_gavelkind
					}
					if = {
						limit = { has_law = succ_seniority }
						set_title_flag = former_seniority
					}
					if = {
						limit = { has_law = succ_primogeniture }
						set_title_flag = former_primogeniture
					}
					if = {
						limit = { has_law = succ_feudal_elective }
						set_title_flag = former_feudal_elective
					}
					if = {
						limit = { has_law = succ_tanistry }
						set_title_flag = former_tanistry
					}
					if = {
						limit = { has_law = succ_ultimogeniture }
						set_title_flag = former_ultimogeniture
					}
				}
				
				#set opinion changes for heirs and pretenders
				current_heir = { set_character_flag = former_heir }
				ROOT = {
					any_realm_character = {
						limit = {
							any_pretender_title = { title = event_target:changed_title }
						}
						set_character_flag = former_pretender
					}
					any_independent_ruler = {
						any_realm_character = {
							limit = {
								any_pretender_title = { title = event_target:changed_title }
							}
							set_character_flag = former_pretender
						}
					}
					character_event = { id = Plus.604 days = 5 }
				}
				
				#actually change the law
				add_law = succ_primogeniture
				
				#current heir is pleased
				current_heir = {
					opinion = {
						who = ROOT
						modifier = opinion_good_succ_law_change
						months = 240
					}
				}
				
				ROOT = {
					#legitimate children are upset
					any_child = {
						limit = {
							NOT = {
								trait = bastard
								trait = monk
								trait = nun
								trait = disinherited
								has_character_flag = former_heir
								has_character_flag = former_pretender
								any_heir_title = { title = event_target:changed_title }
								any_pretender_title = { title = event_target:changed_title }
								has_opinion_modifier = { who = ROOT modifier = opinion_succ_law_change }
								has_opinion_modifier = { who = ROOT modifier = opinion_good_succ_law_change }
								has_opinion_modifier = { who = ROOT modifier = opinion_bad_succ_law_change 	}
							}
						}
						opinion = {
							who = ROOT
							modifier = opinion_bad_succ_law_change
							months = 240
						}
					}
					#vassals are slightly upset
					any_vassal = {
						limit = {
							OR = {
								primary_title = { de_jure_liege_or_above = event_target:changed_title }
								event_target:changed_title = { is_primary_holder_title = yes }
								event_target:changed_title = { is_titular = yes }
							}
							NOT = {
								has_opinion_modifier = { who = ROOT modifier = opinion_succ_law_change }
								has_opinion_modifier = { who = ROOT modifier = opinion_good_succ_law_change }
								has_opinion_modifier = { who = ROOT modifier = opinion_bad_succ_law_change 	}
							}
						}
						opinion = {
							who = ROOT
							modifier = opinion_succ_law_change
							months = 240
						}
					}
				}
				
				any_de_jure_vassal_title = {
					limit = {
						holder_scope = { has_character_flag = vote_is_for_primogeniture }
					}
					holder_scope = {
						if = {
							limit = { has_character_flag = voted_on_primogeniture }
							character_event = { id = Plus.611 }
						}
						clr_character_flag = succession_vote
						clr_character_flag = voted_on_primogeniture
						clr_character_flag = vote_is_for_primogeniture
					}
				}
			}
			break = yes
		}
		if = {
			limit = {
				check_variable = { which = "succession_law_vote" value = -0.5 }
				has_character_flag = vote_is_for_seniority
			}			
			clr_character_flag = vote_is_for_seniority
			event_target:changed_title = {
				#set flag so we know what the former law was
				if = {
					limit = { is_primary_holder_title = yes }
					clr_title_flag = former_gavelkind
					clr_title_flag = former_seniority
					clr_title_flag = former_primogeniture
					clr_title_flag = former_feudal_elective
					clr_title_flag = former_tanistry
					clr_title_flag = former_ultimogeniture
					if = {
						limit = { has_law = succ_gavelkind }
						set_title_flag = former_gavelkind
					}
					if = {
						limit = { has_law = succ_seniority }
						set_title_flag = former_seniority
					}
					if = {
						limit = { has_law = succ_primogeniture }
						set_title_flag = former_primogeniture
					}
					if = {
						limit = { has_law = succ_feudal_elective }
						set_title_flag = former_feudal_elective
					}
					if = {
						limit = { has_law = succ_tanistry }
						set_title_flag = former_tanistry
					}
					if = {
						limit = { has_law = succ_ultimogeniture }
						set_title_flag = former_ultimogeniture
					}
				}
				
				#set opinion changes for heirs and pretenders
				current_heir = { set_character_flag = former_heir }
				ROOT = {
					any_realm_character = {
						limit = {
							any_pretender_title = { title = event_target:changed_title }
						}
						set_character_flag = former_pretender
					}
					any_independent_ruler = {
						any_realm_character = {
							limit = {
								any_pretender_title = { title = event_target:changed_title }
							}
							set_character_flag = former_pretender
						}
					}
					character_event = { id = Plus.604 days = 5 }
				}

				#actually change the law
				add_law = succ_seniority
				
				ROOT = {
					#legitimate children are angry
					any_child = {
						limit = {
							NOT = {
								trait = bastard
								trait = monk
								trait = nun
								trait = disinherited
								any_heir_title = { title = event_target:changed_title }
								any_pretender_title = { title = event_target:changed_title }
								has_opinion_modifier = { who = ROOT modifier = opinion_succ_law_change }
								has_opinion_modifier = { who = ROOT modifier = opinion_good_succ_law_change }
								has_opinion_modifier = { who = ROOT modifier = opinion_bad_succ_law_change 	}
							}
						}
						opinion = {
							who = ROOT
							modifier = opinion_bad_succ_law_change
							months = 240
						}
					}
					#dynasty members are pleased
					any_dynasty_member = {
						limit = {
							NOT = {
								has_opinion_modifier = { who = ROOT modifier = opinion_succ_law_change }
								has_opinion_modifier = { who = ROOT modifier = opinion_good_succ_law_change }
								has_opinion_modifier = { who = ROOT modifier = opinion_bad_succ_law_change 	}
							}
						}
						opinion = {
							who = ROOT
							modifier = opinion_good_succ_law_change
							months = 240
						}
					}
					#vassals are slightly upset
					any_vassal = {
						limit = {
							OR = {
								primary_title = { de_jure_liege_or_above = event_target:changed_title }
								event_target:changed_title = { is_primary_holder_title = yes }
								event_target:changed_title = { is_titular = yes }
							}
							NOT = {
								has_opinion_modifier = { who = ROOT modifier = opinion_succ_law_change }
								has_opinion_modifier = { who = ROOT modifier = opinion_good_succ_law_change }
								has_opinion_modifier = { who = ROOT modifier = opinion_bad_succ_law_change 	}
							}
						}
						opinion = {
							who = ROOT
							modifier = opinion_succ_law_change
							months = 240
						}
					}
				}
				
				any_de_jure_vassal_title = {
					limit = {
						holder_scope = { has_character_flag = vote_is_for_seniority }
					}
					holder_scope = {
						if = {
							limit = { has_character_flag = voted_on_seniority }
							character_event = { id = Plus.611 }
						}
						clr_character_flag = succession_vote
						clr_character_flag = voted_on_seniority
						clr_character_flag = vote_is_for_seniority
					}
				}
			}
			break = yes
		}
		if = {
			limit = {
				check_variable = { which = "succession_law_vote" value = -0.5 }
				has_character_flag = vote_is_for_tanistry
			}			
			clr_character_flag = vote_is_for_tanistry
			event_target:changed_title = {
				#set flag so we know what the former law was
				if = {
					limit = { is_primary_holder_title = yes }
					clr_title_flag = former_gavelkind
					clr_title_flag = former_seniority
					clr_title_flag = former_primogeniture
					clr_title_flag = former_feudal_elective
					clr_title_flag = former_tanistry
					clr_title_flag = former_ultimogeniture
					if = {
						limit = { has_law = succ_gavelkind }
						set_title_flag = former_gavelkind
					}
					if = {
						limit = { has_law = succ_seniority }
						set_title_flag = former_seniority
					}
					if = {
						limit = { has_law = succ_primogeniture }
						set_title_flag = former_primogeniture
					}
					if = {
						limit = { has_law = succ_feudal_elective }
						set_title_flag = former_feudal_elective
					}
					if = {
						limit = { has_law = succ_tanistry }
						set_title_flag = former_tanistry
					}
					if = {
						limit = { has_law = succ_ultimogeniture }
						set_title_flag = former_ultimogeniture
					}
				}
				
				#set opinion changes for heirs and pretenders
				current_heir = { set_character_flag = former_heir }
				ROOT = {
					any_realm_character = {
						limit = {
							any_pretender_title = { title = event_target:changed_title }
						}
						set_character_flag = former_pretender
					}
					any_independent_ruler = {
						any_realm_character = {
							limit = {
								any_pretender_title = { title = event_target:changed_title }
							}
							set_character_flag = former_pretender
						}
					}
					character_event = { id = Plus.604 days = 5 }
				}

				#actually change the law
				add_law = succ_tanistry

				any_de_jure_vassal = {
					limit = {
						OR = {
							AND = {
								tier = baron
								PREV = { tier = count }
							}
							AND = {
								tier = count
								PREV = { tier = duke }
							}
							higher_tier_than = count
						}
					}
					set_character_flag = dejure_vassal
				}
				ROOT = {
					#all legitimate children are upset
					any_child = {
						limit = {
							NOT = {
								trait = bastard
								trait = monk
								trait = nun
								trait = disinherited
								has_opinion_modifier = { who = PREV modifier = opinion_succ_law_change }
								has_opinion_modifier = { who = PREV modifier = opinion_good_succ_law_change }
								has_opinion_modifier = { who = PREV modifier = opinion_bad_succ_law_change 	}
							}
						}
						opinion = {
							who = PREV
							modifier = opinion_bad_succ_law_change
							months = 240
						}
					}
					#dynasty members are somewhat upset
					any_dynasty_member = {
						limit = {
							NOT = {
								has_opinion_modifier = { who = PREV modifier = opinion_succ_law_change }
								has_opinion_modifier = { who = PREV modifier = opinion_good_succ_law_change }
								has_opinion_modifier = { who = PREV modifier = opinion_bad_succ_law_change 	}
							}
						}
						opinion = {
							who = PREV
							modifier = opinion_succ_law_change
							months = 240
						}
					}
					#electors are pleased
					any_vassal = {
						limit = {
							has_character_flag = dejure_vassal
							NOT = {
								has_opinion_modifier = { who = PREV modifier = opinion_succ_law_change }
								has_opinion_modifier = { who = PREV modifier = opinion_good_succ_law_change }
								has_opinion_modifier = { who = PREV modifier = opinion_bad_succ_law_change 	}
							}
						}
						opinion = {
							who = PREV
							modifier = opinion_good_succ_law_change
							months = 240
						}
					}
					#other vassals are slightly upset
					any_vassal = {
						limit = {
							OR = {
								primary_title = { de_jure_liege_or_above = event_target:changed_title }
								event_target:changed_title = { is_primary_holder_title = yes }
								event_target:changed_title = { is_titular = yes }
							}
							NOT = {
								has_opinion_modifier = { who = PREV modifier = opinion_succ_law_change }
								has_opinion_modifier = { who = PREV modifier = opinion_good_succ_law_change }
								has_opinion_modifier = { who = PREV modifier = opinion_bad_succ_law_change 	}
							}
						}
						opinion = {
							who = PREV
							modifier = opinion_succ_law_change
							months = 240
						}
					}
				}
				any_de_jure_vassal = {
					clr_character_flag = dejure_vassal
				}
				
				any_de_jure_vassal_title = {
					limit = {
						holder_scope = { has_character_flag = vote_is_for_tanistry }
					}
					holder_scope = {
						if = {
							limit = { has_character_flag = voted_on_tanistry }
							character_event = { id = Plus.611 }
						}
						clr_character_flag = succession_vote
						clr_character_flag = voted_on_tanistry
						clr_character_flag = vote_is_for_tanistry
					}
				}
			}
			break = yes
		}
		if = {
			limit = {
				check_variable = { which = "succession_law_vote" value = -0.5 }
				has_character_flag = vote_is_for_feudal_elective
			}			
			clr_character_flag = vote_is_for_feudal_elective
			event_target:changed_title = {
				#set flag so we know what the former law was
				if = {
					limit = { is_primary_holder_title = yes }
					clr_title_flag = former_gavelkind
					clr_title_flag = former_seniority
					clr_title_flag = former_primogeniture
					clr_title_flag = former_feudal_elective
					clr_title_flag = former_tanistry
					clr_title_flag = former_ultimogeniture
					if = {
						limit = { has_law = succ_gavelkind }
						set_title_flag = former_gavelkind
					}
					if = {
						limit = { has_law = succ_seniority }
						set_title_flag = former_seniority
					}
					if = {
						limit = { has_law = succ_primogeniture }
						set_title_flag = former_primogeniture
					}
					if = {
						limit = { has_law = succ_feudal_elective }
						set_title_flag = former_feudal_elective
					}
					if = {
						limit = { has_law = succ_tanistry }
						set_title_flag = former_tanistry
					}
					if = {
						limit = { has_law = succ_ultimogeniture }
						set_title_flag = former_ultimogeniture
					}
				}
				
				#set opinion changes for heirs and pretenders
				current_heir = { set_character_flag = former_heir }
				ROOT = {
					any_realm_character = {
						limit = {
							any_pretender_title = { title = event_target:changed_title }
						}
						set_character_flag = former_pretender
					}
					any_independent_ruler = {
						any_realm_character = {
							limit = {
								any_pretender_title = { title = event_target:changed_title }
							}
							set_character_flag = former_pretender
						}
					}
					character_event = { id = Plus.604 days = 5 }
				}

				#actually change the law
				add_law = succ_feudal_elective

				any_de_jure_vassal = {
					limit = {
						OR = {
							AND = {
								tier = baron
								PREV = { tier = count }
							}
							AND = {
								tier = count
								PREV = { tier = duke }
							}
							higher_tier_than = count
						}
					}
					set_character_flag = dejure_vassal
				}
				ROOT = {
					#all legitimate children are upset
					any_child = {
						limit = {
							NOT = {
								trait = bastard
								trait = monk
								trait = nun
								trait = disinherited
								has_opinion_modifier = { who = PREV modifier = opinion_succ_law_change }
								has_opinion_modifier = { who = PREV modifier = opinion_good_succ_law_change }
								has_opinion_modifier = { who = PREV modifier = opinion_bad_succ_law_change 	}
							}
						}
						opinion = {
							who = PREV
							modifier = opinion_bad_succ_law_change
							months = 240
						}
					}
					#dynasty members are somewhat upset
					any_dynasty_member = {
						limit = {
							NOT = {
								has_opinion_modifier = { who = PREV modifier = opinion_succ_law_change }
								has_opinion_modifier = { who = PREV modifier = opinion_good_succ_law_change }
								has_opinion_modifier = { who = PREV modifier = opinion_bad_succ_law_change 	}
							}
						}
						opinion = {
							who = PREV
							modifier = opinion_succ_law_change
							months = 240
						}
					}
					#electors are pleased
					any_vassal = {
						limit = {
							has_character_flag = dejure_vassal
							NOT = {
								has_opinion_modifier = { who = PREV modifier = opinion_succ_law_change }
								has_opinion_modifier = { who = PREV modifier = opinion_good_succ_law_change }
								has_opinion_modifier = { who = PREV modifier = opinion_bad_succ_law_change 	}
							}
						}
						opinion = {
							who = PREV
							modifier = opinion_good_succ_law_change
							months = 240
						}
					}
					#other vassals are slightly upset
					any_vassal = {
						limit = {
							OR = {
								primary_title = { de_jure_liege_or_above = event_target:changed_title }
								event_target:changed_title = { is_primary_holder_title = yes }
								event_target:changed_title = { is_titular = yes }
							}
							NOT = {
								has_opinion_modifier = { who = PREV modifier = opinion_succ_law_change }
								has_opinion_modifier = { who = PREV modifier = opinion_good_succ_law_change }
								has_opinion_modifier = { who = PREV modifier = opinion_bad_succ_law_change 	}
							}
						}
						opinion = {
							who = PREV
							modifier = opinion_succ_law_change
							months = 240
						}
					}
				}
				any_de_jure_vassal = {
					clr_character_flag = dejure_vassal
				}
				
				any_de_jure_vassal_title = {
					limit = {
						holder_scope = { has_character_flag = vote_is_for_feudal_elective }
					}
					holder_scope = {
						if = {
							limit = { has_character_flag = voted_on_feudal_elective }
							character_event = { id = Plus.611 }
						}
						clr_character_flag = succession_vote
						clr_character_flag = voted_on_feudal_elective
						clr_character_flag = vote_is_for_feudal_elective
					}
				}
			}
			break = yes
		}
		if = {
			limit = { has_character_flag = vote_is_for_gavelkind }
			clr_character_flag = vote_is_for_gavelkind
			event_target:changed_title = {
				any_de_jure_vassal_title = {
					limit = {
						holder_scope = { has_character_flag = vote_is_for_gavelkind }
					}
					holder_scope = {
						if = {
							limit = { has_character_flag = voted_on_gavelkind }
							character_event = { id = Plus.612 }
						}
						clr_character_flag = succession_vote
						clr_character_flag = voted_on_gavelkind
						clr_character_flag = vote_is_for_gavelkind
					}
				}
			}
			break = yes
		}
		if = {
			limit = { has_character_flag = vote_is_for_primogeniture }
			clr_character_flag = vote_is_for_primogeniture
			event_target:changed_title = {
				any_de_jure_vassal_title = {
					limit = {
						holder_scope = { has_character_flag = vote_is_for_primogeniture }
					}
					holder_scope = {
						if = {
							limit = { has_character_flag = voted_on_primogeniture }
							character_event = { id = Plus.612 }
						}
						clr_character_flag = succession_vote
						clr_character_flag = voted_on_primogeniture
						clr_character_flag = vote_is_for_primogeniture
					}
				}
			}
			break = yes
		}
		if = {
			limit = { has_character_flag = vote_is_for_seniority }
			clr_character_flag = vote_is_for_seniority
			event_target:changed_title = {
				any_de_jure_vassal_title = {
					limit = {
						holder_scope = { has_character_flag = vote_is_for_seniority }
					}
					holder_scope = {
						if = {
							limit = { has_character_flag = voted_on_seniority }
							character_event = { id = Plus.612 }
						}
						clr_character_flag = succession_vote
						clr_character_flag = voted_on_seniority
						clr_character_flag = vote_is_for_seniority
					}
				}
			}
			break = yes
		}
		if = {
			limit = { has_character_flag = vote_is_for_tanistry }
			clr_character_flag = vote_is_for_tanistry
			event_target:changed_title = {
				any_de_jure_vassal_title = {
					limit = {
						holder_scope = { has_character_flag = vote_is_for_tanistry }
					}
					holder_scope = {
						if = {
							limit = { has_character_flag = voted_on_tanistry }
							character_event = { id = Plus.612 }
						}
						clr_character_flag = succession_vote
						clr_character_flag = voted_on_tanistry
						clr_character_flag = vote_is_for_tanistry
					}
				}
			}
			break = yes
		}
		if = {
			limit = { has_character_flag = vote_is_for_feudal_elective }
			clr_character_flag = vote_is_for_feudal_elective
			event_target:changed_title = {
				any_de_jure_vassal_title = {
					limit = {
						holder_scope = { has_character_flag = vote_is_for_feudal_elective }
					}
					holder_scope = {
						if = {
							limit = { has_character_flag = voted_on_feudal_elective }
							character_event = { id = Plus.612 }
						}
						clr_character_flag = succession_vote
						clr_character_flag = voted_on_feudal_elective
						clr_character_flag = vote_is_for_feudal_elective
					}
				}
			}
			break = yes
		}
	}

	option = {
		name = "EVTOPTA_Plus_610" #Approved
		trigger = {
			check_variable = { which = "succession_law_vote" value = -0.5 }
		}
		hidden_tooltip = {
			set_variable = { which = "succession_law_vote" value = 0 }
		}
		ROOT = {
			custom_tooltip = { text = CUSTOMTOOLTIP8 }
		}
		event_target:changed_title = {
			any_de_jure_vassal_title = {
				limit = {
					holder_scope = {
						reverse_has_opinion_modifier = {
							who = ROOT
							modifier = opinion_approved_succession_law
						}
					}
				}
				holder_scope = {
					custom_tooltip = { text = CUSTOMTOOLTIP8 }
				}
			}
		}
		event_target:changed_title = {
			any_de_jure_vassal_title = {
				limit = {
					holder_scope = {
						reverse_has_opinion_modifier = {
							who = ROOT
							modifier = opinion_ignored_succession_law
						}
					}
				}
				holder_scope = {
					custom_tooltip = { text = CUSTOMTOOLTIP9 }
				}
			}
		}
		clr_character_flag = voting_on_succession_law
	}

	option = {
		name = "EVTOPTB_Plus_610" #Rejected
		trigger = {
			NOT = { check_variable = { which = "succession_law_vote" value = -0.5 } }
		}
		hidden_tooltip = {
			set_variable = { which = "succession_law_vote" value = 0 }
		}
		ROOT = {
			custom_tooltip = { text = CUSTOMTOOLTIP8 }
		}
		event_target:changed_title = {
			any_de_jure_vassal_title = {
				limit = {
					holder_scope = {
						reverse_has_opinion_modifier = {
							who = ROOT
							modifier = opinion_approved_succession_law
						}
					}
				}
				holder_scope = {
					custom_tooltip = { text = CUSTOMTOOLTIP8 }
				}
			}
		}
		event_target:changed_title = {
			any_de_jure_vassal_title = {
				limit = {
					holder_scope = {
						reverse_has_opinion_modifier = {
							who = ROOT
							modifier = opinion_ignored_succession_law
						}
					}
				}
				holder_scope = {
					custom_tooltip = { text = CUSTOMTOOLTIP9 }
				}
			}
		}
		if = {
			limit = { event_target:changed_title = { tier = BARON } }
			prestige = 65
		}
		if = {
			limit = { event_target:changed_title = { tier = COUNT } }
			prestige = 125
		}
		if = {
			limit = { event_target:changed_title = { tier = DUKE } }
			prestige = 250
		}
		if = {
			limit = { event_target:changed_title = { tier = KING } }
			prestige = 375
		}
		if = {
			limit = { event_target:changed_title = { tier = EMPEROR } }
			prestige = 50
		}
		clr_character_flag = voting_on_succession_law
	}
}

# Notification - success
character_event = {
	id = Plus.611
	desc = "EVTDESC_Plus_611"
	picture = GFX_evt_council

	is_triggered_only = yes

	trigger = {
		ai = no
	}

	option = {
		name = "OK"
	}
}

# Notification - failure
character_event = {
	id = Plus.612
	desc = "EVTDESC_Plus_612"
	picture = GFX_evt_council

	is_triggered_only = yes

	trigger = {
		ai = no
	}

	option = {
		name = "OK"
	}
}

#######################################
# REACTIONS TO SUCCESSION LAW CHANGES
# Written by Rylock
#######################################

# Base event fired on the ruler after changing a law
character_event = {
	id = Plus.604
	
	hide_window = yes
	is_triggered_only = yes
	
	immediate = {
		random_demesne_title = {
			limit = { has_title_flag = title_to_change }
			clr_title_flag = title_to_change
			save_event_target_as = changed_title
		}
		# former heir is now neither heir nor pretender
		any_realm_character = {
			limit = {
				has_character_flag = former_heir
				NOT = { any_heir_title = { title = event_target:changed_title } }
				NOT = { any_pretender_title = { title = event_target:changed_title } }
			}
			remove_opinion = { who = ROOT modifier = opinion_succ_law_change }
			remove_opinion = { who = ROOT modifier = opinion_good_succ_law_change }
			remove_opinion = { who = ROOT modifier = opinion_bad_succ_law_change }
			character_event = { id = Plus.605 }
		}
		any_independent_ruler = {
			limit = { NOT = { same_realm = ROOT } }
			any_realm_character = {
				limit = {
					has_character_flag = former_heir
					NOT = { any_heir_title = { title = event_target:changed_title } }
					NOT = { any_pretender_title = { title = event_target:changed_title } }
				}
				remove_opinion = { who = ROOT modifier = opinion_succ_law_change }
				remove_opinion = { who = ROOT modifier = opinion_good_succ_law_change }
				remove_opinion = { who = ROOT modifier = opinion_bad_succ_law_change }
				character_event = { id = Plus.605 }
			}
		}
		
		# former heir is now pretender
		any_realm_character = {
			limit = {
				has_character_flag = former_heir
				NOT = { any_heir_title = { title = event_target:changed_title } }
				NOT = { has_character_flag = former_pretender }
				any_pretender_title = { title = event_target:changed_title }
			}
			remove_opinion = { who = ROOT modifier = opinion_succ_law_change }
			remove_opinion = { who = ROOT modifier = opinion_good_succ_law_change }
			remove_opinion = { who = ROOT modifier = opinion_bad_succ_law_change }
			character_event = { id = Plus.606 }
		}
		any_independent_ruler = {
			limit = { NOT = { same_realm = ROOT } }
			any_realm_character = {
				limit = {
					has_character_flag = former_heir
					NOT = { any_heir_title = { title = event_target:changed_title } }
					NOT = { has_character_flag = former_pretender }
					any_pretender_title = { title = event_target:changed_title }
				}
				remove_opinion = { who = ROOT modifier = opinion_succ_law_change }
				remove_opinion = { who = ROOT modifier = opinion_good_succ_law_change }
				remove_opinion = { who = ROOT modifier = opinion_bad_succ_law_change }
				character_event = { id = Plus.606 }
			}
		}
		
		# former pretender is now neither heir nor pretender
		any_realm_character = {
			limit = {
				has_character_flag = former_pretender
				NOT = { any_heir_title = { title = event_target:changed_title } }
				NOT = { any_pretender_title = { title = event_target:changed_title } }
			}
			remove_opinion = { who = ROOT modifier = opinion_succ_law_change }
			remove_opinion = { who = ROOT modifier = opinion_good_succ_law_change }
			remove_opinion = { who = ROOT modifier = opinion_bad_succ_law_change }
			character_event = { id = Plus.607 }
		}
		any_independent_ruler = {
			limit = { NOT = { same_realm = ROOT } }
			any_realm_character = {
				limit = {
					has_character_flag = former_pretender
					NOT = { any_heir_title = { title = event_target:changed_title } }
					NOT = { any_pretender_title = { title = event_target:changed_title } }
				}
				remove_opinion = { who = ROOT modifier = opinion_succ_law_change }
				remove_opinion = { who = ROOT modifier = opinion_good_succ_law_change }
				remove_opinion = { who = ROOT modifier = opinion_bad_succ_law_change }
				character_event = { id = Plus.607 }
			}
		}
		
		# the new heir
		event_target:changed_title = {
			current_heir = {
				if = {
					limit = {
						NOT = { has_character_flag = former_heir }
					}
					remove_opinion = { who = ROOT modifier = opinion_succ_law_change }
					remove_opinion = { who = ROOT modifier = opinion_good_succ_law_change }
					remove_opinion = { who = ROOT modifier = opinion_bad_succ_law_change }
					character_event = { id = Plus.608 }
				}
			}
		}
		
		# the new pretenders
		any_realm_character = {
			limit = {
				NOT = { has_character_flag = former_heir }
				NOT = { has_character_flag = former_pretender }
				NOT = { any_heir_title = { title = event_target:changed_title } }
				any_pretender_title = { title = event_target:changed_title }
			}
			remove_opinion = { who = ROOT modifier = opinion_succ_law_change }
			remove_opinion = { who = ROOT modifier = opinion_good_succ_law_change }
			remove_opinion = { who = ROOT modifier = opinion_bad_succ_law_change }
			character_event = { id = Plus.609 }
		}
		any_independent_ruler = {
			limit = { NOT = { same_realm = ROOT } }
			any_realm_character = {
				limit = {
					NOT = { has_character_flag = former_heir }
					NOT = { has_character_flag = former_pretender }
					NOT = { any_heir_title = { title = event_target:changed_title } }
					any_pretender_title = { title = event_target:changed_title }
				}
				remove_opinion = { who = ROOT modifier = opinion_succ_law_change }
				remove_opinion = { who = ROOT modifier = opinion_good_succ_law_change }
				remove_opinion = { who = ROOT modifier = opinion_bad_succ_law_change }
				character_event = { id = Plus.609 }
			}
		}
		
		#clear the flags
		any_realm_character = {
			clr_character_flag = former_heir
			clr_character_flag = former_pretender
		}
		any_independent_ruler = {
			limit = { NOT = { same_realm = ROOT } }
			any_realm_character = {
				clr_character_flag = former_heir
				clr_character_flag = former_pretender
			}
		}
	}
}

# A former heir is now neither the heir nor a pretender
character_event = {
	id = Plus.605
	picture = "GFX_evt_scandal"
	desc = "EVTDESC_Plus_605"
	
	is_triggered_only = yes
	
	option = {
		name = "EVTOPTA_Plus_605" #So be it
		trigger = {
			NOT = {
				trait = lunatic
				trait = possessed
			}
		}
		ai_chance = {
			factor = 30
			modifier = {
				factor = 3
				trait = content
			}
			modifier = {
				factor = 2
				trait = humble
			}
			modifier = {
				factor = 1.5
				trait = charitable
			}
			modifier = {
				factor = 1.5
				trait = patient
			}
			modifier = {
				factor = 1.5
				trait = trusting
			}
			modifier = {
				factor = 0.5
				trait = proud
			}
			modifier = {
				factor = 0.25
				trait = ambitious
			}
		}
		FROM = {
			reverse_opinion = {
				who = ROOT
				modifier = opinion_bad_succ_law_change
				months = 240
			}
		}
		event_target:changed_title = {
			current_heir = {
				reverse_opinion = {
					who = ROOT
					modifier = opinion_resentful
					multiplier = 2
					months = 120
				}
			}
		}
		any_realm_character = {
			limit = {
				any_pretender_title = { title = event_target:changed_title }
			}
			reverse_opinion = {
				who = ROOT
				modifier = opinion_resentful
				months = 120
			}
		}
		any_independent_ruler = {
			limit = { NOT = { same_realm = ROOT } }
			any_realm_character = {
				limit = {
					any_pretender_title = { title = event_target:changed_title }
				}
				reverse_opinion = {
					who = ROOT
					modifier = opinion_resentful
					months = 120
				}
			}
		}
		any_realm_character = {
			limit = {
				OR = {
					any_spouse = { character = ROOT }
					any_child = { character = ROOT }
				}
				NOT = { character = FROM }
				NOT = { any_child = { any_heir_title = { title = event_target:changed_title } } }
			}
			hidden_tooltip = {
				remove_opinion = { who = FROM modifier = opinion_bad_succ_law_change }
				remove_opinion = { who = FROM modifier = opinion_good_succ_law_change }
				remove_opinion = { who = FROM modifier = opinion_succ_law_change }
			}
			FROM = {
				reverse_opinion = {
					who = PREV
					modifier = opinion_bad_succ_law_change
					months = 240
				}
			}
			event_target:changed_title = {
				current_heir = {
					reverse_opinion = {
						who = PREVPREV
						modifier = opinion_resentful
						multiplier = 2
						months = 120
					}
				}
			}
			any_realm_character = {
				limit = {
					any_pretender_title = { title = event_target:changed_title }
				}
				reverse_opinion = {
					who = PREV
					modifier = opinion_resentful
					months = 120
				}
			}
			any_independent_ruler = {
				limit = { NOT = { same_realm = ROOT } }
				any_realm_character = {
					limit = {
						any_pretender_title = { title = event_target:changed_title }
					}
					reverse_opinion = {
						who = PREVPREV
						modifier = opinion_resentful
						months = 120
					}
				}
			}
		}
		any_independent_ruler = {
			limit = { NOT = { same_realm = ROOT } }
			any_realm_character = {
				limit = {
					OR = {
						any_spouse = { character = ROOT }
						any_child = { character = ROOT }
					}
					NOT = { character = FROM }
					NOT = { any_child = { any_heir_title = { title = event_target:changed_title } } }
				}
				hidden_tooltip = {
					remove_opinion = { who = FROM modifier = opinion_bad_succ_law_change }
					remove_opinion = { who = FROM modifier = opinion_good_succ_law_change }
					remove_opinion = { who = FROM modifier = opinion_succ_law_change }
				}
				FROM = {
					reverse_opinion = {
						who = PREV
						modifier = opinion_bad_succ_law_change
						months = 240
					}
				}
				event_target:changed_title = {
					current_heir = {
						reverse_opinion = {
							who = PREVPREV
							modifier = opinion_resentful
							multiplier = 2
							months = 120
						}
					}
				}
				any_realm_character = {
					limit = {
						any_pretender_title = { title = event_target:changed_title }
					}
					reverse_opinion = {
						who = PREV
						modifier = opinion_resentful
						months = 120
					}
				}
				any_independent_ruler = {
					limit = { NOT = { same_realm = ROOT } }
					any_realm_character = {
						limit = {
							any_pretender_title = { title = event_target:changed_title }
						}
						reverse_opinion = {
							who = PREVPREV
							modifier = opinion_resentful
							months = 120
						}
					}
				}
			}
		}
	}
	option = {
		name = "EVTOPTB_Plus_605" #This is an outrage!
		ai_chance = {
			factor = 70
			modifier = {
				factor = 3
				trait = ambitious
			}
			modifier = {
				factor = 2
				trait = proud
			}
			modifier = {
				factor = 1.5
				trait = envious
			}
			modifier = {
				factor = 1.5
				trait = greedy
			}
			modifier = {
				factor = 1.5
				trait = wroth
			}
			modifier = {
				factor = 1.5
				trait = paranoid
			}
			modifier = {
				factor = 0.5
				trait = humble
			}
			modifier = {
				factor = 0.25
				trait = content
			}
		}
		FROM = {
			reverse_opinion = {
				who = ROOT
				modifier = succ_law_disinherit
				months = 240
			}
		}
		event_target:changed_title = {
			current_heir = {
				reverse_opinion = {
					who = ROOT
					modifier = opinion_resentful
					multiplier = 5
					months = 240
				}
			}
		}
		any_realm_character = {
			limit = {
				any_pretender_title = { title = event_target:changed_title }
			}
			reverse_opinion = {
				who = ROOT
				modifier = opinion_resentful
				multiplier = 2
				months = 240
			}
		}
		any_independent_ruler = {
			limit = { NOT = { same_realm = ROOT } }
			any_realm_character = {
				limit = {
					any_pretender_title = { title = event_target:changed_title }
				}
				reverse_opinion = {
					who = ROOT
					modifier = opinion_resentful
					multiplier = 2
					months = 240
				}
			}
		}
		any_realm_character = {
			limit = {
				OR = {
					any_spouse = { character = ROOT }
					any_child = { character = ROOT }
				}
				NOT = { character = FROM }
				NOT = { any_child = { any_heir_title = { title = event_target:changed_title } } }
			}
			hidden_tooltip = {
				remove_opinion = { who = FROM modifier = opinion_bad_succ_law_change }
				remove_opinion = { who = FROM modifier = opinion_good_succ_law_change }
				remove_opinion = { who = FROM modifier = opinion_succ_law_change }
			}
			FROM = {
				reverse_opinion = {
					who = PREV
					modifier = opinion_bad_succ_law_change
					multiplier = 2
					months = 240
				}
			}
			event_target:changed_title = {
				current_heir = {
					reverse_opinion = {
						who = PREVPREV
						modifier = opinion_resentful
						multiplier = 5
						months = 240
					}
				}
			}
			any_realm_character = {
				limit = {
					any_pretender_title = { title = event_target:changed_title }
				}
				reverse_opinion = {
					who = PREV
					modifier = opinion_resentful
					multiplier = 2
					months = 240
				}
			}
			any_independent_ruler = {
				limit = { NOT = { same_realm = ROOT } }
				any_realm_character = {
					limit = {
						any_pretender_title = { title = event_target:changed_title }
					}
					reverse_opinion = {
						who = PREVPREV
						modifier = opinion_resentful
						multiplier = 2
						months = 240
					}
				}
			}
		}
		any_independent_ruler = {
			limit = { NOT = { same_realm = ROOT } }
			any_realm_character = {
				limit = {
					OR = {
						any_spouse = { character = ROOT }
						any_child = { character = ROOT }
					}
					NOT = { character = FROM }
					NOT = { any_child = { any_heir_title = { title = event_target:changed_title } } }
				}
				hidden_tooltip = {
					remove_opinion = { who = FROM modifier = opinion_bad_succ_law_change }
					remove_opinion = { who = FROM modifier = opinion_good_succ_law_change }
					remove_opinion = { who = FROM modifier = opinion_succ_law_change }
				}
				FROM = {
					reverse_opinion = {
						who = PREV
						modifier = opinion_bad_succ_law_change
						multiplier = 2
						months = 240
					}
				}
				event_target:changed_title = {
					current_heir = {
						reverse_opinion = {
							who = PREVPREV
							modifier = opinion_resentful
							multiplier = 5
							months = 240
						}
					}
				}
				any_realm_character = {
					limit = {
						any_pretender_title = { title = event_target:changed_title }
					}
					reverse_opinion = {
						who = PREV
						modifier = opinion_resentful
						multiplier = 2
						months = 240
					}
				}
				any_independent_ruler = {
					limit = { NOT = { same_realm = ROOT } }
					any_realm_character = {
						limit = {
							any_pretender_title = { title = event_target:changed_title }
						}
						reverse_opinion = {
							who = PREVPREV
							modifier = opinion_resentful
							multiplier = 2
							months = 240
						}
					}
				}
			}
		}
	}
}

# A former heir is now pretender
character_event = {
	id = Plus.606
	picture = "GFX_evt_scandal"
	desc = "EVTDESC_Plus_606"
	
	is_triggered_only = yes
	
	option = {
		name = "EVTOPTA_Plus_605" #So be it
		trigger = {
			NOT = {
				trait = lunatic
				trait = possessed
			}
		}
		ai_chance = {
			factor = 50
			modifier = {
				factor = 3
				trait = content
			}
			modifier = {
				factor = 2
				trait = humble
			}
			modifier = {
				factor = 1.5
				trait = charitable
			}
			modifier = {
				factor = 1.5
				trait = patient
			}
			modifier = {
				factor = 1.5
				trait = trusting
			}
			modifier = {
				factor = 0.5
				trait = proud
			}
			modifier = {
				factor = 0.25
				trait = ambitious
			}
		}
		FROM = {
			reverse_opinion = {
				who = ROOT
				modifier = opinion_bad_succ_law_change
				months = 240
			}
		}
		event_target:changed_title = {
			current_heir = {
				reverse_opinion = {
					who = ROOT
					modifier = opinion_resentful
					multiplier = 2
					months = 120
				}
			}
		}
		any_realm_character = {
			limit = {
				OR = {
					any_spouse = { character = ROOT }
					any_child = { character = ROOT }
				}
				NOT = { character = FROM }
				NOT = { any_child = { any_heir_title = { title = event_target:changed_title } } }
			}
			hidden_tooltip = {
				remove_opinion = { who = FROM modifier = opinion_bad_succ_law_change }
				remove_opinion = { who = FROM modifier = opinion_good_succ_law_change }
				remove_opinion = { who = FROM modifier = opinion_succ_law_change }
			}
			FROM = {
				reverse_opinion = {
					who = PREV
					modifier = opinion_bad_succ_law_change
					months = 240
				}
			}
			event_target:changed_title = {
				current_heir = {
					reverse_opinion = {
						who = PREVPREV
						modifier = opinion_resentful
						multiplier = 2
						months = 120
					}
				}
			}
		}
		any_independent_ruler = {
			limit = { NOT = { same_realm = ROOT } }
			any_realm_character = {
				limit = {
					OR = {
						any_spouse = { character = ROOT }
						any_child = { character = ROOT }
					}
					NOT = { character = FROM }
					NOT = { any_child = { any_heir_title = { title = event_target:changed_title } } }
				}
				hidden_tooltip = {
					remove_opinion = { who = FROM modifier = opinion_bad_succ_law_change }
					remove_opinion = { who = FROM modifier = opinion_good_succ_law_change }
					remove_opinion = { who = FROM modifier = opinion_succ_law_change }
				}
				FROM = {
					reverse_opinion = {
						who = PREV
						modifier = opinion_bad_succ_law_change
						months = 240
					}
				}
				event_target:changed_title = {
					current_heir = {
						reverse_opinion = {
							who = PREVPREV
							modifier = opinion_resentful
							multiplier = 2
							months = 120
						}
					}
				}
			}
		}
	}
	option = {
		name = "EVTOPTB_Plus_605" #This is an outrage!
		ai_chance = {
			factor = 50
			modifier = {
				factor = 3
				trait = ambitious
			}
			modifier = {
				factor = 2
				trait = proud
			}
			modifier = {
				factor = 1.5
				trait = envious
			}
			modifier = {
				factor = 1.5
				trait = greedy
			}
			modifier = {
				factor = 1.5
				trait = wroth
			}
			modifier = {
				factor = 1.5
				trait = paranoid
			}
			modifier = {
				factor = 0.5
				trait = humble
			}
			modifier = {
				factor = 0.25
				trait = content
			}
		}
		FROM = {
			reverse_opinion = {
				who = ROOT
				modifier = opinion_bad_succ_law_change
				multiplier = 2
				months = 240
			}
		}
		event_target:changed_title = {
			current_heir = {
				reverse_opinion = {
					who = ROOT
					modifier = opinion_resentful
					multiplier = 5
					months = 240
				}
			}
		}
		any_realm_character = {
			limit = {
				OR = {
					any_spouse = { character = ROOT }
					any_child = { character = ROOT }
				}
				NOT = { character = FROM }
				NOT = { any_child = { any_heir_title = { title = event_target:changed_title } } }
			}
			hidden_tooltip = {
				remove_opinion = { who = FROM modifier = opinion_bad_succ_law_change }
				remove_opinion = { who = FROM modifier = opinion_good_succ_law_change }
				remove_opinion = { who = FROM modifier = opinion_succ_law_change }
			}
			FROM = {
				reverse_opinion = {
					who = PREV
					modifier = opinion_bad_succ_law_change
					multiplier = 2
					months = 240
				}
			}
			event_target:changed_title = {
				current_heir = {
					reverse_opinion = {
						who = PREVPREV
						modifier = opinion_resentful
						multiplier = 5
						months = 240
					}
				}
			}
		}
		any_independent_ruler = {
			limit = { NOT = { same_realm = ROOT } }
			any_realm_character = {
				limit = {
					OR = {
						any_spouse = { character = ROOT }
						any_child = { character = ROOT }
					}
					NOT = { character = FROM }
					NOT = { any_child = { any_heir_title = { title = event_target:changed_title } } }
				}
				hidden_tooltip = {
					remove_opinion = { who = FROM modifier = opinion_bad_succ_law_change }
					remove_opinion = { who = FROM modifier = opinion_good_succ_law_change }
					remove_opinion = { who = FROM modifier = opinion_succ_law_change }
				}
				FROM = {
					reverse_opinion = {
						who = PREV
						modifier = opinion_bad_succ_law_change
						multiplier = 2
						months = 240
					}
				}
				event_target:changed_title = {
					current_heir = {
						reverse_opinion = {
							who = PREVPREV
							modifier = opinion_resentful
							multiplier = 5
							months = 240
						}
					}
				}
			}
		}
	}
}

# A former pretender is now neither the heir nor a pretender
character_event = {
	id = Plus.607
	picture = "GFX_evt_scandal"
	desc = "EVTDESC_Plus_607"
	
	is_triggered_only = yes
	
	option = {
		name = "EVTOPTA_Plus_605" #So be it
		trigger = {
			NOT = {
				trait = lunatic
				trait = possessed
			}
		}
		ai_chance = {
			factor = 70
			modifier = {
				factor = 3
				trait = content
			}
			modifier = {
				factor = 2
				trait = humble
			}
			modifier = {
				factor = 1.5
				trait = charitable
			}
			modifier = {
				factor = 1.5
				trait = patient
			}
			modifier = {
				factor = 1.5
				trait = trusting
			}
			modifier = {
				factor = 0.5
				trait = proud
			}
			modifier = {
				factor = 0.25
				trait = ambitious
			}
		}
		FROM = {
			reverse_opinion = {
				who = ROOT
				modifier = opinion_bad_succ_law_change
				months = 240
			}
		}
		any_realm_character = {
			limit = {
				OR = {
					any_spouse = { character = ROOT }
					any_child = { character = ROOT }
				}
				NOT = { character = FROM }
				NOT = { any_child = { any_heir_title = { title = event_target:changed_title } } }
			}
			hidden_tooltip = {
				remove_opinion = { who = FROM modifier = opinion_bad_succ_law_change }
				remove_opinion = { who = FROM modifier = opinion_good_succ_law_change }
				remove_opinion = { who = FROM modifier = opinion_succ_law_change }
			}
			opinion = {
				who = FROM
				modifier = opinion_bad_succ_law_change
				months = 240
			}
		}
		any_independent_ruler = {
			limit = { NOT = { same_realm = ROOT } }
			any_realm_character = {
				limit = {
					OR = {
						any_spouse = { character = ROOT }
						any_child = { character = ROOT }
					}
					NOT = { character = FROM }
					NOT = { any_child = { any_heir_title = { title = event_target:changed_title } } }
				}
				hidden_tooltip = {
					remove_opinion = { who = FROM modifier = opinion_bad_succ_law_change }
					remove_opinion = { who = FROM modifier = opinion_good_succ_law_change }
					remove_opinion = { who = FROM modifier = opinion_succ_law_change }
				}
				opinion = {
					who = FROM
					modifier = opinion_bad_succ_law_change
					months = 240
				}
			}
		}
	}
	option = {
		name = "EVTOPTB_Plus_605" #This is an outrage!
		ai_chance = {
			factor = 30
			modifier = {
				factor = 3
				trait = ambitious
			}
			modifier = {
				factor = 2
				trait = proud
			}
			modifier = {
				factor = 1.5
				trait = envious
			}
			modifier = {
				factor = 1.5
				trait = greedy
			}
			modifier = {
				factor = 1.5
				trait = wroth
			}
			modifier = {
				factor = 1.5
				trait = paranoid
			}
			modifier = {
				factor = 0.5
				trait = humble
			}
			modifier = {
				factor = 0.25
				trait = content
			}
		}
		FROM = {
			reverse_opinion = {
				who = ROOT
				modifier = opinion_bad_succ_law_change
				multiplier = 2
				months = 240
			}
		}
		event_target:changed_title = {
			current_heir = {
				reverse_opinion = {
					who = ROOT
					modifier = opinion_resentful
					multiplier = 2
					months = 240
				}
			}
		}
		any_realm_character = {
			limit = {
				any_pretender_title = { title = event_target:changed_title }
			}
			reverse_opinion = {
				who = ROOT
				modifier = opinion_resentful
				months = 240
			}
		}
		any_independent_ruler = {
			limit = { NOT = { same_realm = ROOT } }
			any_realm_character = {
				limit = {
					any_pretender_title = { title = event_target:changed_title }
				}
				reverse_opinion = {
					who = ROOT
					modifier = opinion_resentful
					months = 240
				}
			}
		}
		any_realm_character = {
			limit = {
				OR = {
					any_spouse = { character = ROOT }
					any_child = { character = ROOT }
				}
				NOT = { character = FROM }
				NOT = { any_child = { any_heir_title = { title = event_target:changed_title } } }
			}
			hidden_tooltip = {
				remove_opinion = { who = FROM modifier = opinion_bad_succ_law_change }
				remove_opinion = { who = FROM modifier = opinion_good_succ_law_change }
				remove_opinion = { who = FROM modifier = opinion_succ_law_change }
			}
			FROM = {
				reverse_opinion = {
					who = PREV
					modifier = opinion_bad_succ_law_change
					multiplier = 2
					months = 240
				}
			}
			event_target:changed_title = {
				current_heir = {
					reverse_opinion = {
						who = PREVPREV
						modifier = opinion_resentful
						multiplier = 2
						months = 240
					}
				}
			}
			any_realm_character = {
				limit = {
					any_pretender_title = { title = event_target:changed_title }
				}
				reverse_opinion = {
					who = PREV
					modifier = opinion_resentful
					months = 240
				}
			}
			any_independent_ruler = {
				limit = { NOT = { same_realm = ROOT } }
				any_realm_character = {
					limit = {
						any_pretender_title = { title = event_target:changed_title }
					}
					reverse_opinion = {
						who = PREVPREV
						modifier = opinion_resentful
						months = 240
					}
				}
			}
		}
		any_independent_ruler = {
			limit = { NOT = { same_realm = ROOT } }
			any_realm_character = {
				limit = {
					OR = {
						any_spouse = { character = ROOT }
						any_child = { character = ROOT }
					}
					NOT = { character = FROM }
					NOT = { any_child = { any_heir_title = { title = event_target:changed_title } } }
				}
				hidden_tooltip = {
					remove_opinion = { who = FROM modifier = opinion_bad_succ_law_change }
					remove_opinion = { who = FROM modifier = opinion_good_succ_law_change }
					remove_opinion = { who = FROM modifier = opinion_succ_law_change }
				}
				FROM = {
					reverse_opinion = {
						who = PREV
						modifier = opinion_bad_succ_law_change
						multiplier = 2
						months = 240
					}
				}
				event_target:changed_title = {
					current_heir = {
						reverse_opinion = {
							who = PREVPREV
							modifier = opinion_resentful
							multiplier = 2
							months = 240
						}
					}
				}
				any_realm_character = {
					limit = {
						any_pretender_title = { title = event_target:changed_title }
					}
					reverse_opinion = {
						who = PREV
						modifier = opinion_resentful
						months = 240
					}
				}
				any_independent_ruler = {
					limit = { NOT = { same_realm = ROOT } }
					any_realm_character = {
						limit = {
							any_pretender_title = { title = event_target:changed_title }
						}
						reverse_opinion = {
							who = PREVPREV
							modifier = opinion_resentful
							months = 240
						}
					}
				}
			}
		}
	}
}

# The new heir is informed
character_event = {
	id = Plus.608
	picture = "GFX_evt_emissary"
	desc = "EVTDESC_Plus_608"
	
	is_triggered_only = yes
	
	option = {
		name = "EXCELLENT"
		opinion = {
			who = FROM
			modifier = opinion_good_succ_law_change
			multiplier = 2
			months = 240
		}
		any_realm_character = {
			limit = {
				OR = {
					any_spouse = { character = ROOT }
					any_child = { character = ROOT }
				}
				NOT = { character = FROM }
			}
			hidden_tooltip = {
				remove_opinion = { who = FROM modifier = opinion_bad_succ_law_change }
				remove_opinion = { who = FROM modifier = opinion_good_succ_law_change }
				remove_opinion = { who = FROM modifier = opinion_succ_law_change }
			}
			opinion = {
				who = FROM
				modifier = opinion_good_succ_law_change
				months = 240
			}
		}
		any_independent_ruler = {
			limit = { NOT = { same_realm = ROOT } }
			any_realm_character = {
				limit = {
					OR = {
						any_spouse = { character = ROOT }
						any_child = { character = ROOT }
					}
					NOT = { character = FROM }
				}
				hidden_tooltip = {
					remove_opinion = { who = FROM modifier = opinion_bad_succ_law_change }
					remove_opinion = { who = FROM modifier = opinion_good_succ_law_change }
					remove_opinion = { who = FROM modifier = opinion_succ_law_change }
				}
				opinion = {
					who = FROM
					modifier = opinion_good_succ_law_change
					months = 240
				}
			}
		}
	}
}

# The new pretenders are informed
character_event = {
	id = Plus.609
	picture = "GFX_evt_emissary"
	desc = "EVTDESC_Plus_609"
	
	is_triggered_only = yes
	
	option = {
		name = "EXCELLENT"
		opinion = {
			who = FROM
			modifier = opinion_good_succ_law_change
			months = 240
		}
		any_realm_character = {
			limit = {
				OR = {
					any_spouse = { character = ROOT }
					any_child = { character = ROOT }
				}
				NOT = { character = FROM }
			}
			hidden_tooltip = {
				remove_opinion = { who = FROM modifier = opinion_bad_succ_law_change }
				remove_opinion = { who = FROM modifier = opinion_good_succ_law_change }
				remove_opinion = { who = FROM modifier = opinion_succ_law_change }
			}
			opinion = {
				who = FROM
				modifier = opinion_good_succ_law_change
				months = 240
			}
		}
		any_independent_ruler = {
			limit = { NOT = { same_realm = ROOT } }
			any_realm_character = {
				limit = {
					OR = {
						any_spouse = { character = ROOT }
						any_child = { character = ROOT }
					}
					NOT = { character = FROM }
				}
				hidden_tooltip = {
					remove_opinion = { who = FROM modifier = opinion_bad_succ_law_change }
					remove_opinion = { who = FROM modifier = opinion_good_succ_law_change }
					remove_opinion = { who = FROM modifier = opinion_succ_law_change }
				}
				opinion = {
					who = FROM
					modifier = opinion_good_succ_law_change
					months = 240
				}
			}
		}
	}
}

######################################
# ASKING VASSALS TO SUPPORT YOUR HEIR
# Written by Rylock
######################################

# Vassal is asked to support the current heir
character_event = {
	id = Plus.1600
	
	hide_window = yes
	is_triggered_only = yes
	
	immediate = {
		FROMFROM = { current_heir = { save_event_target_as = liege_heir } }
		opinion = { who = FROMFROM modifier = asked_to_support_heir years = 20 }
		random_list = {
			50 = {
				modifier = {
					factor = 1.5
					FROMFROM = { primary_title = { has_law = crown_authority_4 } }
				}
				modifier = {
					factor = 1.5
					is_friend = FROMFROM
				}
				modifier = {
					factor = 1.2
					opinion = { who = FROMFROM value = 90 }
				}
				modifier = {
					factor = 1.2
					FROMFROM = { diplomacy = 16 }
				}
				modifier = {
					factor = 1.2
					FROMFROM = { diplomacy = 20 }
				}
				modifier = {
					factor = 1.5
					is_friend = event_target:liege_heir
				}
				modifier = {
					factor = 1.5
					is_close_relative = event_target:liege_heir
				}
				modifier = {
					factor = 1.2
					event_target:liege_heir = { is_ruler = yes }
				}
				modifier = {
					factor = 1.1
					opinion = { who = event_target:liege_heir value = 20 }
				}
				modifier = {
					factor = 1.1
					opinion = { who = event_target:liege_heir value = 40 }
				}
				modifier = {
					factor = 1.1
					opinion = { who = event_target:liege_heir value = 60 }
				}
				modifier = {
					factor = 1.1
					opinion = { who = event_target:liege_heir value = 80 }
				}
				modifier = {
					factor = 1.2
					trait = trusting
				}
				modifier = {
					factor = 1.5
					trait = content
				}
				modifier = {
					factor = 1.2
					trait = humble
				}
				modifier = {
					factor = 1.2
					trait = kind
				}
				FROMFROM = { letter_event = { id = Plus.1601 days = 15 } } # Agree
			}
			50 = {
				modifier = {
					factor = 0.5
					FROMFROM = { primary_title = { has_law = crown_authority_4 } }
				}
				modifier = {
					factor = 1.2
					FROMFROM = { NOT = { diplomacy = 8 } }
				}
				modifier = {
					factor = 1.2
					FROMFROM = { NOT = { diplomacy = 4 } }
				}
				modifier = {
					factor = 1.2
					NOT = { opinion = { who = FROMFROM value = 70 } }
				}
				modifier = {
					factor = 1.2
					NOT = { opinion = { who = event_target:liege_heir value = 0 } }
				}
				modifier = {
					factor = 1.5
					NOT = { opinion = { who = event_target:liege_heir value = -25 } }
				}
				modifier = {
					factor = 1.5
					NOT = { opinion = { who = event_target:liege_heir value = -50 } }
				}
				modifier = {
					factor = 1.5
					event_target:liege_heir = { is_female = yes }
					FROMFROM = {
						primary_title = {
							OR = {
								has_law = agnatic_succession
								has_law = cognatic_succession
							}
						}
					}
				}
				modifier = {
					factor = 1.5
					event_target:liege_heir = { is_female = no }
					FROMFROM = {
						primary_title = {
							OR = {
								has_law = enatic_succession
								has_law = enatic_cognatic_succession
							}
						}
					}
				}
				modifier = {
					factor = 1.5
					event_target:liege_heir = {
						OR = {
							trait = imbecile
							trait = lunatic
							trait = possessed
							trait = incapable
						}
					}
				}
				modifier = {
					factor = 1.5
					NOT = {
						religion = event_target:liege_heir
						culture = event_target:liege_heir
					}
				}
				modifier = {
					factor = 1.2
					trait = paranoid
				}
				modifier = {
					factor = 1.5
					trait = ambitious
				}
				modifier = {
					factor = 1.2
					trait = proud
				}
				modifier = {
					factor = 1.2
					trait = envious
				}
				modifier = {
					factor = 1.2
					trait = cruel
				}
				FROMFROM = { letter_event = { id = Plus.1602 days = 15 } } # Refuse
			}
		}
	}
}

# Vassal agrees to support heir
letter_event = {
	id = Plus.1601
	desc = EVTDESC_Plus_1601
	border = GFX_event_letter_frame_diplomacy
	
	is_triggered_only = yes
	
	trigger = {
		current_heir = { character = event_target:liege_heir }
		FROM = { vassal_of = ROOT }
	}
	
	option = {
		name = EXCELLENT
		FROM = {
			opinion = { who = event_target:liege_heir modifier = sworn_to_support_heir years = 20 }
			reverse_opinion = { who = ROOT modifier = opinion_pleased years = 5 }
		}
	}
}

# Vassal refuses to support heir
letter_event = {
	id = Plus.1602
	desc = EVTDESC_Plus_1602
	border = GFX_event_letter_frame_diplomacy
	
	is_triggered_only = yes
	
	trigger = {
		current_heir = { character = event_target:liege_heir }
		FROM = { vassal_of = ROOT }
	}
	
	option = {
		name = CURSES
		opinion = { who = FROM modifier = refused_to_support_heir years = 10 }
		if = {
			limit = { FROM = { tier = COUNT } }
			prestige = 50
		}
		if = {
			limit = { FROM = { tier = DUKE } }
			prestige = 125
		}
		if = {
			limit = { FROM = { tier = KING } }
			prestige = 250
		}
	}
}

# Maintenance event: remove support for heir if he is neither heir nor liege
character_event = {
	id = Plus.1603
	
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		any_opinion_modifier_target = {
			reverse_has_opinion_modifier = {
				who = ROOT
				modifier = sworn_to_support_heir
			}
			NOT = {
				is_liege_or_above = ROOT
				any_heir_title = {
					is_primary_holder_title = yes
					holder_scope = { is_vassal_or_below = ROOT }
				}
			}
		}
	}
	
	weight_multiplier = {
		days = 1
	}
	
	immediate = {
		any_opinion_modifier_target = {
			limit = {
				reverse_has_opinion_modifier = {
					who = ROOT
					modifier = sworn_to_support_heir
				}
				NOT = {
					is_liege_or_above = ROOT
					any_heir_title = {
						is_primary_holder_title = yes
						holder_scope = { is_vassal_or_below = ROOT }
					}
				}
			}
			reverse_remove_opinion = {
				who = ROOT
				modifier = sworn_to_support_heir
			}
		}
	}
}

