namespace = Plus

#reserved: Plus.300 to Plus.399

#######################################
# CK2Plus Plot Events
#######################################

character_event = { # AI plot check
	id = Plus.300
	is_triggered_only = yes
	hide_window = yes
	
	ai = yes
	prisoner = no
	capable_only = yes
	min_age = 16

	trigger = {
		ai = yes
		NOT = { has_character_flag = plot_check }
		OR = {
			has_plot = plot_seize_trade_post
			has_plot = plot_discredit_councillor
			has_plot = plot_embezzle_from_liege
			has_plot = plot_kidnapping
			has_plot = plot_fabricate_treason
			has_plot = plot_fabricate_treason_liege
			has_plot = plot_fabricate_heresy
			has_plot = plot_gain_liege_title
			has_plot = plot_gain_fellow_vassal_title
			has_plot = plot_weaken_fellow_vassal
			has_plot = plot_kidnap_liege
			has_plot = plot_kill_character
			has_plot = plot_take_revenge
			has_plot = plot_kill_spouse
			has_plot = plot_seduce
		}
	}

	weight_multiplier = {
		days = 1
	}

	immediate = {
		set_character_flag = plot_check
		plot_target_char = {
			any_courtier = {
				limit = { NOT = { is_plot_target_of = ROOT } }
				remove_opinion = {
					who = ROOT
					modifier = opinion_plot_help
				}
				opinion = {
					who = ROOT
					modifier = opinion_plot_help
					years = 5
				}
			}
			any_vassal = {
				limit = { NOT = { is_plot_target_of = ROOT } }
				remove_opinion = {
					who = ROOT
					modifier = opinion_plot_help
				}
				opinion = {
					who = ROOT
					modifier = opinion_plot_help
					years = 5
				}
			}
			liege = {
				any_courtier = {
					limit = { NOT = { is_plot_target_of = ROOT } }
					remove_opinion = {
						who = ROOT
						modifier = opinion_plot_help
					}
					opinion = {
						who = ROOT
						modifier = opinion_plot_help
						years = 5
					}
				}
				any_vassal = {
					limit = { NOT = { is_plot_target_of = ROOT } }
					remove_opinion = {
						who = ROOT
						modifier = opinion_plot_help
					}
					opinion = {
						who = ROOT
						modifier = opinion_plot_help
						years = 5
					}
				}
			}
		}
	}
}

character_event = { # Cancel AI plot if too few helpers and has taken too long
	id = Plus.301
	hide_window = yes

	ai = yes
	prisoner = no
	capable_only = yes
	min_age = 16
	
	trigger = {
		ai = yes
		OR = {
			has_plot = plot_seize_trade_post
			has_plot = plot_discredit_councillor
			has_plot = plot_embezzle_from_liege
			has_plot = plot_kidnapping
			has_plot = plot_fabricate_treason
			has_plot = plot_fabricate_treason_liege
			has_plot = plot_fabricate_heresy
			has_plot = plot_gain_liege_title
			has_plot = plot_gain_fellow_vassal_title
			has_plot = plot_weaken_fellow_vassal
			has_plot = plot_kidnap_liege
			has_plot = plot_kill_character
			has_plot = plot_take_revenge
			has_plot = plot_kill_spouse
			has_plot = plot_seduce
		}
		had_character_flag = {
			flag = plot_check
			days = 1825
		}
		OR = {
			NOT = { num_of_plot_backers = 1 }
			had_character_flag = {
				flag = plot_check
				days = 2750
			}
		}
		OR = {
			NOT = { num_of_plot_backers = 2 }
			had_character_flag = {
				flag = plot_check
				days = 3650
			}
		}
	}

	mean_time_to_happen = {
		months = 1
	}

	immediate = {
		set_character_flag = abort_plot
	}
}

character_event = { # Allow AI plotting
	id = Plus.302
	is_triggered_only = yes
	hide_window = yes
	
	min_age = 16
	prisoner = no
	capable_only = yes
	ai = yes

	trigger = {
		ai = yes
		NOT = { has_character_flag = allow_plotting }
		NOT = {
			has_plot = plot_seize_trade_post
			has_plot = plot_discredit_councillor
			has_plot = plot_embezzle_from_liege
			has_plot = plot_kidnapping
			has_plot = plot_fabricate_treason
			has_plot = plot_fabricate_treason_liege
			has_plot = plot_fabricate_heresy
			has_plot = plot_gain_liege_title
			has_plot = plot_gain_fellow_vassal_title
			has_plot = plot_weaken_fellow_vassal
			has_plot = plot_kidnap_liege
			has_plot = plot_kill_character
			has_plot = plot_take_revenge
			has_plot = plot_kill_spouse
			has_plot = plot_seduce
		}
	}

	weight_multiplier = {
		days = 1
		modifier = {
			factor = 0.5
			is_ruler = no
			is_councillor = no
		}
		modifier = {
			factor = 2
			is_ruler = yes
			tier = COUNT
		}
		modifier = {
			factor = 5
			is_ruler = yes
			tier = DUKE
		}
		modifier = {
			factor = 10
			is_ruler = yes
			higher_tier_than = DUKE
		}
		modifier = {
			factor = 3
			has_job_title = job_spymaster
		}
		modifier = {
			factor = 0.5
			NOT = { intrigue = 5 }
		}
		modifier = {
			factor = 0.75
			NOT = { intrigue = 10 }
		}
		modifier = {
			factor = 1.25
			trait = amateurish_plotter
		}
		modifier = {
			factor = 1.5
			trait = flamboyant_schemer
		}
		modifier = {
			factor = 2
			trait = intricate_webweaver
		}
		modifier = {
			factor = 3
			trait = elusive_shadow
		}
		modifier = {
			factor = 2
			intrigue = 10
		}
		modifier = {
			factor = 2
			intrigue = 15
		}
		modifier = {
			factor = 2
			intrigue = 20
		}
		modifier = {
			factor = 0.5
			OR = {
				trait = content
				trait = honest
				trait = kind
				trait = just
			}
		}
		modifier = {
			factor = 10
			OR = {
				trait = lunatic
				trait = possessed
			}
		}
	}

	immediate = {
		set_character_flag = allow_plotting
	}
}

character_event = { # Shatter Empire if too small
	id = Plus.303 #formerly 1000182859
	desc = "EVTDESC_Plus_303"
	picture = "GFX_evt_council"
	
	is_triggered_only = yes
	
	only_rulers = yes
	
	trigger = {
		war = no
		is_ruler = yes
		tier = emperor
		any_demesne_title = {
			tier = emperor
			OR = {
				AND = {
					ROOT = { NOT = { realm_size = 100 } }
					NOT = {
						title = e_rebels
						title = e_pirates
						title = e_timurids
						title = e_mexikha
						title = e_byzantium
						title = e_roman_empire
						title = e_latin_empire
						AND = {
							title = e_golden_horde
							holder_scope = { religion = tengri_pagan }
						}
						AND = {
							title = e_il-khanate
							holder_scope = { religion = tengri_pagan }
						}
					}
				}
				AND = {
					title = e_latin_empire
					NOT = { c_byzantion = { holder_scope = { same_realm = ROOT } } }
				}
				AND = {
					title = e_byzantium
					NOT = { c_byzantion = { holder_scope = { same_realm = ROOT } } }
				}
			}
		}
	}

	immediate = {
		#attempt to form a kingdom so we don't lose all our dukes
		character_event = { id = Plus.304 }
	}

	weight_multiplier = {
		days = 1
	}

	option = {
		name = "EVTOPTA_Plus_303"
		any_demesne_title = {
			limit = {
				tier = emperor
				OR = {
					AND = {
						ROOT = { NOT = { realm_size = 100 } }
						NOT = {
							title = e_rebels
							title = e_pirates
							title = e_timurids
							title = e_mexikha
							title = e_byzantium
							title = e_roman_empire
							title = e_latin_empire
							AND = {
								title = e_golden_horde
								holder_scope = { religion = tengri_pagan }
							}
							AND = {
								title = e_il-khanate
								holder_scope = { religion = tengri_pagan }
							}
						}
					}
					AND = {
						title = e_latin_empire
						NOT = { c_byzantion = { holder_scope = { same_realm = ROOT } } }
					}
					AND = {
						title = e_byzantium
						NOT = { c_byzantion = { holder_scope = { same_realm = ROOT } } }
					}
				}
			}
			destroy_landed_title = yes
			prestige = -1000
		}
	}
}

character_event = { # Fix Laws if CA differs from max law level for the CA
	id = Plus.304 #formerly 1000182857
	desc = "EVTDESC_Plus_304"
	picture = "GFX_evt_council"
	is_triggered_only = yes
	only_rulers = yes

	trigger = {
		war = no
		is_ruler = yes
		higher_tier_than = BARON
		primary_title = {
			OR = {
				#no crown law or autonomous vassals: allows 0
				AND = {
					NOT = {
						crownlaw_title = { has_law = centralization_1 }
						crownlaw_title = { has_law = centralization_2 }
						crownlaw_title = { has_law = centralization_3 }
						crownlaw_title = { has_law = centralization_4 }
					}
					OR = {
						has_law = iqta_tax_1
						has_law = iqta_tax_2
						has_law = feudal_tax_1
						has_law = feudal_tax_2
						has_law = city_tax_1
						has_law = city_tax_2
						has_law = temple_tax_1
						has_law = temple_tax_2
						has_law = tax_privileges_0
						has_law = levy_privileges_0
					}
				}
				#low & medium crown authority: allows 0-1
				AND = {
					NOT = {
						crownlaw_title = { has_law = centralization_3 }
						crownlaw_title = { has_law = centralization_4 }
					}
					OR = {
						has_law = iqta_tax_2
						has_law = feudal_tax_2
						has_law = city_tax_2
						has_law = temple_tax_2
					}
				}
			}
		}
	}

	weight_multiplier = {
		days = 1
	}

	option = {
		name = "OK"
		primary_title = {
			if = {
				limit = {
					has_law = tax_privileges_0
					NOT = {
						crownlaw_title = { has_law = centralization_1 }
						crownlaw_title = { has_law = centralization_2 }
						crownlaw_title = { has_law = centralization_3 }
						crownlaw_title = { has_law = centralization_4 }
					}
				}
				add_law = tax_privileges_1
			}
			if = {
				limit = {
					has_law = levy_privileges_0
					NOT = {
						crownlaw_title = { has_law = centralization_1 }
						crownlaw_title = { has_law = centralization_2 }
						crownlaw_title = { has_law = centralization_3 }
						crownlaw_title = { has_law = centralization_4 }
					}
				}
				add_law = levy_privileges_1
			}
			if = {
				limit = {
					has_law = iqta_tax_1
					NOT = {
						crownlaw_title = { has_law = centralization_1 }
						crownlaw_title = { has_law = centralization_2 }
						crownlaw_title = { has_law = centralization_3 }
						crownlaw_title = { has_law = centralization_4 }
					}
				}
				add_law = iqta_tax_0
			}
			if = {
				limit = {
					has_law = iqta_tax_2
					NOT = {
						crownlaw_title = { has_law = centralization_3 }
						crownlaw_title = { has_law = centralization_4 }
					}
				}
				if = {
					limit = {
						NOT = {
							crownlaw_title = { has_law = centralization_1 }
							crownlaw_title = { has_law = centralization_2 }
							crownlaw_title = { has_law = centralization_3 }
							crownlaw_title = { has_law = centralization_4 }
						}
					}
					add_law = iqta_tax_0
				}
				if = {
					limit = {
						OR = {
							crownlaw_title = { has_law = centralization_1 }
							crownlaw_title = { has_law = centralization_2 }
						}
					}
					add_law = iqta_tax_1
				}
			}
			if = {
				limit = {
					has_law = feudal_tax_1
					NOT = {
						crownlaw_title = { has_law = centralization_1 }
						crownlaw_title = { has_law = centralization_2 }
						crownlaw_title = { has_law = centralization_3 }
						crownlaw_title = { has_law = centralization_4 }
					}
				}
				add_law = feudal_tax_0
			}
			if = {
				limit = {
					has_law = feudal_tax_2
					NOT = {
						crownlaw_title = { has_law = centralization_3 }
						crownlaw_title = { has_law = centralization_4 }
					}
				}
				if = {
					limit = {
						NOT = {
							crownlaw_title = { has_law = centralization_1 }
							crownlaw_title = { has_law = centralization_2 }
							crownlaw_title = { has_law = centralization_3 }
							crownlaw_title = { has_law = centralization_4 }
						}
					}
					add_law = feudal_tax_0
				}
				if = {
					limit = {
						OR = {
							crownlaw_title = { has_law = centralization_1 }
							crownlaw_title = { has_law = centralization_2 }
						}
					}
					add_law = feudal_tax_1
				}
			}
			if = {
				limit = {
					has_law = city_tax_1
					NOT = {
						crownlaw_title = { has_law = centralization_1 }
						crownlaw_title = { has_law = centralization_2 }
						crownlaw_title = { has_law = centralization_3 }
						crownlaw_title = { has_law = centralization_4 }
					}
				}
				add_law = city_tax_0
			}
			if = {
				limit = {
					has_law = city_tax_2
					NOT = {
						crownlaw_title = { has_law = centralization_3 }
						crownlaw_title = { has_law = centralization_4 }
					}
				}
				if = {
					limit = {
						NOT = {
							crownlaw_title = { has_law = centralization_1 }
							crownlaw_title = { has_law = centralization_2 }
							crownlaw_title = { has_law = centralization_3 }
							crownlaw_title = { has_law = centralization_4 }
						}
					}
					add_law = city_tax_0
				}
				if = {
					limit = {
						OR = {
							crownlaw_title = { has_law = centralization_1 }
							crownlaw_title = { has_law = centralization_2 }
						}
					}
					add_law = city_tax_1
				}
			}
			if = {
				limit = {
					has_law = temple_tax_1
					NOT = {
						crownlaw_title = { has_law = centralization_1 }
						crownlaw_title = { has_law = centralization_2 }
						crownlaw_title = { has_law = centralization_3 }
						crownlaw_title = { has_law = centralization_4 }
					}
				}
				add_law = temple_tax_0
			}
			if = {
				limit = {
					has_law = temple_tax_2
					NOT = {
						crownlaw_title = { has_law = centralization_3 }
						crownlaw_title = { has_law = centralization_4 }
					}
				}
				if = {
					limit = {
						NOT = {
							crownlaw_title = { has_law = centralization_1 }
							crownlaw_title = { has_law = centralization_2 }
							crownlaw_title = { has_law = centralization_3 }
							crownlaw_title = { has_law = centralization_4 }
						}
					}
					add_law = temple_tax_0
				}
				if = {
					limit = {
						OR = {
							crownlaw_title = { has_law = centralization_1 }
							crownlaw_title = { has_law = centralization_2 }
						}
					}
					add_law = temple_tax_1
				}
			}
		}
	}
}

character_event = { # Remove Crowned by Pope if not the Kaiser
	id = Plus.305
	is_triggered_only = yes
	hide_window = yes

	trigger = {
		trait = crowned_by_pope
		NOT = { has_landed_title = e_hre }
	}

	weight_multiplier = {
		days = 1
	}

	immediate = {
		remove_trait = crowned_by_pope
	}
}

character_event = { # Inherit Half of Dishonourable and Tyrant
	id = Plus.306 #formerly 1000182861

	hide_window = yes
	is_triggered_only = yes

	immediate = {
		hidden_tooltip = {
			if = {
				limit = {
					is_ruler = yes
				}
				if = {
					limit = { has_character_flag = khan_threatens_player }
					current_heir = {
						set_character_flag = khan_threatens_player
					}
					clr_character_flag = khan_threatens_player
				}
			}
			#fix wrong religion heirs
			if = {
				limit = {
					is_ruler = yes
					is_feudal = no
					ai = yes
					current_heir = {
						NOT = { religion_group = ROOT }
					}
				}
				current_heir = {
					religion = ROOT
				}
			}
			#tyrant
			if = {
				limit = {
					ai = no
					OR = {
						trait = tyrant3
						trait = tyrant4
						trait = tyrant5
						trait = tyrant6
						trait = tyrant7
						trait = tyrant8
						trait = tyrant9
						trait = tyrant10
						trait = tyrant11
						trait = tyrant12
						trait = tyrant13
						trait = tyrant14
						trait = tyrant15
						trait = tyrant16
						trait = tyrant17
						trait = tyrant18
						trait = tyrant19
						trait = tyrant20
					}
				}
				if = {
					limit = {
						trait = tyrant3
					}
					hidden_tooltip = { change_variable = { which = "tyrant" value = 1 } }
				}
				if = {
					limit = {
						trait = tyrant4
					}
					hidden_tooltip = { change_variable = { which = "tyrant" value = 2 } }
				}
				if = {
					limit = {
						trait = tyrant5
					}
					hidden_tooltip = { change_variable = { which = "tyrant" value = 3 } }
				}
				if = {
					limit = {
						trait = tyrant6
					}
					hidden_tooltip = { change_variable = { which = "tyrant" value = 4 } }
				}
				if = {
					limit = {
						trait = tyrant7
					}
					hidden_tooltip = { change_variable = { which = "tyrant" value = 5 } }
				}
				if = {
					limit = {
						trait = tyrant8
					}
					hidden_tooltip = { change_variable = { which = "tyrant" value = 6 } }
				}
				if = {
					limit = {
						trait = tyrant9
					}
					hidden_tooltip = { change_variable = { which = "tyrant" value = 7 } }
				}
				if = {
					limit = {
						trait = tyrant10
					}
					hidden_tooltip = { change_variable = { which = "tyrant" value = 8 } }
				}
				if = {
					limit = {
						trait = tyrant11
					}
					hidden_tooltip = { change_variable = { which = "tyrant" value = 9 } }
				}
				if = {
					limit = {
						trait = tyrant12
					}
					hidden_tooltip = { change_variable = { which = "tyrant" value = 10 } }
				}
				if = {
					limit = {
						trait = tyrant13
					}
					hidden_tooltip = { change_variable = { which = "tyrant" value = 11 } }
				}
				if = {
					limit = {
						trait = tyrant14
					}
					hidden_tooltip = { change_variable = { which = "tyrant" value = 12 } }
				}
				if = {
					limit = {
						trait = tyrant15
					}
					hidden_tooltip = { change_variable = { which = "tyrant" value = 13 } }
				}
				if = {
					limit = {
						trait = tyrant16
					}
					hidden_tooltip = { change_variable = { which = "tyrant" value = 14 } }
				}
				if = {
					limit = {
						trait = tyrant17
					}
					hidden_tooltip = { change_variable = { which = "tyrant" value = 15 } }
				}
				if = {
					limit = {
						trait = tyrant18
					}
					hidden_tooltip = { change_variable = { which = "tyrant" value = 16 } }
				}
				if = {
					limit = {
						trait = tyrant19
					}
					hidden_tooltip = { change_variable = { which = "tyrant" value = 17 } }
				}
				if = {
					limit = {
						trait = tyrant20
					}
					hidden_tooltip = { change_variable = { which = "tyrant" value = 18 } }
				}
				if = {
					limit = {
						current_heir = { trait = tyrant1 }
					}
					hidden_tooltip = { change_variable = { which = "tyrant" value = 1 } }
				}
				if = {
					limit = {
						current_heir = { trait = tyrant2 }
					}
					hidden_tooltip = { change_variable = { which = "tyrant" value = 2 } }
				}
				if = {
					limit = {
						current_heir = { trait = tyrant3 }
					}
					hidden_tooltip = { change_variable = { which = "tyrant" value = 3 } }
				}
				if = {
					limit = {
						current_heir = { trait = tyrant4 }
					}
					hidden_tooltip = { change_variable = { which = "tyrant" value = 4 } }
				}
				if = {
					limit = {
						current_heir = { trait = tyrant5 }
					}
					hidden_tooltip = { change_variable = { which = "tyrant" value = 5 } }
				}
				if = {
					limit = {
						current_heir = { trait = tyrant6 }
					}
					hidden_tooltip = { change_variable = { which = "tyrant" value = 6 } }
				}
				if = {
					limit = {
						current_heir = { trait = tyrant7 }
					}
					hidden_tooltip = { change_variable = { which = "tyrant" value = 7 } }
				}
				if = {
					limit = {
						current_heir = { trait = tyrant8 }
					}
					hidden_tooltip = { change_variable = { which = "tyrant" value = 8 } }
				}
				if = {
					limit = {
						current_heir = { trait = tyrant9 }
					}
					hidden_tooltip = { change_variable = { which = "tyrant" value = 9 } }
				}
				if = {
					limit = {
						current_heir = { trait = tyrant10 }
					}
					hidden_tooltip = { change_variable = { which = "tyrant" value = 10 } }
				}
				if = {
					limit = {
						current_heir = { trait = tyrant11 }
					}
					hidden_tooltip = { change_variable = { which = "tyrant" value = 11 } }
				}
				if = {
					limit = {
						current_heir = { trait = tyrant12 }
					}
					hidden_tooltip = { change_variable = { which = "tyrant" value = 12 } }
				}
				if = {
					limit = {
						current_heir = { trait = tyrant13 }
					}
					hidden_tooltip = { change_variable = { which = "tyrant" value = 13 } }
				}
				if = {
					limit = {
						current_heir = { trait = tyrant14 }
					}
					hidden_tooltip = { change_variable = { which = "tyrant" value = 14 } }
				}
				if = {
					limit = {
						current_heir = { trait = tyrant15 }
					}
					hidden_tooltip = { change_variable = { which = "tyrant" value = 15 } }
				}
				if = {
					limit = {
						current_heir = { trait = tyrant16 }
					}
					hidden_tooltip = { change_variable = { which = "tyrant" value = 16 } }
				}
				if = {
					limit = {
						current_heir = { trait = tyrant17 }
					}
					hidden_tooltip = { change_variable = { which = "tyrant" value = 17 } }
				}
				if = {
					limit = {
						current_heir = { trait = tyrant18 }
					}
					hidden_tooltip = { change_variable = { which = "tyrant" value = 18 } }
				}
				if = {
					limit = {
						current_heir = { trait = tyrant19 }
					}
					hidden_tooltip = { change_variable = { which = "tyrant" value = 19 } }
				}
				if = {
					limit = {
						current_heir = { trait = tyrant20 }
					}
					hidden_tooltip = { change_variable = { which = "tyrant" value = 20 } }
				}
				remove_trait = tyrant1
				remove_trait = tyrant2
				remove_trait = tyrant3
				remove_trait = tyrant4
				remove_trait = tyrant5
				remove_trait = tyrant6
				remove_trait = tyrant7
				remove_trait = tyrant8
				remove_trait = tyrant9
				remove_trait = tyrant10
				remove_trait = tyrant11
				remove_trait = tyrant12
				remove_trait = tyrant13
				remove_trait = tyrant14
				remove_trait = tyrant15
				remove_trait = tyrant16
				remove_trait = tyrant17
				remove_trait = tyrant18
				remove_trait = tyrant19
				remove_trait = tyrant20
				current_heir = {
					remove_trait = tyrant1
					remove_trait = tyrant2
					remove_trait = tyrant3
					remove_trait = tyrant4
					remove_trait = tyrant5
					remove_trait = tyrant6
					remove_trait = tyrant7
					remove_trait = tyrant8
					remove_trait = tyrant9
					remove_trait = tyrant10
					remove_trait = tyrant11
					remove_trait = tyrant12
					remove_trait = tyrant13
					remove_trait = tyrant14
					remove_trait = tyrant15
					remove_trait = tyrant16
					remove_trait = tyrant17
					remove_trait = tyrant18
					remove_trait = tyrant19
					remove_trait = tyrant20
				}
				if = {
					limit = {
						check_variable = { which = "tyrant" value = 0.9 }
						NOT = { check_variable = { which = "tyrant" value = 1.9 } }
					}
					current_heir = {
						add_trait = tyrant1
					}
				}
				if = {
					limit = {
						check_variable = { which = "tyrant" value = 1.9 }
						NOT = { check_variable = { which = "tyrant" value = 2.9 } }
					}
					current_heir = {
						add_trait = tyrant2
					}
				}
				if = {
					limit = {
						check_variable = { which = "tyrant" value = 2.9 }
						NOT = { check_variable = { which = "tyrant" value = 3.9 } }
					}
					current_heir = {
						add_trait = tyrant3
					}
				}
				if = {
					limit = {
						check_variable = { which = "tyrant" value = 3.9 }
						NOT = { check_variable = { which = "tyrant" value = 4.9 } }
					}
					current_heir = {
						add_trait = tyrant4
					}
				}
				if = {
					limit = {
						check_variable = { which = "tyrant" value = 4.9 }
						NOT = { check_variable = { which = "tyrant" value = 5.9 } }
					}
					current_heir = {
						add_trait = tyrant5
					}
				}
				if = {
					limit = {
						check_variable = { which = "tyrant" value = 5.9 }
						NOT = { check_variable = { which = "tyrant" value = 6.9 } }
					}
					current_heir = {
						add_trait = tyrant6
					}
				}
				if = {
					limit = {
						check_variable = { which = "tyrant" value = 6.9 }
						NOT = { check_variable = { which = "tyrant" value = 7.9 } }
					}
					current_heir = {
						add_trait = tyrant7
					}
				}
				if = {
					limit = {
						check_variable = { which = "tyrant" value = 7.9 }
						NOT = { check_variable = { which = "tyrant" value = 8.9 } }
					}
					current_heir = {
						add_trait = tyrant8
					}
				}
				if = {
					limit = {
						check_variable = { which = "tyrant" value = 8.9 }
						NOT = { check_variable = { which = "tyrant" value = 9.9 } }
					}
					current_heir = {
						add_trait = tyrant9
					}
				}
				if = {
					limit = {
						check_variable = { which = "tyrant" value = 9.9 }
						NOT = { check_variable = { which = "tyrant" value = 10.9 } }
					}
					current_heir = {
						add_trait = tyrant10
					}
				}
				if = {
					limit = {
						check_variable = { which = "tyrant" value = 10.9 }
						NOT = { check_variable = { which = "tyrant" value = 11.9 } }
					}
					current_heir = {
						add_trait = tyrant11
					}
				}
				if = {
					limit = {
						check_variable = { which = "tyrant" value = 11.9 }
						NOT = { check_variable = { which = "tyrant" value = 12.9 } }
					}
					current_heir = {
						add_trait = tyrant12
					}
				}
				if = {
					limit = {
						check_variable = { which = "tyrant" value = 12.9 }
						NOT = { check_variable = { which = "tyrant" value = 13.9 } }
					}
					current_heir = {
						add_trait = tyrant13
					}
				}
				if = {
					limit = {
						check_variable = { which = "tyrant" value = 13.9 }
						NOT = { check_variable = { which = "tyrant" value = 14.9 } }
					}
					current_heir = {
						add_trait = tyrant14
					}
				}
				if = {
					limit = {
						check_variable = { which = "tyrant" value = 14.9 }
						NOT = { check_variable = { which = "tyrant" value = 15.9 } }
					}
					current_heir = {
						add_trait = tyrant15
					}
				}
				if = {
					limit = {
						check_variable = { which = "tyrant" value = 15.9 }
						NOT = { check_variable = { which = "tyrant" value = 16.9 } }
					}
					current_heir = {
						add_trait = tyrant16
					}
				}
				if = {
					limit = {
						check_variable = { which = "tyrant" value = 16.9 }
						NOT = { check_variable = { which = "tyrant" value = 17.9 } }
					}
					current_heir = {
						add_trait = tyrant17
					}
				}
				if = {
					limit = {
						check_variable = { which = "tyrant" value = 17.9 }
						NOT = { check_variable = { which = "tyrant" value = 18.9 } }
					}
					current_heir = {
						add_trait = tyrant18
					}
				}
				if = {
					limit = {
						check_variable = { which = "tyrant" value = 18.9 }
						NOT = { check_variable = { which = "tyrant" value = 19.9 } }
					}
					current_heir = {
						add_trait = tyrant19
					}
				}
				if = {
					limit = {
						check_variable = { which = "tyrant" value = 19.9 }
					}
					current_heir = {
						add_trait = tyrant20
					}
				}
			}
			#dishonorable
			if = {
				limit = {
					ai = no
					OR = {
						trait = dishonorable2
						trait = dishonorable3
						trait = dishonorable4
						trait = dishonorable5
						trait = dishonorable6
						trait = dishonorable7
						trait = dishonorable8
						trait = dishonorable9
						trait = dishonorable10
					}
				}
				if = {
					limit = {
						trait = dishonorable2
					}
					hidden_tooltip = { change_variable = { which = "dishonorable" value = 1 } }
				}
				if = {
					limit = {
						trait = dishonorable3
					}
					hidden_tooltip = { change_variable = { which = "dishonorable" value = 2 } }
				}
				if = {
					limit = {
						trait = dishonorable4
					}
					hidden_tooltip = { change_variable = { which = "dishonorable" value = 3 } }
				}
				if = {
					limit = {
						trait = dishonorable5
					}
					hidden_tooltip = { change_variable = { which = "dishonorable" value = 4 } }
				}
				if = {
					limit = {
						trait = dishonorable6
					}
					hidden_tooltip = { change_variable = { which = "dishonorable" value = 5 } }
				}
				if = {
					limit = {
						trait = dishonorable7
					}
					hidden_tooltip = { change_variable = { which = "dishonorable" value = 6 } }
				}
				if = {
					limit = {
						trait = dishonorable8
					}
					hidden_tooltip = { change_variable = { which = "dishonorable" value = 7 } }
				}
				if = {
					limit = {
						trait = dishonorable9
					}
					hidden_tooltip = { change_variable = { which = "dishonorable" value = 8 } }
				}
				if = {
					limit = {
						trait = dishonorable10
					}
					hidden_tooltip = { change_variable = { which = "dishonorable" value = 9 } }
				}
				if = {
					limit = {
						current_heir = { trait = dishonorable1 }
					}
					hidden_tooltip = { change_variable = { which = "dishonorable" value = 1 } }
				}
				if = {
					limit = {
						current_heir = { trait = dishonorable2 }
					}
					hidden_tooltip = { change_variable = { which = "dishonorable" value = 2 } }
				}
				if = {
					limit = {
						current_heir = { trait = dishonorable3 }
					}
					hidden_tooltip = { change_variable = { which = "dishonorable" value = 3 } }
				}
				if = {
					limit = {
						current_heir = { trait = dishonorable4 }
					}
					hidden_tooltip = { change_variable = { which = "dishonorable" value = 4 } }
				}
				if = {
					limit = {
						current_heir = { trait = dishonorable5 }
					}
					hidden_tooltip = { change_variable = { which = "dishonorable" value = 5 } }
				}
				if = {
					limit = {
						current_heir = { trait = dishonorable6 }
					}
					hidden_tooltip = { change_variable = { which = "dishonorable" value = 6 } }
				}
				if = {
					limit = {
						current_heir = { trait = dishonorable7 }
					}
					hidden_tooltip = { change_variable = { which = "dishonorable" value = 7 } }
				}
				if = {
					limit = {
						current_heir = { trait = dishonorable8 }
					}
					hidden_tooltip = { change_variable = { which = "dishonorable" value = 8 } }
				}
				if = {
					limit = {
						current_heir = { trait = dishonorable9 }
					}
					hidden_tooltip = { change_variable = { which = "dishonorable" value = 9 } }
				}
				if = {
					limit = {
						current_heir = { trait = dishonorable10 }
					}
					hidden_tooltip = { change_variable = { which = "dishonorable" value = 10 } }
				}
				if = {
					limit = {
						current_heir = { trait = dyn_dishonorable1 }
					}
					hidden_tooltip = { change_variable = { which = "dishonorable" value = 1 } }
				}
				if = {
					limit = {
						current_heir = { trait = dyn_dishonorable2 }
					}
					hidden_tooltip = { change_variable = { which = "dishonorable" value = 2 } }
				}
				if = {
					limit = {
						current_heir = { trait = dyn_dishonorable3 }
					}
					hidden_tooltip = { change_variable = { which = "dishonorable" value = 3 } }
				}
				if = {
					limit = {
						current_heir = { trait = dyn_dishonorable4 }
					}
					hidden_tooltip = { change_variable = { which = "dishonorable" value = 4 } }
				}
				if = {
					limit = {
						current_heir = { trait = dyn_dishonorable5 }
					}
					hidden_tooltip = { change_variable = { which = "dishonorable" value = 5 } }
				}
				if = {
					limit = {
						current_heir = { trait = dyn_dishonorable6 }
					}
					hidden_tooltip = { change_variable = { which = "dishonorable" value = 6 } }
				}
				if = {
					limit = {
						current_heir = { trait = dyn_dishonorable7 }
					}
					hidden_tooltip = { change_variable = { which = "dishonorable" value = 7 } }
				}
				if = {
					limit = {
						current_heir = { trait = dyn_dishonorable8 }
					}
					hidden_tooltip = { change_variable = { which = "dishonorable" value = 8 } }
				}
				if = {
					limit = {
						current_heir = { trait = dyn_dishonorable9 }
					}
					hidden_tooltip = { change_variable = { which = "dishonorable" value = 9 } }
				}
				if = {
					limit = {
						current_heir = { trait = dyn_dishonorable10 }
					}
					hidden_tooltip = { change_variable = { which = "dishonorable" value = 10 } }
				}
				remove_trait = dishonorable1
				remove_trait = dishonorable2
				remove_trait = dishonorable3
				remove_trait = dishonorable4
				remove_trait = dishonorable5
				remove_trait = dishonorable6
				remove_trait = dishonorable7
				remove_trait = dishonorable8
				remove_trait = dishonorable9
				remove_trait = dishonorable10
				remove_trait = dyn_dishonorable1
				remove_trait = dyn_dishonorable2
				remove_trait = dyn_dishonorable3
				remove_trait = dyn_dishonorable4
				remove_trait = dyn_dishonorable5
				remove_trait = dyn_dishonorable6
				remove_trait = dyn_dishonorable7
				remove_trait = dyn_dishonorable8
				remove_trait = dyn_dishonorable9
				remove_trait = dyn_dishonorable10
				current_heir = {
					remove_trait = dishonorable1
					remove_trait = dishonorable2
					remove_trait = dishonorable3
					remove_trait = dishonorable4
					remove_trait = dishonorable5
					remove_trait = dishonorable6
					remove_trait = dishonorable7
					remove_trait = dishonorable8
					remove_trait = dishonorable9
					remove_trait = dishonorable10
					remove_trait = dyn_dishonorable1
					remove_trait = dyn_dishonorable2
					remove_trait = dyn_dishonorable3
					remove_trait = dyn_dishonorable4
					remove_trait = dyn_dishonorable5
					remove_trait = dyn_dishonorable6
					remove_trait = dyn_dishonorable7
					remove_trait = dyn_dishonorable8
					remove_trait = dyn_dishonorable9
					remove_trait = dyn_dishonorable10
				}
				if = {
					limit = {
						check_variable = { which = "dishonorable" value = 0.9 }
						NOT = { check_variable = { which = "dishonorable" value = 1.9 } }
					}
					current_heir = {
						add_trait = dyn_dishonorable1
					}
				}
				if = {
					limit = {
						check_variable = { which = "dishonorable" value = 1.9 }
						NOT = { check_variable = { which = "dishonorable" value = 2.9 } }
					}
					current_heir = {
						add_trait = dyn_dishonorable2
					}
				}
				if = {
					limit = {
						check_variable = { which = "dishonorable" value = 2.9 }
						NOT = { check_variable = { which = "dishonorable" value = 3.9 } }
					}
					current_heir = {
						add_trait = dyn_dishonorable3
					}
				}
				if = {
					limit = {
						check_variable = { which = "dishonorable" value = 3.9 }
						NOT = { check_variable = { which = "dishonorable" value = 4.9 } }
					}
					current_heir = {
						add_trait = dyn_dishonorable4
					}
				}
				if = {
					limit = {
						check_variable = { which = "dishonorable" value = 4.9 }
						NOT = { check_variable = { which = "dishonorable" value = 5.9 } }
					}
					current_heir = {
						add_trait = dyn_dishonorable5
					}
				}
				if = {
					limit = {
						check_variable = { which = "dishonorable" value = 5.9 }
						NOT = { check_variable = { which = "dishonorable" value = 6.9 } }
					}
					current_heir = {
						add_trait = dyn_dishonorable6
					}
				}
				if = {
					limit = {
						check_variable = { which = "dishonorable" value = 6.9 }
						NOT = { check_variable = { which = "dishonorable" value = 7.9 } }
					}
					current_heir = {
						add_trait = dyn_dishonorable7
					}
				}
				if = {
					limit = {
						check_variable = { which = "dishonorable" value = 7.9 }
						NOT = { check_variable = { which = "dishonorable" value = 8.9 } }
					}
					current_heir = {
						add_trait = dyn_dishonorable8
					}
				}
				if = {
					limit = {
						check_variable = { which = "dishonorable" value = 8.9 }
						NOT = { check_variable = { which = "dishonorable" value = 9.9 } }
					}
					current_heir = {
						add_trait = dyn_dishonorable9
					}
				}
				if = {
					limit = {
						check_variable = { which = "dishonorable" value = 9.9 }
					}
					current_heir = {
						add_trait = dyn_dishonorable10
					}
				}
			}
		}
	}
}

character_event = { # Contingent Territory Check Part 1
	id = Plus.307 #formerly 1000182870

	is_triggered_only = yes
	hide_window = yes

	immediate = {
		any_playable_ruler = {
			any_demesne_title = {
				limit = { tier = count }
				location = { clr_province_flag = contingent_territory }
			}
		}
		capital_scope = { set_province_flag = contingent_territory }
		any_independent_ruler = {
			capital_scope = { set_province_flag = contingent_territory }
		}
		character_event = { id = Plus.308 }
	}
}

character_event = { # Contingent Territory Check Part 2
	id = Plus.308 #formerly 1000182871

	is_triggered_only = yes
	hide_window = yes

	trigger = {
		any_playable_ruler = {
			any_demesne_province = {
				NOT = { has_province_flag = contingent_territory }
				any_neighbor_province = {
					owner = { OR = { character = PREVPREVPREV same_realm = PREVPREVPREV } }
					has_province_flag = contingent_territory
				}
			}
		}
	}
	
	immediate = {
		any_playable_ruler = {
			random_demesne_province = {
				limit = {
					NOT = { has_province_flag = contingent_territory }
					any_neighbor_province = {
						owner = { OR = { character = PREVPREVPREV same_realm = PREVPREVPREV } }
						has_province_flag = contingent_territory
					}
				}
				set_province_flag = contingent_territory
			}
		}
		character_event = { id = Plus.308 }
	}
}

