namespace = Plus

#reserved: Plus.300 to Plus.399

#######################################
# CK2Plus Maintenance Events
#######################################

character_event = { # AI plot check
	id = Plus.300
	is_triggered_only = yes
	hide_window = yes
	
	ai = yes
	prisoner = no
	capable_only = yes
	min_age = 16

	trigger = {
		ai = yes
		NOT = { has_character_flag = plot_check }
		OR = {
			has_plot = plot_seize_trade_post
			has_plot = plot_discredit_councillor
			has_plot = plot_embezzle_from_liege
			has_plot = plot_kidnapping
			has_plot = plot_fabricate_treason
			has_plot = plot_fabricate_treason_liege
			has_plot = plot_fabricate_heresy
			has_plot = plot_gain_liege_title
			has_plot = plot_gain_fellow_vassal_title
			has_plot = plot_weaken_fellow_vassal
			has_plot = plot_kidnap_liege
			has_plot = plot_kill_character
			has_plot = plot_take_revenge
			has_plot = plot_kill_spouse
			has_plot = plot_seduce
		}
	}

	weight_multiplier = {
		days = 1
	}

	immediate = {
		set_character_flag = plot_check
		plot_target_char = {
			any_courtier = {
				limit = { NOT = { is_plot_target_of = ROOT } }
				remove_opinion = {
					who = ROOT
					modifier = opinion_plot_help
				}
				opinion = {
					who = ROOT
					modifier = opinion_plot_help
					years = 5
				}
			}
			any_vassal = {
				limit = { NOT = { is_plot_target_of = ROOT } }
				remove_opinion = {
					who = ROOT
					modifier = opinion_plot_help
				}
				opinion = {
					who = ROOT
					modifier = opinion_plot_help
					years = 5
				}
			}
			liege = {
				any_courtier = {
					limit = { NOT = { is_plot_target_of = ROOT } }
					remove_opinion = {
						who = ROOT
						modifier = opinion_plot_help
					}
					opinion = {
						who = ROOT
						modifier = opinion_plot_help
						years = 5
					}
				}
				any_vassal = {
					limit = { NOT = { is_plot_target_of = ROOT } }
					remove_opinion = {
						who = ROOT
						modifier = opinion_plot_help
					}
					opinion = {
						who = ROOT
						modifier = opinion_plot_help
						years = 5
					}
				}
			}
		}
	}
}

character_event = { # Cancel AI plot if too few helpers and has taken too long
	id = Plus.301
	hide_window = yes

	ai = yes
	prisoner = no
	capable_only = yes
	min_age = 16
	
	trigger = {
		ai = yes
		OR = {
			has_plot = plot_seize_trade_post
			has_plot = plot_discredit_councillor
			has_plot = plot_embezzle_from_liege
			has_plot = plot_kidnapping
			has_plot = plot_fabricate_treason
			has_plot = plot_fabricate_treason_liege
			has_plot = plot_fabricate_heresy
			has_plot = plot_gain_liege_title
			has_plot = plot_gain_fellow_vassal_title
			has_plot = plot_weaken_fellow_vassal
			has_plot = plot_kidnap_liege
			has_plot = plot_kill_character
			has_plot = plot_take_revenge
			has_plot = plot_kill_spouse
			has_plot = plot_seduce
		}
		had_character_flag = {
			flag = plot_check
			days = 1825
		}
		OR = {
			NOT = { num_of_plot_backers = 1 }
			had_character_flag = {
				flag = plot_check
				days = 2750
			}
		}
		OR = {
			NOT = { num_of_plot_backers = 2 }
			had_character_flag = {
				flag = plot_check
				days = 3650
			}
		}
	}

	mean_time_to_happen = {
		months = 1
	}

	immediate = {
		set_character_flag = abort_plot
	}
}

character_event = { # Allow AI plotting
	id = Plus.302
	is_triggered_only = yes
	hide_window = yes
	
	min_age = 16
	prisoner = no
	capable_only = yes
	ai = yes

	trigger = {
		ai = yes
		NOT = { has_character_flag = allow_plotting }
		NOT = {
			trait = in_hiding
			has_plot = plot_seize_trade_post
			has_plot = plot_discredit_councillor
			has_plot = plot_embezzle_from_liege
			has_plot = plot_kidnapping
			has_plot = plot_fabricate_treason
			has_plot = plot_fabricate_treason_liege
			has_plot = plot_fabricate_heresy
			has_plot = plot_gain_liege_title
			has_plot = plot_gain_fellow_vassal_title
			has_plot = plot_weaken_fellow_vassal
			has_plot = plot_kidnap_liege
			has_plot = plot_kill_character
			has_plot = plot_take_revenge
			has_plot = plot_kill_spouse
			has_plot = plot_seduce
		}
	}

	weight_multiplier = {
		days = 1
		modifier = {
			factor = 0.5
			is_ruler = no
			is_councillor = no
		}
		modifier = {
			factor = 2
			is_ruler = yes
			tier = COUNT
		}
		modifier = {
			factor = 5
			is_ruler = yes
			tier = DUKE
		}
		modifier = {
			factor = 10
			is_ruler = yes
			higher_tier_than = DUKE
		}
		modifier = {
			factor = 3
			has_job_title = job_spymaster
		}
		modifier = {
			factor = 0.5
			NOT = { intrigue = 5 }
		}
		modifier = {
			factor = 0.75
			NOT = { intrigue = 10 }
		}
		modifier = {
			factor = 1.25
			trait = amateurish_plotter
		}
		modifier = {
			factor = 1.5
			trait = flamboyant_schemer
		}
		modifier = {
			factor = 2
			trait = intricate_webweaver
		}
		modifier = {
			factor = 3
			trait = elusive_shadow
		}
		modifier = {
			factor = 2
			intrigue = 10
		}
		modifier = {
			factor = 2
			intrigue = 15
		}
		modifier = {
			factor = 2
			intrigue = 20
		}
		modifier = {
			factor = 0.5
			OR = {
				trait = content
				trait = honest
				trait = kind
				trait = just
			}
		}
		modifier = {
			factor = 10
			OR = {
				trait = lunatic
				trait = possessed
			}
		}
	}

	immediate = {
		set_character_flag = allow_plotting
	}
}

character_event = { # Shatter Empire if too small
	id = Plus.303 #formerly 1000182859
	desc = "EVTDESC_Plus_303"
	picture = "GFX_evt_council"
	
	is_triggered_only = yes
	
	only_rulers = yes
	
	trigger = {
		war = no
		is_ruler = yes
		tier = emperor
		any_demesne_title = {
			tier = emperor
			OR = {
				AND = {
					ROOT = { NOT = { realm_size = 100 } }
					NOT = {
						title = e_rebels
						title = e_pirates
						title = e_timurids
						title = e_mexikha
						title = e_byzantium
						title = e_roman_empire
						title = e_latin_empire
						title = e_karling
						AND = {
							title = e_golden_horde
							holder_scope = { religion = tengri_pagan }
						}
						AND = {
							title = e_il-khanate
							holder_scope = { religion = tengri_pagan }
						}
					}
				}
				AND = {
					title = e_latin_empire
					NOT = { c_byzantion = { holder_scope = { same_realm = ROOT } } }
				}
				AND = {
					title = e_byzantium
					NOT = { c_byzantion = { holder_scope = { same_realm = ROOT } } }
				}
			}
		}
	}

	immediate = {
		#attempt to form a kingdom so we don't lose all our dukes
		character_event = { id = Plus.304 }
	}

	option = {
		name = "EVTOPTA_Plus_303"
		any_demesne_title = {
			limit = {
				tier = emperor
				OR = {
					AND = {
						ROOT = { NOT = { realm_size = 100 } }
						NOT = {
							title = e_rebels
							title = e_pirates
							title = e_timurids
							title = e_mexikha
							title = e_byzantium
							title = e_roman_empire
							title = e_latin_empire
							title = e_karling
							AND = {
								title = e_golden_horde
								holder_scope = { religion = tengri_pagan }
							}
							AND = {
								title = e_il-khanate
								holder_scope = { religion = tengri_pagan }
							}
						}
					}
					AND = {
						title = e_latin_empire
						NOT = { c_byzantion = { holder_scope = { same_realm = ROOT } } }
					}
					AND = {
						title = e_byzantium
						NOT = { c_byzantion = { holder_scope = { same_realm = ROOT } } }
					}
				}
			}
			destroy_landed_title = yes
			prestige = -1000
		}
	}
}

character_event = { # Fix Laws if CA differs from max law level for the CA
	id = Plus.304 #formerly 1000182857
	desc = "EVTDESC_Plus_304"
	picture = "GFX_evt_council"
	
	is_triggered_only = yes
	
	only_rulers = yes

	trigger = {
		war = no
		is_ruler = yes
		higher_tier_than = BARON
		primary_title = {
			OR = {
				#no crown law or autonomous vassals: allows 0
				AND = {
					NOT = {
						crownlaw_title = { has_law = crown_authority_1 }
						crownlaw_title = { has_law = crown_authority_2 }
						crownlaw_title = { has_law = crown_authority_3 }
						crownlaw_title = { has_law = crown_authority_4 }
					}
					OR = {
						has_law = iqta_tax_1
						has_law = iqta_tax_2
						has_law = feudal_tax_1
						has_law = feudal_tax_2
						has_law = city_tax_1
						has_law = city_tax_2
						has_law = temple_tax_1
						has_law = temple_tax_2
						has_law = tax_privileges_0
						has_law = levy_privileges_0
					}
				}
				#low & medium crown authority: allows 0-1
				AND = {
					NOT = {
						crownlaw_title = { has_law = crown_authority_3 }
						crownlaw_title = { has_law = crown_authority_4 }
					}
					OR = {
						has_law = iqta_tax_2
						has_law = feudal_tax_2
						has_law = city_tax_2
						has_law = temple_tax_2
					}
				}
			}
		}
	}

	weight_multiplier = {
		days = 1
	}

	option = {
		name = "OK"
		primary_title = {
			if = {
				limit = {
					has_law = tax_privileges_0
					NOT = {
						crownlaw_title = { has_law = crown_authority_1 }
						crownlaw_title = { has_law = crown_authority_2 }
						crownlaw_title = { has_law = crown_authority_3 }
						crownlaw_title = { has_law = crown_authority_4 }
					}
				}
				add_law = tax_privileges_1
			}
			if = {
				limit = {
					has_law = levy_privileges_0
					NOT = {
						crownlaw_title = { has_law = crown_authority_1 }
						crownlaw_title = { has_law = crown_authority_2 }
						crownlaw_title = { has_law = crown_authority_3 }
						crownlaw_title = { has_law = crown_authority_4 }
					}
				}
				add_law = levy_privileges_1
			}
			if = {
				limit = {
					has_law = iqta_tax_1
					NOT = {
						crownlaw_title = { has_law = crown_authority_1 }
						crownlaw_title = { has_law = crown_authority_2 }
						crownlaw_title = { has_law = crown_authority_3 }
						crownlaw_title = { has_law = crown_authority_4 }
					}
				}
				add_law = iqta_tax_0
			}
			if = {
				limit = {
					has_law = iqta_tax_2
					NOT = {
						crownlaw_title = { has_law = crown_authority_3 }
						crownlaw_title = { has_law = crown_authority_4 }
					}
				}
				if = {
					limit = {
						NOT = {
							crownlaw_title = { has_law = crown_authority_1 }
							crownlaw_title = { has_law = crown_authority_2 }
							crownlaw_title = { has_law = crown_authority_3 }
							crownlaw_title = { has_law = crown_authority_4 }
						}
					}
					add_law = iqta_tax_0
				}
				if = {
					limit = {
						OR = {
							crownlaw_title = { has_law = crown_authority_1 }
							crownlaw_title = { has_law = crown_authority_2 }
						}
					}
					add_law = iqta_tax_1
				}
			}
			if = {
				limit = {
					has_law = feudal_tax_1
					NOT = {
						crownlaw_title = { has_law = crown_authority_1 }
						crownlaw_title = { has_law = crown_authority_2 }
						crownlaw_title = { has_law = crown_authority_3 }
						crownlaw_title = { has_law = crown_authority_4 }
					}
				}
				add_law = feudal_tax_0
			}
			if = {
				limit = {
					has_law = feudal_tax_2
					NOT = {
						crownlaw_title = { has_law = crown_authority_3 }
						crownlaw_title = { has_law = crown_authority_4 }
					}
				}
				if = {
					limit = {
						NOT = {
							crownlaw_title = { has_law = crown_authority_1 }
							crownlaw_title = { has_law = crown_authority_2 }
							crownlaw_title = { has_law = crown_authority_3 }
							crownlaw_title = { has_law = crown_authority_4 }
						}
					}
					add_law = feudal_tax_0
				}
				if = {
					limit = {
						OR = {
							crownlaw_title = { has_law = crown_authority_1 }
							crownlaw_title = { has_law = crown_authority_2 }
						}
					}
					add_law = feudal_tax_1
				}
			}
			if = {
				limit = {
					has_law = city_tax_1
					NOT = {
						crownlaw_title = { has_law = crown_authority_1 }
						crownlaw_title = { has_law = crown_authority_2 }
						crownlaw_title = { has_law = crown_authority_3 }
						crownlaw_title = { has_law = crown_authority_4 }
					}
				}
				add_law = city_tax_0
			}
			if = {
				limit = {
					has_law = city_tax_2
					NOT = {
						crownlaw_title = { has_law = crown_authority_3 }
						crownlaw_title = { has_law = crown_authority_4 }
					}
				}
				if = {
					limit = {
						NOT = {
							crownlaw_title = { has_law = crown_authority_1 }
							crownlaw_title = { has_law = crown_authority_2 }
							crownlaw_title = { has_law = crown_authority_3 }
							crownlaw_title = { has_law = crown_authority_4 }
						}
					}
					add_law = city_tax_0
				}
				if = {
					limit = {
						OR = {
							crownlaw_title = { has_law = crown_authority_1 }
							crownlaw_title = { has_law = crown_authority_2 }
						}
					}
					add_law = city_tax_1
				}
			}
			if = {
				limit = {
					has_law = temple_tax_1
					NOT = {
						crownlaw_title = { has_law = crown_authority_1 }
						crownlaw_title = { has_law = crown_authority_2 }
						crownlaw_title = { has_law = crown_authority_3 }
						crownlaw_title = { has_law = crown_authority_4 }
					}
				}
				add_law = temple_tax_0
			}
			if = {
				limit = {
					has_law = temple_tax_2
					NOT = {
						crownlaw_title = { has_law = crown_authority_3 }
						crownlaw_title = { has_law = crown_authority_4 }
					}
				}
				if = {
					limit = {
						NOT = {
							crownlaw_title = { has_law = crown_authority_1 }
							crownlaw_title = { has_law = crown_authority_2 }
							crownlaw_title = { has_law = crown_authority_3 }
							crownlaw_title = { has_law = crown_authority_4 }
						}
					}
					add_law = temple_tax_0
				}
				if = {
					limit = {
						OR = {
							crownlaw_title = { has_law = crown_authority_1 }
							crownlaw_title = { has_law = crown_authority_2 }
						}
					}
					add_law = temple_tax_1
				}
			}
		}
	}
}

character_event = { # Remove Crowned by Pope or Crowned or Uncrowned if not a ruler
	id = Plus.305
	
	is_triggered_only = yes
	hide_window = yes

	trigger = {
		war = no
		OR = {
			AND = {
				OR = {
					trait = crowned
					trait = uncrowned
				}
				OR = {
					is_ruler = no
					lower_real_tier_than = KING
				}
			}
			AND = {
				trait = crowned_by_pope
				NOT = {
					has_landed_title = e_hre
					has_landed_title = e_karling
				}
			}
		}
	}

	weight_multiplier = {
		days = 1
	}

	immediate = {
		if = {
			limit = {
				trait = crowned_by_pope
				higher_real_tier_than = DUKE
			}
			remove_trait = crowned_by_pope
			add_trait = crowned
		}
		if = {
			limit = {
				trait = crowned_by_pope
				NOT = { higher_real_tier_than = DUKE }
			}
			remove_trait = crowned_by_pope
		}
		if = {
			limit = {
				trait = crowned
				OR = {
					is_ruler = no
					lower_real_tier_than = KING
				}
			}
			remove_trait = crowned
		}
		if = {
			limit = {
				trait = uncrowned
				OR = {
					is_ruler = no
					lower_real_tier_than = KING
				}
			}
			remove_trait = uncrowned
		}
	}
}

character_event = { # Inherit Half of Dishonourable and Tyrant
	id = Plus.306 #formerly 1000182861

	hide_window = yes
	is_triggered_only = yes

	immediate = {
		hidden_tooltip = {
			#fix wrong religion heirs
			if = {
				limit = {
					is_ruler = yes
					is_feudal = no
					is_tribal = no
					ai = yes
					current_heir = {
						NOT = { religion_group = ROOT }
					}
				}
				current_heir = {
					religion = ROOT
				}
			}
			#tyrant
			if = {
				limit = {
					ai = no
					OR = {
						trait = tyrant3
						trait = tyrant4
						trait = tyrant5
						trait = tyrant6
						trait = tyrant7
						trait = tyrant8
						trait = tyrant9
						trait = tyrant10
						trait = tyrant11
						trait = tyrant12
						trait = tyrant13
						trait = tyrant14
						trait = tyrant15
						trait = tyrant16
						trait = tyrant17
						trait = tyrant18
						trait = tyrant19
						trait = tyrant20
					}
				}
				if = {
					limit = {
						trait = tyrant3
					}
					hidden_tooltip = { change_variable = { which = "tyrant" value = 1 } }
				}
				if = {
					limit = {
						trait = tyrant4
					}
					hidden_tooltip = { change_variable = { which = "tyrant" value = 2 } }
				}
				if = {
					limit = {
						trait = tyrant5
					}
					hidden_tooltip = { change_variable = { which = "tyrant" value = 3 } }
				}
				if = {
					limit = {
						trait = tyrant6
					}
					hidden_tooltip = { change_variable = { which = "tyrant" value = 4 } }
				}
				if = {
					limit = {
						trait = tyrant7
					}
					hidden_tooltip = { change_variable = { which = "tyrant" value = 5 } }
				}
				if = {
					limit = {
						trait = tyrant8
					}
					hidden_tooltip = { change_variable = { which = "tyrant" value = 6 } }
				}
				if = {
					limit = {
						trait = tyrant9
					}
					hidden_tooltip = { change_variable = { which = "tyrant" value = 7 } }
				}
				if = {
					limit = {
						trait = tyrant10
					}
					hidden_tooltip = { change_variable = { which = "tyrant" value = 8 } }
				}
				if = {
					limit = {
						trait = tyrant11
					}
					hidden_tooltip = { change_variable = { which = "tyrant" value = 9 } }
				}
				if = {
					limit = {
						trait = tyrant12
					}
					hidden_tooltip = { change_variable = { which = "tyrant" value = 10 } }
				}
				if = {
					limit = {
						trait = tyrant13
					}
					hidden_tooltip = { change_variable = { which = "tyrant" value = 11 } }
				}
				if = {
					limit = {
						trait = tyrant14
					}
					hidden_tooltip = { change_variable = { which = "tyrant" value = 12 } }
				}
				if = {
					limit = {
						trait = tyrant15
					}
					hidden_tooltip = { change_variable = { which = "tyrant" value = 13 } }
				}
				if = {
					limit = {
						trait = tyrant16
					}
					hidden_tooltip = { change_variable = { which = "tyrant" value = 14 } }
				}
				if = {
					limit = {
						trait = tyrant17
					}
					hidden_tooltip = { change_variable = { which = "tyrant" value = 15 } }
				}
				if = {
					limit = {
						trait = tyrant18
					}
					hidden_tooltip = { change_variable = { which = "tyrant" value = 16 } }
				}
				if = {
					limit = {
						trait = tyrant19
					}
					hidden_tooltip = { change_variable = { which = "tyrant" value = 17 } }
				}
				if = {
					limit = {
						trait = tyrant20
					}
					hidden_tooltip = { change_variable = { which = "tyrant" value = 18 } }
				}
				if = {
					limit = {
						current_heir = { trait = tyrant1 }
					}
					hidden_tooltip = { change_variable = { which = "tyrant" value = 1 } }
				}
				if = {
					limit = {
						current_heir = { trait = tyrant2 }
					}
					hidden_tooltip = { change_variable = { which = "tyrant" value = 2 } }
				}
				if = {
					limit = {
						current_heir = { trait = tyrant3 }
					}
					hidden_tooltip = { change_variable = { which = "tyrant" value = 3 } }
				}
				if = {
					limit = {
						current_heir = { trait = tyrant4 }
					}
					hidden_tooltip = { change_variable = { which = "tyrant" value = 4 } }
				}
				if = {
					limit = {
						current_heir = { trait = tyrant5 }
					}
					hidden_tooltip = { change_variable = { which = "tyrant" value = 5 } }
				}
				if = {
					limit = {
						current_heir = { trait = tyrant6 }
					}
					hidden_tooltip = { change_variable = { which = "tyrant" value = 6 } }
				}
				if = {
					limit = {
						current_heir = { trait = tyrant7 }
					}
					hidden_tooltip = { change_variable = { which = "tyrant" value = 7 } }
				}
				if = {
					limit = {
						current_heir = { trait = tyrant8 }
					}
					hidden_tooltip = { change_variable = { which = "tyrant" value = 8 } }
				}
				if = {
					limit = {
						current_heir = { trait = tyrant9 }
					}
					hidden_tooltip = { change_variable = { which = "tyrant" value = 9 } }
				}
				if = {
					limit = {
						current_heir = { trait = tyrant10 }
					}
					hidden_tooltip = { change_variable = { which = "tyrant" value = 10 } }
				}
				if = {
					limit = {
						current_heir = { trait = tyrant11 }
					}
					hidden_tooltip = { change_variable = { which = "tyrant" value = 11 } }
				}
				if = {
					limit = {
						current_heir = { trait = tyrant12 }
					}
					hidden_tooltip = { change_variable = { which = "tyrant" value = 12 } }
				}
				if = {
					limit = {
						current_heir = { trait = tyrant13 }
					}
					hidden_tooltip = { change_variable = { which = "tyrant" value = 13 } }
				}
				if = {
					limit = {
						current_heir = { trait = tyrant14 }
					}
					hidden_tooltip = { change_variable = { which = "tyrant" value = 14 } }
				}
				if = {
					limit = {
						current_heir = { trait = tyrant15 }
					}
					hidden_tooltip = { change_variable = { which = "tyrant" value = 15 } }
				}
				if = {
					limit = {
						current_heir = { trait = tyrant16 }
					}
					hidden_tooltip = { change_variable = { which = "tyrant" value = 16 } }
				}
				if = {
					limit = {
						current_heir = { trait = tyrant17 }
					}
					hidden_tooltip = { change_variable = { which = "tyrant" value = 17 } }
				}
				if = {
					limit = {
						current_heir = { trait = tyrant18 }
					}
					hidden_tooltip = { change_variable = { which = "tyrant" value = 18 } }
				}
				if = {
					limit = {
						current_heir = { trait = tyrant19 }
					}
					hidden_tooltip = { change_variable = { which = "tyrant" value = 19 } }
				}
				if = {
					limit = {
						current_heir = { trait = tyrant20 }
					}
					hidden_tooltip = { change_variable = { which = "tyrant" value = 20 } }
				}
				remove_trait = tyrant1
				remove_trait = tyrant2
				remove_trait = tyrant3
				remove_trait = tyrant4
				remove_trait = tyrant5
				remove_trait = tyrant6
				remove_trait = tyrant7
				remove_trait = tyrant8
				remove_trait = tyrant9
				remove_trait = tyrant10
				remove_trait = tyrant11
				remove_trait = tyrant12
				remove_trait = tyrant13
				remove_trait = tyrant14
				remove_trait = tyrant15
				remove_trait = tyrant16
				remove_trait = tyrant17
				remove_trait = tyrant18
				remove_trait = tyrant19
				remove_trait = tyrant20
				current_heir = {
					remove_trait = tyrant1
					remove_trait = tyrant2
					remove_trait = tyrant3
					remove_trait = tyrant4
					remove_trait = tyrant5
					remove_trait = tyrant6
					remove_trait = tyrant7
					remove_trait = tyrant8
					remove_trait = tyrant9
					remove_trait = tyrant10
					remove_trait = tyrant11
					remove_trait = tyrant12
					remove_trait = tyrant13
					remove_trait = tyrant14
					remove_trait = tyrant15
					remove_trait = tyrant16
					remove_trait = tyrant17
					remove_trait = tyrant18
					remove_trait = tyrant19
					remove_trait = tyrant20
				}
				if = {
					limit = {
						check_variable = { which = "tyrant" value = 0.9 }
						NOT = { check_variable = { which = "tyrant" value = 1.9 } }
					}
					current_heir = {
						add_trait = tyrant1
					}
				}
				if = {
					limit = {
						check_variable = { which = "tyrant" value = 1.9 }
						NOT = { check_variable = { which = "tyrant" value = 2.9 } }
					}
					current_heir = {
						add_trait = tyrant2
					}
				}
				if = {
					limit = {
						check_variable = { which = "tyrant" value = 2.9 }
						NOT = { check_variable = { which = "tyrant" value = 3.9 } }
					}
					current_heir = {
						add_trait = tyrant3
					}
				}
				if = {
					limit = {
						check_variable = { which = "tyrant" value = 3.9 }
						NOT = { check_variable = { which = "tyrant" value = 4.9 } }
					}
					current_heir = {
						add_trait = tyrant4
					}
				}
				if = {
					limit = {
						check_variable = { which = "tyrant" value = 4.9 }
						NOT = { check_variable = { which = "tyrant" value = 5.9 } }
					}
					current_heir = {
						add_trait = tyrant5
					}
				}
				if = {
					limit = {
						check_variable = { which = "tyrant" value = 5.9 }
						NOT = { check_variable = { which = "tyrant" value = 6.9 } }
					}
					current_heir = {
						add_trait = tyrant6
					}
				}
				if = {
					limit = {
						check_variable = { which = "tyrant" value = 6.9 }
						NOT = { check_variable = { which = "tyrant" value = 7.9 } }
					}
					current_heir = {
						add_trait = tyrant7
					}
				}
				if = {
					limit = {
						check_variable = { which = "tyrant" value = 7.9 }
						NOT = { check_variable = { which = "tyrant" value = 8.9 } }
					}
					current_heir = {
						add_trait = tyrant8
					}
				}
				if = {
					limit = {
						check_variable = { which = "tyrant" value = 8.9 }
						NOT = { check_variable = { which = "tyrant" value = 9.9 } }
					}
					current_heir = {
						add_trait = tyrant9
					}
				}
				if = {
					limit = {
						check_variable = { which = "tyrant" value = 9.9 }
						NOT = { check_variable = { which = "tyrant" value = 10.9 } }
					}
					current_heir = {
						add_trait = tyrant10
					}
				}
				if = {
					limit = {
						check_variable = { which = "tyrant" value = 10.9 }
						NOT = { check_variable = { which = "tyrant" value = 11.9 } }
					}
					current_heir = {
						add_trait = tyrant11
					}
				}
				if = {
					limit = {
						check_variable = { which = "tyrant" value = 11.9 }
						NOT = { check_variable = { which = "tyrant" value = 12.9 } }
					}
					current_heir = {
						add_trait = tyrant12
					}
				}
				if = {
					limit = {
						check_variable = { which = "tyrant" value = 12.9 }
						NOT = { check_variable = { which = "tyrant" value = 13.9 } }
					}
					current_heir = {
						add_trait = tyrant13
					}
				}
				if = {
					limit = {
						check_variable = { which = "tyrant" value = 13.9 }
						NOT = { check_variable = { which = "tyrant" value = 14.9 } }
					}
					current_heir = {
						add_trait = tyrant14
					}
				}
				if = {
					limit = {
						check_variable = { which = "tyrant" value = 14.9 }
						NOT = { check_variable = { which = "tyrant" value = 15.9 } }
					}
					current_heir = {
						add_trait = tyrant15
					}
				}
				if = {
					limit = {
						check_variable = { which = "tyrant" value = 15.9 }
						NOT = { check_variable = { which = "tyrant" value = 16.9 } }
					}
					current_heir = {
						add_trait = tyrant16
					}
				}
				if = {
					limit = {
						check_variable = { which = "tyrant" value = 16.9 }
						NOT = { check_variable = { which = "tyrant" value = 17.9 } }
					}
					current_heir = {
						add_trait = tyrant17
					}
				}
				if = {
					limit = {
						check_variable = { which = "tyrant" value = 17.9 }
						NOT = { check_variable = { which = "tyrant" value = 18.9 } }
					}
					current_heir = {
						add_trait = tyrant18
					}
				}
				if = {
					limit = {
						check_variable = { which = "tyrant" value = 18.9 }
						NOT = { check_variable = { which = "tyrant" value = 19.9 } }
					}
					current_heir = {
						add_trait = tyrant19
					}
				}
				if = {
					limit = {
						check_variable = { which = "tyrant" value = 19.9 }
					}
					current_heir = {
						add_trait = tyrant20
					}
				}
			}
			#dishonorable
			if = {
				limit = {
					ai = no
					OR = {
						trait = dishonorable2
						trait = dishonorable3
						trait = dishonorable4
						trait = dishonorable5
						trait = dishonorable6
						trait = dishonorable7
						trait = dishonorable8
						trait = dishonorable9
						trait = dishonorable10
					}
				}
				if = {
					limit = {
						trait = dishonorable2
					}
					hidden_tooltip = { change_variable = { which = "dishonorable" value = 1 } }
				}
				if = {
					limit = {
						trait = dishonorable3
					}
					hidden_tooltip = { change_variable = { which = "dishonorable" value = 2 } }
				}
				if = {
					limit = {
						trait = dishonorable4
					}
					hidden_tooltip = { change_variable = { which = "dishonorable" value = 3 } }
				}
				if = {
					limit = {
						trait = dishonorable5
					}
					hidden_tooltip = { change_variable = { which = "dishonorable" value = 4 } }
				}
				if = {
					limit = {
						trait = dishonorable6
					}
					hidden_tooltip = { change_variable = { which = "dishonorable" value = 5 } }
				}
				if = {
					limit = {
						trait = dishonorable7
					}
					hidden_tooltip = { change_variable = { which = "dishonorable" value = 6 } }
				}
				if = {
					limit = {
						trait = dishonorable8
					}
					hidden_tooltip = { change_variable = { which = "dishonorable" value = 7 } }
				}
				if = {
					limit = {
						trait = dishonorable9
					}
					hidden_tooltip = { change_variable = { which = "dishonorable" value = 8 } }
				}
				if = {
					limit = {
						trait = dishonorable10
					}
					hidden_tooltip = { change_variable = { which = "dishonorable" value = 9 } }
				}
				if = {
					limit = {
						current_heir = { trait = dishonorable1 }
					}
					hidden_tooltip = { change_variable = { which = "dishonorable" value = 1 } }
				}
				if = {
					limit = {
						current_heir = { trait = dishonorable2 }
					}
					hidden_tooltip = { change_variable = { which = "dishonorable" value = 2 } }
				}
				if = {
					limit = {
						current_heir = { trait = dishonorable3 }
					}
					hidden_tooltip = { change_variable = { which = "dishonorable" value = 3 } }
				}
				if = {
					limit = {
						current_heir = { trait = dishonorable4 }
					}
					hidden_tooltip = { change_variable = { which = "dishonorable" value = 4 } }
				}
				if = {
					limit = {
						current_heir = { trait = dishonorable5 }
					}
					hidden_tooltip = { change_variable = { which = "dishonorable" value = 5 } }
				}
				if = {
					limit = {
						current_heir = { trait = dishonorable6 }
					}
					hidden_tooltip = { change_variable = { which = "dishonorable" value = 6 } }
				}
				if = {
					limit = {
						current_heir = { trait = dishonorable7 }
					}
					hidden_tooltip = { change_variable = { which = "dishonorable" value = 7 } }
				}
				if = {
					limit = {
						current_heir = { trait = dishonorable8 }
					}
					hidden_tooltip = { change_variable = { which = "dishonorable" value = 8 } }
				}
				if = {
					limit = {
						current_heir = { trait = dishonorable9 }
					}
					hidden_tooltip = { change_variable = { which = "dishonorable" value = 9 } }
				}
				if = {
					limit = {
						current_heir = { trait = dishonorable10 }
					}
					hidden_tooltip = { change_variable = { which = "dishonorable" value = 10 } }
				}
				if = {
					limit = {
						current_heir = { trait = dyn_dishonorable1 }
					}
					hidden_tooltip = { change_variable = { which = "dishonorable" value = 1 } }
				}
				if = {
					limit = {
						current_heir = { trait = dyn_dishonorable2 }
					}
					hidden_tooltip = { change_variable = { which = "dishonorable" value = 2 } }
				}
				if = {
					limit = {
						current_heir = { trait = dyn_dishonorable3 }
					}
					hidden_tooltip = { change_variable = { which = "dishonorable" value = 3 } }
				}
				if = {
					limit = {
						current_heir = { trait = dyn_dishonorable4 }
					}
					hidden_tooltip = { change_variable = { which = "dishonorable" value = 4 } }
				}
				if = {
					limit = {
						current_heir = { trait = dyn_dishonorable5 }
					}
					hidden_tooltip = { change_variable = { which = "dishonorable" value = 5 } }
				}
				if = {
					limit = {
						current_heir = { trait = dyn_dishonorable6 }
					}
					hidden_tooltip = { change_variable = { which = "dishonorable" value = 6 } }
				}
				if = {
					limit = {
						current_heir = { trait = dyn_dishonorable7 }
					}
					hidden_tooltip = { change_variable = { which = "dishonorable" value = 7 } }
				}
				if = {
					limit = {
						current_heir = { trait = dyn_dishonorable8 }
					}
					hidden_tooltip = { change_variable = { which = "dishonorable" value = 8 } }
				}
				if = {
					limit = {
						current_heir = { trait = dyn_dishonorable9 }
					}
					hidden_tooltip = { change_variable = { which = "dishonorable" value = 9 } }
				}
				if = {
					limit = {
						current_heir = { trait = dyn_dishonorable10 }
					}
					hidden_tooltip = { change_variable = { which = "dishonorable" value = 10 } }
				}
				remove_trait = dishonorable1
				remove_trait = dishonorable2
				remove_trait = dishonorable3
				remove_trait = dishonorable4
				remove_trait = dishonorable5
				remove_trait = dishonorable6
				remove_trait = dishonorable7
				remove_trait = dishonorable8
				remove_trait = dishonorable9
				remove_trait = dishonorable10
				remove_trait = dyn_dishonorable1
				remove_trait = dyn_dishonorable2
				remove_trait = dyn_dishonorable3
				remove_trait = dyn_dishonorable4
				remove_trait = dyn_dishonorable5
				remove_trait = dyn_dishonorable6
				remove_trait = dyn_dishonorable7
				remove_trait = dyn_dishonorable8
				remove_trait = dyn_dishonorable9
				remove_trait = dyn_dishonorable10
				current_heir = {
					remove_trait = dishonorable1
					remove_trait = dishonorable2
					remove_trait = dishonorable3
					remove_trait = dishonorable4
					remove_trait = dishonorable5
					remove_trait = dishonorable6
					remove_trait = dishonorable7
					remove_trait = dishonorable8
					remove_trait = dishonorable9
					remove_trait = dishonorable10
					remove_trait = dyn_dishonorable1
					remove_trait = dyn_dishonorable2
					remove_trait = dyn_dishonorable3
					remove_trait = dyn_dishonorable4
					remove_trait = dyn_dishonorable5
					remove_trait = dyn_dishonorable6
					remove_trait = dyn_dishonorable7
					remove_trait = dyn_dishonorable8
					remove_trait = dyn_dishonorable9
					remove_trait = dyn_dishonorable10
				}
				if = {
					limit = {
						check_variable = { which = "dishonorable" value = 0.9 }
						NOT = { check_variable = { which = "dishonorable" value = 1.9 } }
					}
					current_heir = {
						add_trait = dyn_dishonorable1
					}
				}
				if = {
					limit = {
						check_variable = { which = "dishonorable" value = 1.9 }
						NOT = { check_variable = { which = "dishonorable" value = 2.9 } }
					}
					current_heir = {
						add_trait = dyn_dishonorable2
					}
				}
				if = {
					limit = {
						check_variable = { which = "dishonorable" value = 2.9 }
						NOT = { check_variable = { which = "dishonorable" value = 3.9 } }
					}
					current_heir = {
						add_trait = dyn_dishonorable3
					}
				}
				if = {
					limit = {
						check_variable = { which = "dishonorable" value = 3.9 }
						NOT = { check_variable = { which = "dishonorable" value = 4.9 } }
					}
					current_heir = {
						add_trait = dyn_dishonorable4
					}
				}
				if = {
					limit = {
						check_variable = { which = "dishonorable" value = 4.9 }
						NOT = { check_variable = { which = "dishonorable" value = 5.9 } }
					}
					current_heir = {
						add_trait = dyn_dishonorable5
					}
				}
				if = {
					limit = {
						check_variable = { which = "dishonorable" value = 5.9 }
						NOT = { check_variable = { which = "dishonorable" value = 6.9 } }
					}
					current_heir = {
						add_trait = dyn_dishonorable6
					}
				}
				if = {
					limit = {
						check_variable = { which = "dishonorable" value = 6.9 }
						NOT = { check_variable = { which = "dishonorable" value = 7.9 } }
					}
					current_heir = {
						add_trait = dyn_dishonorable7
					}
				}
				if = {
					limit = {
						check_variable = { which = "dishonorable" value = 7.9 }
						NOT = { check_variable = { which = "dishonorable" value = 8.9 } }
					}
					current_heir = {
						add_trait = dyn_dishonorable8
					}
				}
				if = {
					limit = {
						check_variable = { which = "dishonorable" value = 8.9 }
						NOT = { check_variable = { which = "dishonorable" value = 9.9 } }
					}
					current_heir = {
						add_trait = dyn_dishonorable9
					}
				}
				if = {
					limit = {
						check_variable = { which = "dishonorable" value = 9.9 }
					}
					current_heir = {
						add_trait = dyn_dishonorable10
					}
				}
			}
		}
	}
}

character_event = { # Contingent Territory Check Part 1
	id = Plus.307 #formerly 1000182870

	is_triggered_only = yes
	hide_window = yes

	immediate = {
		any_independent_ruler = {
			any_realm_province = {
				clr_province_flag = contingent_territory
			}
		}
		any_realm_province = {
			clr_province_flag = contingent_territory
		}
		any_independent_ruler = {
			capital_scope = { set_province_flag = contingent_territory }
		}
		capital_scope = { set_province_flag = contingent_territory }
		character_event = { id = Plus.308 }
	}
}

character_event = { # Contingent Territory Check Part 2
	id = Plus.308 #formerly 1000182871

	is_triggered_only = yes
	hide_window = yes

	trigger = {
		any_independent_ruler = {
			any_realm_province = {
				NOT = { has_province_flag = contingent_territory }
				any_neighbor_province = {
					owner = { OR = { character = PREVPREVPREV same_realm = PREVPREVPREV } }
					has_province_flag = contingent_territory
				}
			}
		}
	}
	
	immediate = {
		any_independent_ruler = {
			random_realm_province = {
				limit = {
					NOT = { has_province_flag = contingent_territory }
					any_neighbor_province = {
						owner = { OR = { character = PREVPREVPREV same_realm = PREVPREVPREV } }
						has_province_flag = contingent_territory
					}
				}
				set_province_flag = contingent_territory
			}
		}
		character_event = { id = Plus.308 }
	}
}

character_event = { # Remove Tyrant Trait on non-rulers
	id = Plus.309
	
	is_triggered_only = yes
	hide_window = yes

	trigger = {
		is_ruler = no
		OR = {
			trait = tyrant1
			trait = tyrant2
			trait = tyrant3
			trait = tyrant4
			trait = tyrant5
			trait = tyrant6
			trait = tyrant7
			trait = tyrant8
			trait = tyrant9
			trait = tyrant10
			trait = tyrant11
			trait = tyrant12
			trait = tyrant13
			trait = tyrant14
			trait = tyrant15
			trait = tyrant16
			trait = tyrant17
			trait = tyrant18
			trait = tyrant19
			trait = tyrant20
		}
	}


	weight_multiplier = {
		days = 1
	}

	immediate = {
		remove_trait = tyrant1
		remove_trait = tyrant2
		remove_trait = tyrant3
		remove_trait = tyrant4
		remove_trait = tyrant5
		remove_trait = tyrant6
		remove_trait = tyrant7
		remove_trait = tyrant8
		remove_trait = tyrant9
		remove_trait = tyrant10
		remove_trait = tyrant11
		remove_trait = tyrant12
		remove_trait = tyrant13
		remove_trait = tyrant14
		remove_trait = tyrant15
		remove_trait = tyrant16
		remove_trait = tyrant17
		remove_trait = tyrant18
		remove_trait = tyrant19
		remove_trait = tyrant20
	}
}

character_event = { # Copies empire's Crown Laws to de jure kingdoms
	id = Plus.310
	desc = "EVTDESC_Plus_310"
	picture = "GFX_evt_council"

	is_triggered_only = yes
	
	only_rulers = yes

	trigger = {	
		primary_title = { tier = EMPEROR }
		any_demesne_title = {
			tier = KING
			empire = { holder_scope = { character = ROOT } }
			OR = {
				AND = {
					empire = { has_law = investiture_law_0 }
					NOT = { has_law = investiture_law_0 }
				}
				AND = {
					empire = { has_law = investiture_law_1 }
					NOT = { has_law = investiture_law_1 }
				}
				AND = {
					empire = { has_law = crown_authority_0 }
					NOT = { has_law = crown_authority_0 }
				}
				AND = {
					empire = { has_law = crown_authority_1 }
					NOT = { has_law = crown_authority_1 }
				}
				AND = {
					empire = { has_law = crown_authority_2 }
					NOT = { has_law = crown_authority_2 }
				}
				AND = {
					empire = { has_law = crown_authority_3 }
					NOT = { has_law = crown_authority_3 }
				}
				AND = {
					empire = { has_law = crown_authority_4 }
					NOT = { has_law = crown_authority_4 }
				}
			}
		}
	}

	weight_multiplier = {
		days = 1
	}

	option = {
		name = "EXCELLENT"
		set_character_flag = centralize_without_penalties
		any_demesne_title = {
			limit = {
				tier = KING
				empire = { holder_scope = { character = ROOT } }
				OR = {
					AND = {
						empire = { has_law = investiture_law_0 }
						NOT = { has_law = investiture_law_0 }
					}
					AND = {
						empire = { has_law = investiture_law_1 }
						NOT = { has_law = investiture_law_1 }
					}
					AND = {
						empire = { has_law = crown_authority_0 }
						NOT = { has_law = crown_authority_0 }
					}
					AND = {
						empire = { has_law = crown_authority_1 }
						NOT = { has_law = crown_authority_1 }
					}
					AND = {
						empire = { has_law = crown_authority_2 }
						NOT = { has_law = crown_authority_2 }
					}
					AND = {
						empire = { has_law = crown_authority_3 }
						NOT = { has_law = crown_authority_3 }
					}
					AND = {
						empire = { has_law = crown_authority_4 }
						NOT = { has_law = crown_authority_4 }
					}
				}
			}
			if = {
				limit = {
					empire = { has_law = crown_authority_0 }
				}
				add_law = crown_authority_0
			}
			if = {
				limit = {
					empire = { has_law = crown_authority_1 }
				}
				add_law = crown_authority_1
			}
			if = {
				limit = {
					empire = { has_law = crown_authority_2 }
				}
				add_law = crown_authority_2
			}
			if = {
				limit = {
					empire = { has_law = crown_authority_3 }
				}
				add_law = crown_authority_3
			}
			if = {
				limit = {
					empire = { has_law = crown_authority_4 }
				}
				add_law = crown_authority_4
			}
			if = {
				limit = {
					empire = { has_law = investiture_law_0 }
				}
				add_law = investiture_law_0
			}
			if = {
				limit = {
					empire = { has_law = investiture_law_1 }
				}
				add_law = investiture_law_1
			}
		}
		clr_character_flag = centralize_without_penalties
	}
}

character_event = { # AI Spouse finder
	id = Plus.312
	is_triggered_only = yes
	hide_window = yes
	
	ai = yes
	min_age = 18
	max_age = 60
	capable_only = yes
	prisoner = no

	trigger = {
		is_married = no
		is_consort = no
		is_betrothed = no
		is_patrician = no
		is_ill = no
		prisoner = no
		can_marry = yes
		age = 18
		OR = {
			is_female = no
			NOT = { age = 40 }
		}
		NOT = { age = 60 }
		NOT = { trait = eunuch }
		NOT = { trait = celibate }
		NOT = { trait = infirm }
		NOT = { trait = incapable }
		NOT = { trait = in_hiding }
		mercenary = no
		ai = yes
		OR = {
			liege = { ai = no }
			is_ruler = yes
		}
		OR = {
			is_ruler = yes
			is_female = no
		}
		OR = {
			is_ruler = no
			demesne_size = 1
		}
		OR = {
			is_ruler = yes
			liege = { NOT = { is_close_relative = ROOT } }
		}
		OR = {
			is_ruler = no
			primary_title = { holy_order = no }
		}
		OR = {
			tier = BARON
			AND = {
				is_feudal = no
				is_tribal = no
			}
			is_ruler = no
		}
		treasury = 10
	}

	weight_multiplier = {
		days = 1
		modifier = {
			factor = 10
			has_ambition = obj_get_married
		}
	}

	immediate = {
		treasury = -10
		if = {
			limit = { is_female = no }
			if = {
				limit = { is_ruler = no }
				liege = {
					#go for younger women first (want to have kids)
					random_courtier = {
						limit = {
							is_adult = yes
							NOT = { age = 20 }
							prisoner = no
							is_married = no
							is_betrothed = no
							is_consort = no
							can_marry = yes
							is_female = yes
							is_ruler = no
							is_primary_heir = no
							fertility = 0.33
							NOT = { trait = eunuch }
							NOT = { trait = celibate }
							NOT = { trait = infirm }
							NOT = { trait = incapable }
							NOT = { has_global_flag = spouse_found }
							liege = { NOT = { is_close_relative = PREV } }
							NOT = { is_close_relative = ROOT }
						}
						add_spouse = ROOT
						set_global_flag = spouse_found
					}
					random_courtier = {
						limit = {
							age = 20
							NOT = { age = 30 }
							prisoner = no
							is_married = no
							is_betrothed = no
							is_consort = no
							can_marry = yes
							is_female = yes
							is_ruler = no
							is_primary_heir = no
							fertility = 0.33
							NOT = { trait = eunuch }
							NOT = { trait = celibate }
							NOT = { trait = infirm }
							NOT = { trait = incapable }
							NOT = { has_global_flag = spouse_found }
							liege = { NOT = { is_close_relative = PREV } }
							NOT = { is_close_relative = ROOT }
						}
						add_spouse = ROOT
						set_global_flag = spouse_found
					}
					if = {
						limit = {
							NOT = { has_global_flag = spouse_found }
						}
						liege = {
							create_character = {
								random_traits = yes
								dynasty = random
								female = yes
								age = 17
							}
							new_character = {
								add_spouse = ROOT
								if = {
									limit = { religion_group = indian_group }
									add_trait = kshatriya
									character_event = { id = RoI.30121 }
								}
							}
						}
						set_global_flag = spouse_found
					}
				}
			}
			if = {
				limit = { is_ruler = yes }
				#go for younger women first (want to have kids)
				random_courtier = {
					limit = {
						is_adult = yes
						NOT = { age = 20 }
						prisoner = no
						is_married = no
						is_betrothed = no
						is_consort = no
						can_marry = yes
						is_female = yes
						is_ruler = no
						is_primary_heir = no
						fertility = 0.33
						NOT = { trait = eunuch }
						NOT = { trait = celibate }
						NOT = { trait = infirm }
						NOT = { trait = incapable }
						NOT = { is_close_relative = ROOT }
						NOT = { has_global_flag = spouse_found }
					}
					add_spouse = ROOT
					set_global_flag = spouse_found
				}
				random_courtier = {
					limit = {
						age = 20
						NOT = { age = 30 }
						prisoner = no
						is_married = no
						is_betrothed = no
						is_consort = no
						can_marry = yes
						is_female = yes
						is_ruler = no
						is_primary_heir = no
						fertility = 0.33
						NOT = { trait = eunuch }
						NOT = { trait = celibate }
						NOT = { trait = infirm }
						NOT = { trait = incapable }
						NOT = { is_close_relative = ROOT }
						NOT = { has_global_flag = spouse_found }
					}
					add_spouse = ROOT
					set_global_flag = spouse_found
				}
				if = {
					limit = {
						NOT = { has_global_flag = spouse_found }
					}
					create_character = {
						random_traits = yes
						dynasty = random
						female = yes
						age = 17
					}
					new_character = {
						add_spouse = ROOT
						if = {
							limit = { religion_group = indian_group }
							add_trait = kshatriya
							character_event = { id = RoI.30121 }
						}
					}
					set_global_flag = spouse_found
				}
			}
		}
		if = {
			limit = {
				is_female = yes
				is_ruler = yes
			}
			random_courtier = {
				limit = {
					is_adult = yes
					NOT = { age = 30 }
					prisoner = no
					is_married = no
					is_betrothed = no
					is_consort = no
					can_marry = yes
					is_female = no
					is_ruler = no
					is_primary_heir = no
					NOT = { trait = eunuch }
					NOT = { trait = celibate }
					NOT = { trait = infirm }
					NOT = { trait = incapable }
					NOT = { is_close_relative = ROOT }
					NOT = { has_global_flag = spouse_found }
				}
				add_spouse = ROOT
				set_global_flag = spouse_found
			}	
			if = {
				limit = {
					NOT = { has_global_flag = spouse_found }
				}
				create_character = {
					random_traits = yes
					dynasty = random
					age = 20
				}
				new_character = {
					add_spouse = ROOT
					if = {
						limit = { religion_group = indian_group }
						add_trait = kshatriya
						character_event = { id = RoI.30121 }
					}
				}
				set_global_flag = spouse_found
			}			
		}
		clr_global_flag = spouse_found
	}
}

character_event = { # Remove Loyalist & Neutral
	id = Plus.314
	
	is_triggered_only = yes
	hide_window = yes

	trigger = {
		OR = {
			trait = loyalist
			trait = neutral
		}
		war = no
		OR = {
			independent = yes
			liege = { character = ROOT }
			liege = { war = no }
		}
	}

	weight_multiplier = {
		days = 1
	}

	immediate = {
		remove_trait = loyalist
		remove_trait = neutral
	}
}

character_event = { # Remove Rebel and set opinion modifiers
	id = Plus.315
	
	hide_window = yes

	trigger = {
		trait = rebel
		war = no
		OR = {
			independent = yes
			liege = { character = ROOT }
			liege = { war = no }
		}
	}

	mean_time_to_happen = {
		days = 1
	}

	immediate = {
		remove_trait = rebel
		if = {
			limit = {
				any_playable_ruler = {
					NOT = { is_liege_of = ROOT }
					reverse_has_opinion_modifier = {
						who = ROOT
						modifier = revolting_against
					}
					higher_tier_than = ROOT
				}
			}
			random_playable_ruler = {
				limit = {
					NOT = { is_liege_of = ROOT }
					reverse_has_opinion_modifier = {
						who = ROOT
						modifier = revolting_against
					}
					higher_tier_than = ROOT
				}
				reverse_remove_opinion = {
					who = ROOT
					modifier = revolting_against
				}
				ROOT = { set_defacto_liege = PREV }
			}
		}
	}
}

character_event = { # Independent baron opinion modifiers
	id = Plus.316

	is_triggered_only = yes
	hide_window = yes

	trigger = {
		tier = baron
		independent = yes
		is_ruler = yes
		is_patrician = no
		controls_religion = no
		mercenary = no
		primary_title = { holy_order = no }
		war = no
		ai = yes
	}

	weight_multiplier = {
		days = 1
	}

	immediate = {
		primary_title = {
			location = {
				county = {
					holder_scope = {
						ROOT = {
							remove_opinion = {
								who = PREV
								modifier = opinion_independent
							}
							reverse_remove_opinion = {
								who = PREV
								modifier = opinion_independent
							}
							set_defacto_liege = PREV
						}
					}
				}
			}
		}
	}
}

character_event = { # AI Non-holy orders surrender baronies in different realms
	id = Plus.317
	
	is_triggered_only = yes
	hide_window = yes
	
	only_rulers = yes

	trigger = {
		is_ruler = yes
		is_patrician = no
		controls_religion = no
		mercenary = no
		war = no
		ai = yes
		NOT = { any_liege = { ai = no } }
		primary_title = { holy_order = no }
		any_demesne_title = {
			tier = baron
			dejure_liege_title = {
				holder_scope = {
					NOT = { same_realm = ROOT }
				}
			}
		}
	}

	weight_multiplier = {
		days = 1
	}

	immediate = {
		any_demesne_title = {
			limit = {
				tier = baron
				dejure_liege_title = {
					holder_scope = {
						NOT = { same_realm = ROOT }
					}
				}
			}
			dejure_liege_title = {
				holder_scope = {
					set_character_flag = is_holder
					ROOT = {
						random_demesne_title = {
							limit = {
								tier = baron
								dejure_liege_title = {
									holder_scope = {
										has_character_flag = is_holder
									}
								}
							}
							gain_title = PREVPREV
						}
					}
					clr_character_flag = is_holder
				}
			}
		}
	}
}

character_event = { # Add Bloodlust trait
	id = Plus.319
	
	hide_window = yes
	is_triggered_only = yes

	min_age = 16
	capable_only = yes
	only_rulers = yes
	ai = yes

	trigger = {
		OR = {
			culture = mongol
			culture = nahuatl
		}
		OR = {
			religion = tengri_pagan
			religion = aztec
			has_landed_title = e_timurids
		}
		ai = yes
		NOT = { trait = bloodlust }
		primary_title = {
			OR = {
				title = e_golden_horde
				title = e_il-khanate
				title = e_timurids
				title = e_mongol_empire
				title = e_mexikha
			}
		}
		OR = {
			AND = {
				has_global_flag = golden_horde_arrival
				NOT = { has_global_flag = golden_horde_converts }
			}
			AND = {
				has_global_flag = il_khanate_arrival
				NOT = { has_global_flag = il_khanate_converts }
			}
			AND = {
				has_global_flag = aztec_arrival
				NOT = { has_global_flag = aztecs_defeated }
			}
			AND = {
				has_global_flag = timurid_arrival
				NOT = { e_timurids = { has_holder = no } }
			}
		}	
	}
	
	immediate = {
		add_trait = bloodlust
	}	

	weight_multiplier = {
		days = 1
	}
}

character_event = { # Remove Bloodlust trait
	id = Plus.320

	hide_window = yes
	is_triggered_only = yes
	
	trigger = {		
		NOT = { has_global_flag = shattered_realm }
		trait = bloodlust
		OR = {
			ai = no
			independent = no
			trait = incapable
			AND = {
				OR = {
					culture = mongol
					culture = nahuatl
				}
				NOT = { 
					OR = {
						religion = tengri_pagan 
						religion = aztec
						has_landed_title = e_timurids
					}
				}
				ai = yes
			}
		}
		OR = {
			has_global_flag = golden_horde_arrival
			has_global_flag = il_khanate_arrival
			has_global_flag = aztec_arrival
		}
	}
	
	immediate = {
		remove_trait = bloodlust
	}	

	weight_multiplier = {
		days = 1
	}
	
}

character_event = { # Remove Favored Son trait on death
	id = Plus.321

	hide_window = yes
	is_triggered_only = yes

	trigger = {
		any_child = { trait = favored_son }
	}

	immediate = {
		any_child = {
			if = {
				limit = {trait = favored_son}
				remove_trait = favored_son
			}
		}
	}
}

character_event = { # Startup event
	id = Plus.322

	hide_window = yes
	is_triggered_only = yes

	trigger = {
		ai = no
		NOT = { has_global_flag = startup }
	}

	weight_multiplier = {
		days = 1
	}

	immediate = {
		set_global_flag = startup
		
		# remove undesireable claims and perform genetics check
		set_character_flag = start_of_game_character
		character_event = { id = Plus.323 } #remove undesirable claims
		if = {
			limit = { NOT = { has_character_flag = genetics_check } }
			character_event = { id = Plus.324 } # pass on traits they would have had at birth
		}
		any_independent_ruler = {
			set_character_flag = start_of_game_character
			character_event = { id = Plus.323 } #remove undesirable claims
			if = {
				limit = { NOT = { has_character_flag = genetics_check } }
				character_event = { id = Plus.324 } # pass on traits they would have had at birth
			}
			any_realm_character = {
				set_character_flag = start_of_game_character
				character_event = { id = Plus.323 } #remove undesirable claims
				if = {
					limit = { NOT = { has_character_flag = genetics_check } }
					character_event = { id = Plus.324 } # pass on traits they would have had at birth
				}
			}
		}
		
		# give crowned trait to all existing kings and emperors
		if = {
			limit = {
				higher_real_tier_than = DUKE
				is_adult = yes
				is_feudal = yes
				is_landed = yes
				has_horde_culture = no
				primary_title = {
					is_tribal_type_title = no
				}
				NOT = {
					trait = crowned
					trait = uncrowned
					has_landed_title = e_hre
					has_landed_title = e_karling
					AND = {
						has_landed_title = e_byzantium
						religion = orthodox
					}
				}
			}
			add_trait = crowned
		}
		any_playable_ruler = {
			limit = {
				higher_real_tier_than = DUKE
				is_adult = yes
				is_feudal = yes
				is_landed = yes
				has_horde_culture = no
				primary_title = {
					is_tribal_type_title = no
				}
				NOT = {
					trait = crowned
					trait = uncrowned
					has_landed_title = e_hre
					has_landed_title = e_karling
					AND = {
						has_landed_title = e_byzantium
						religion = orthodox
					}
				}
			}
			add_trait = crowned
		}
		
		# give uncrowned trait to everyone else
		if = {
			limit = {
				higher_real_tier_than = DUKE
				is_feudal = yes
				is_landed = yes
				has_horde_culture = no
				primary_title = {
					is_tribal_type_title = no
				}
				NOT = {
					trait = crowned
					trait = uncrowned
					trait = crowned_by_pope
					trait = strong_basileus
					trait = weak_basileus
				}
			}
			add_trait = uncrowned
		}
		any_playable_ruler = {
			limit = {
				higher_real_tier_than = DUKE
				is_feudal = yes
				is_landed = yes
				has_horde_culture = no
				primary_title = {
					is_tribal_type_title = no
				}
				NOT = {
					trait = crowned
					trait = uncrowned
					trait = crowned_by_pope
					trait = strong_basileus
					trait = weak_basileus
				}
			}
			add_trait = uncrowned
		}
		any_playable_ruler = { # Add the modifier to allow to start shattered realm to OTHER players
			limit = {
				ai = no
			}
			set_character_flag = shattered_realm_mod_added
			add_character_modifier = {
				name = shattered_realm_mod
				duration = 7
				hidden = yes
				inherit = yes
			}
		}
		if = { # Add the modifier to allow to start shattered realm for this player
			limit = {
				ai = no
			}
			set_character_flag = shattered_realm_mod_added
			add_character_modifier = {
				name = shattered_realm_mod
				duration = 7
				hidden = yes
				inherit = yes
			}	
		}
	}
}

character_event = { # Remove unwanted claims
	id = Plus.323 #formerly 1000182863

	hide_window = yes
	is_triggered_only = yes

	trigger = {
		OR = {
			any_claim = { has_holder = no }
			AND = {
				is_female = yes
				is_ruler = no
				has_claim = d_aquitaine
			}
			AND = {
				is_female = yes
				is_ruler = no
				has_claim = d_poitou
			}
			AND = {
				is_female = yes
				is_ruler = no
				has_claim = k_norway
			}
			AND = {
				has_claim = k_germany
				NOT = { year = 900 }
			}
			AND = {
				has_claim = k_france
				NOT = { year = 900 }
			}
			AND = {
				has_claim = k_italy
				NOT = { year = 900 }
			}
			AND = {
				has_claim = k_bavaria
				NOT = { year = 900 }
			}
			AND = {
				has_claim = k_lotharingia
				NOT = { year = 900 }
			}
			AND = {
				has_claim = k_burgundy
				NOT = { year = 900 }
			}
		}
	}

	immediate = {
		if = {
			limit = { is_female = yes is_ruler = no has_claim = d_aquitaine }
			remove_claim = d_aquitaine
		}
		if = {
			limit = { is_female = yes is_ruler = no has_claim = d_poitou }
			remove_claim = d_poitou
		}
		if = {
			limit = { is_female = yes is_ruler = no has_claim = k_norway }
			remove_claim = k_norway
		}
		if = {
			limit = { is_female = yes has_claim = d_aquitaine }
			remove_claim = d_aquitaine
		}
		if = {
			limit = { NOT = { year = 900 } has_claim = k_germany }
			remove_claim = k_germany
		}
		if = {
			limit = { NOT = { year = 900 } has_claim = k_france }
			remove_claim = k_france
		}
		if = {
			limit = { NOT = { year = 900 } has_claim = k_burgundy }
			remove_claim = k_burgundy
		}
		if = {
			limit = { NOT = { year = 900 } has_claim = k_lotharingia }
			remove_claim = k_lotharingia
		}
		if = {
			limit = { NOT = { year = 900 } has_claim = k_italy }
			remove_claim = k_italy
		}
		if = {
			limit = { NOT = { year = 900 } has_claim = k_bavaria }
			remove_claim = k_bavaria
		}
		random_claim = {
			limit = { has_holder = no }
			remove_claim = ROOT
		}
		random_claim = {
			limit = { has_holder = no }
			remove_claim = ROOT
		}
		random_claim = {
			limit = { has_holder = no }
			remove_claim = ROOT
		}
		random_claim = {
			limit = { has_holder = no }
			remove_claim = ROOT
		}
		random_claim = {
			limit = { has_holder = no }
			remove_claim = ROOT
		}
		random_claim = {
			limit = { has_holder = no }
			remove_claim = ROOT
		}
		random_claim = {
			limit = { has_holder = no }
			remove_claim = ROOT
		}
		random_claim = {
			limit = { has_holder = no }
			remove_claim = ROOT
		}
		random_claim = {
			limit = { has_holder = no }
			remove_claim = ROOT
		}
		random_claim = {
			limit = { has_holder = no }
			remove_claim = ROOT
		}
		random_claim = {
			limit = { has_holder = no }
			remove_claim = ROOT
		}
		random_claim = {
			limit = { has_holder = no }
			remove_claim = ROOT
		}
		random_claim = {
			limit = { has_holder = no }
			remove_claim = ROOT
		}
	}
}

character_event = { # Passes on various traits at birth (plus father/uncle/aunt opinion fix)
	id = Plus.324

	is_triggered_only = yes
	hide_window = yes

	trigger = {
		NOT = { has_character_flag = genetics_check }
	}

	immediate = {
		set_character_flag = genetics_check
		set_character_flag = yehudi_check
		
		#add flag for seljuk sons
		if = {
			limit = {
				is_female = no
				father_even_if_dead = {
					OR = {
						has_character_flag = horde_seljuk
						has_character_flag = seljuk_himself
					}
				}
			}
			set_character_flag = horde_seljuk2
		}

		#chance for genius or quick
		if = {
			limit = {
				NOT = { trait = genius }
				NOT = { trait = quick }
				NOT = { trait = slow }
				NOT = { trait = imbecile }
			}
			if = {
				limit = {
					OR = {
						mother_even_if_dead = { trait = genius }
						mother_even_if_dead = { trait = quick }
					}
					OR = {
						father_even_if_dead = { trait = genius }
						father_even_if_dead = { trait = quick }
					}
					NOT = {
						mother_even_if_dead = { trait = imbecile }
						mother_even_if_dead = { trait = slow }
						father_even_if_dead = { trait = imbecile}
						father_even_if_dead = { trait = slow }
					}
				}
				random_list = {
					70 = { }
					20 = { add_trait = quick }
					10 = { add_trait = genius }
				}
			}
			if = {
				limit = {
					OR = {
						mother_even_if_dead = { trait = genius }
						mother_even_if_dead = { trait = quick }
						father_even_if_dead = { trait = genius }
						father_even_if_dead = { trait = quick }
					}
					OR = {
						NOT = {
							mother_even_if_dead = { trait = genius }
							mother_even_if_dead = { trait = quick }
						}
						NOT = {
							father_even_if_dead = { trait = genius }
							father_even_if_dead = { trait = quick }
						}
					}
					NOT = {
						mother_even_if_dead = { trait = imbecile }
						mother_even_if_dead = { trait = slow }
						father_even_if_dead = { trait = imbecile}
						father_even_if_dead = { trait = slow }
					}
				}
				random_list = {
					85 = { }
					12 = { add_trait = quick }
					3 = { add_trait = genius }
				}
			}
		}

		#chance for slow or imbecile
		if = {
			limit = {
				NOT = { trait = genius }
				NOT = { trait = quick }
				NOT = { trait = slow }
				NOT = { trait = imbecile }
			}
			if = {
				limit = {
					OR = {
						mother_even_if_dead = { trait = imbecile }
						mother_even_if_dead = { trait = slow }
					}
					OR = {
						father_even_if_dead = { trait = imbecile }
						father_even_if_dead = { trait = slow }
					}
					NOT = {
						mother_even_if_dead = { trait = genius }
						mother_even_if_dead = { trait = quick }
						father_even_if_dead = { trait = genius }
						father_even_if_dead = { trait = quick }
					}
				}
				random_list = {
					70 = { }
					20 = { add_trait = slow }
					10 = { add_trait = imbecile }
				}
			}
			if = {
				limit = {
					OR = {
						mother_even_if_dead = { trait = imbecile }
						mother_even_if_dead = { trait = slow }
						father_even_if_dead = { trait = imbecile }
						father_even_if_dead = { trait = slow }
					}
					OR = {
						NOT = {
							mother_even_if_dead = { trait = imbecile }
							mother_even_if_dead = { trait = slow }
						}
						NOT = {
							father_even_if_dead = { trait = imbecile }
							father_even_if_dead = { trait = slow }
						}
					}
					NOT = {
						mother_even_if_dead = { trait = genius }
						mother_even_if_dead = { trait = quick }
						father_even_if_dead = { trait = genius }
						father_even_if_dead = { trait = quick }
					}
				}
				random_list = {
					85 = { }
					12 = { add_trait = slow }
					3 = { add_trait = imbecile }
				}
			}
		}
		
		#pass on divine blood
		if = {
			limit = {
				NOT = { trait = divine_blood }
				father_even_if_dead = {
					dynasty = ROOT
					trait = divine_blood
				}
			}
			add_trait = divine_blood
		}
		if = {
			limit = {
				NOT = { trait = divine_blood }
				mother_even_if_dead = {
					dynasty = ROOT
					trait = divine_blood
				}
			}
			add_trait = divine_blood
		}
		
		#pass on yehudi trait
		if = {
			limit = {
				has_character_flag = start_of_game_character
				religion_group = jewish_group
			}
			add_trait = yehudi
		}
		if = {
			limit = { 
				mother_even_if_dead = { trait = yehudi }
			}
			add_trait = yehudi
		}
		
		#chance of being barren or infertile
		if = {
			limit = { trait = inbred }
			random_list = {
				20 = { }
				50 = {
					add_character_modifier = {
						name = infertile
						hidden = yes
						duration = -1
					}
				}
				30 = {
					add_character_modifier = {
						name = barren
						hidden = yes
						duration = -1
					}
				}
			}
		}
		if = {
			limit = {
				trait = weak
				NOT = { has_character_modifier = infertile }
				NOT = { has_character_modifier = barren }
			}
			random_list = {
				70 = { }
				25 = {
					add_character_modifier = {
						name = infertile
						hidden = yes
						duration = -1
					}
				}
				15 = {
					add_character_modifier = {
						name = barren
						hidden = yes
						duration = -1
					}
				}
			}
		}
		if = {
			limit = {
				NOT = { trait = weak }
				NOT = { trait = strong }
				NOT = { has_character_modifier = infertile }
				NOT = { has_character_modifier = barren }
			}
			random_list = {
				85 = { }
				12 = {
					add_character_modifier = {
						name = infertile
						hidden = yes
						duration = -1
					}
				}
				3 = {
					add_character_modifier = {
						name = barren
						hidden = yes
						duration = -1
					}
				}
			}
		}

		#add indian caste if not possessed
		if = {
			limit = {
				religion_group = indian_group
				NOT = {
					trait = brahmin
					trait = kshatriya
					trait = vaishya
				}
			}
			if = {
				limit = {
					is_feudal = yes
				}
				add_trait = kshatriya
			}
			if = {
				limit = {
					is_feudal = no
					OR = {
						is_theocracy = yes
						is_priest = yes
					}
				}
				add_trait = brahmin
			}
			if = {
				limit = {
					is_feudal = no
					is_theocracy = no
					is_priest = no
				}
				add_trait = vaishya
			}
		}
		
		#add opinion for father & uncle & aunts & cousins
		father_even_if_dead = {
			reverse_opinion = { who = ROOT modifier = opinion_father_fix years = 100 }
			any_sibling = {
				limit = { is_female = no }
				reverse_opinion = { who = ROOT modifier = opinion_uncle_fix years = 100 }
			}
			any_sibling = {
				limit = { is_female = yes }
				reverse_opinion = { who = ROOT modifier = opinion_aunt years = 100 }
			}
			any_sibling = {
				any_child = {
					reverse_opinion = { who = ROOT modifier = opinion_cousin years = 100 }
					opinion = { who = ROOT modifier = opinion_cousin years = 100 }
				}
			}
		}
		mother_even_if_dead = {
			any_sibling = {
				limit = { is_female = no }
				reverse_opinion = { who = ROOT modifier = opinion_uncle_fix years = 100 }
			}
			any_sibling = {
				limit = { is_female = yes }
				reverse_opinion = { who = ROOT modifier = opinion_aunt years = 100 }
			}
			any_sibling = {
				any_child = {
					reverse_opinion = { who = ROOT modifier = opinion_cousin years = 100 }
					opinion = { who = ROOT modifier = opinion_cousin years = 100 }
				}
			}
		}		
	}
}

character_event = { # Removes Just trait
	id = Plus.325 #formerly 1000182865
	desc = "EVTDESC_Plus_325"
	picture = "GFX_evt_emissary"
	
	is_triggered_only = yes

	trigger = {
		trait = just
	}

	immediate = {
		remove_trait = just
	}

	option = {
		name = "EVTOPTA_Plus_325"
		tooltip = { remove_trait = just }
	}
}

character_event = { # Byzantium is reclaimed by an Orthodox/Hellenic ruler
	id = Plus.326
	desc = "EVTDESC_Plus_326"
	picture = "GFX_evt_council"
	
	only_rulers = yes

	trigger = {
		NOT = { has_global_flag = shattered_realm }
		culture_group = byzantine
		war = no
		independent = yes
		OR = {
			religion = orthodox
			religion = bogomilist
			religion = nestorian
			religion = monothelite
			religion = iconoclast
			religion = hellenic_pagan
		}
		c_byzantion = { holder_scope = { same_realm = ROOT } }
		NOT = { tier = emperor }
		e_byzantium = { has_holder = no }
		e_roman_empire = { has_holder = no }
	}

	mean_time_to_happen = {
		days = 1
	}

	option = {
		name = "EVTOPTA_Plus_326"
		set_character_flag = centralize_without_penalties
		e_byzantium = {
			hidden_tooltip = {
				revoke_law = investiture_law_0
				revoke_law = investiture_law_1
				add_law = crown_authority_2
				add_law = city_tax_0
				add_law = temple_tax_0
				add_law = tax_privileges_1
				add_law = levy_privileges_1
				add_law = council_privileges_0
				add_law = feudal_tax_0
				add_law = succ_primogeniture
				add_law = cognatic_succession
			}
			gain_title = ROOT
		}
		clr_character_flag = centralize_without_penalties
	}
}

character_event = { # Convert Latin Empire to Byzantine Empire if the holder is no longer Catholic
	id = Plus.327
	desc = "EVTDESC_Plus_327"
	picture = "GFX_evt_council"
	
	only_rulers = yes

	trigger = {
		has_landed_title = e_latin_empire
		NOT = {
			OR = {
				religion = catholic
				religion = cathar
				religion = fraticelli
				religion = waldensian
				religion = lollard
			}
		}
		war = no
	}

	mean_time_to_happen = {
		days = 1
	}

	option = {
		name = "OK"
		if = {
			limit = {
				OR = {
					religion = orthodox
					religion = bogomilist
					religion = nestorian
					religion = monothelite
					religion = iconoclast
					religion = hellenic_pagan
				}
				e_byzantium = { has_holder = no }
			}
			set_character_flag = centralize_without_penalties
			e_byzantium = {
				hidden_tooltip = {
					copy_title_laws = e_latin_empire
				}
				gain_title = ROOT
			}
			clr_character_flag = centralize_without_penalties
			e_latin_empire = {
				any_claimant = {
					if = {
						limit = { has_weak_claim = PREV }
						add_weak_pressed_claim = e_byzantium
					}
					if = {
						limit = { has_strong_claim = PREV }
						add_pressed_claim = e_byzantium
					}
					remove_claim = PREV
				}
				destroy_landed_title = yes
			}
		}
		e_latin_empire = {
			destroy_landed_title = yes
		}
		hidden_tooltip = {
			k_papal_state = { holder_scope = { character_event = { id = Plus.307 } } }
			any_vassal = {
				limit = { NOT = { has_character_flag = considered_for_independence } }
				character_event = { id = Plus.430 days = 3 }
			}
		}
	}
}

character_event = { # Byzantium Auto-Destroy Mechanic. Destroys Byzantium if the title holder is not Orthodox or Hellenic
	id = Plus.328
	desc = "EVTDESC_Plus_328"
	picture = "GFX_evt_council"
	
	only_rulers = yes

	trigger = {
		has_landed_title = e_byzantium
		NOT = {
			religion = orthodox
			religion = bogomilist
			religion = nestorian
			religion = monothelite
			religion = iconoclast
			religion = hellenic_pagan
		}
		war = no
	}

	mean_time_to_happen = {
		days = 1
	}

	option = {
		name = "OK"
		if = {
			limit = {
				OR = {
					religion = catholic
					religion = cathar
					religion = fraticelli
					religion = waldensian
					religion = lollard
				}
				e_latin_empire = { has_holder = no }
			}
			set_character_flag = centralize_without_penalties
			e_latin_empire = {
				hidden_tooltip = {
					copy_title_laws = e_byzantium
				}
				gain_title = ROOT
			}
			e_byzantium = {
				any_claimant = {
					if = {
						limit = { has_weak_claim = PREV }
						add_weak_pressed_claim = e_latin_empire
					}
					if = {
						limit = { has_strong_claim = PREV }
						add_pressed_claim = e_latin_empire
					}
					remove_claim = PREV
				}
			}
			clr_character_flag = centralize_without_penalties
		}
		e_byzantium = {
			destroy_landed_title = yes
		}
		hidden_tooltip = {
			k_papal_state = { holder_scope = { character_event = { id = Plus.307 } } }
			any_vassal = {
				limit = { NOT = { has_character_flag = considered_for_independence } }
				character_event = { id = Plus.430 days = 3 }
			}
		}
	}
}

character_event = { # Norman conquest of England cleanup - Victory: France loses claims
	id = Plus.329

	hide_window = yes
	is_triggered_only = yes
	
	only_rulers = yes
	
	trigger = {
		has_landed_title = k_france
		has_global_flag = witan_abolished
		NOT = { has_global_flag = norman_cleanup_done }
		year = 1066
		NOT = { year = 1075 }
		OR = {
			has_claim = c_cornwall
			has_claim = c_devon
			has_claim = c_somerset
			has_claim = c_dorset
			has_claim = c_wiltshire
			has_claim = c_winchester
			has_claim = c_sussex
			has_claim = c_surrey
			has_claim = c_kent
			has_claim = c_gloucester
			has_claim = c_hereford
			has_claim = c_shrewsbury
			has_claim = c_worcester
			has_claim = c_warwick
			has_claim = c_leicester
			has_claim = c_lincoln
			has_claim = d_canterbury
			has_claim = d_somerset
			has_claim = d_cornwall
			has_claim = d_gloucester
			has_claim = d_hereford
			has_claim = d_york
			has_claim = k_england
			has_claim = c_eu
			has_claim = c_arques
			has_claim = c_evreux
			has_claim = c_maine
			has_claim = c_avranches
			has_claim = d_normandy
		}
	}
	
	weight_multiplier = {
		days = 1
	}
	
	immediate = {
		if = {
			limit = { has_claim = c_cornwall }
			remove_claim = c_cornwall
		}
		if = {
			limit = { has_claim = c_devon }
			remove_claim = c_devon
		}
		if = {
			limit = { has_claim = c_somerset }
			remove_claim = c_somerset
		}
		if = {
			limit = { has_claim = c_dorset }
			remove_claim = c_dorset
		}
		if = {
			limit = { has_claim = c_wiltshire }
			remove_claim = c_wiltshire
		}
		if = {
			limit = { has_claim = c_winchester }
			remove_claim = c_winchester
		}
		if = {
			limit = { has_claim = c_sussex }
			remove_claim = c_sussex
		}
		if = {
			limit = { has_claim = c_surrey }
			remove_claim = c_surrey
		}
		if = {
			limit = { has_claim = c_kent }
			remove_claim = c_kent
		}
		if = {
			limit = { has_claim = c_gloucester }
			remove_claim = c_gloucester
		}
		if = {
			limit = { has_claim = c_hereford }
			remove_claim = c_hereford
		}
		if = {
			limit = { has_claim = c_shrewsbury }
			remove_claim = c_shrewsbury
		}
		if = {
			limit = { has_claim = c_worcester }
			remove_claim = c_worcester
		}
		if = {
			limit = { has_claim = c_warwick }
			remove_claim = c_warwick
		}
		if = {
			limit = { has_claim = c_leicester }
			remove_claim = c_leicester
		}
		if = {
			limit = { has_claim = c_lincoln }
			remove_claim = c_lincoln
		}
		if = {
			limit = { has_claim = d_canterbury }
			remove_claim = d_canterbury
		}
		if = {
			limit = { has_claim = d_somerset }
			remove_claim = d_somerset
		}
		if = {
			limit = { has_claim = d_cornwall }
			remove_claim = d_cornwall
		}
		if = {
			limit = { has_claim = d_gloucester }
			remove_claim = d_gloucester
		}
		if = {
			limit = { has_claim = d_hereford }
			remove_claim = d_hereford
		}
		if = {
			limit = { has_claim = d_york }
			remove_claim = d_york
		}
		if = {
			limit = { has_claim = k_england }
			remove_claim = k_england
		}
		if = {
			limit = { has_claim = c_eu }
			remove_claim = c_eu
		}
		if = {
			limit = { has_claim = c_arques }
			remove_claim = c_arques
		}
		if = {
			limit = { has_claim = c_evreux }
			remove_claim = c_evreux
		}
		if = {
			limit = { has_claim = c_maine }
			remove_claim = c_maine
		}
		if = {
			limit = { has_claim = c_avranches }
			remove_claim = c_avranches
		}
		if = {
			limit = { has_claim = d_normandy }
			remove_claim = d_normandy
		}
		set_global_flag = norman_cleanup_done
	}
}

character_event = { # Norman conquest of England cleanup - Loss: English provinces (back) to England
	id = Plus.330

	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		has_landed_title = d_normandy
		k_england = { holder_scope = { culture = saxon } }
		NOT = { has_global_flag = norman_cleanup_done }
		NOT = { has_global_flag = witan_abolished }
		year = 1066
		NOT = { year = 1075 }
		is_ruler = yes
		independent = no
		war = no
		OR = {
			has_landed_title = c_cornwall
			has_landed_title = c_devon
			has_landed_title = c_somerset
			has_landed_title = c_dorset
			has_landed_title = c_wiltshire
			has_landed_title = c_winchester
			has_landed_title = c_sussex
			has_landed_title = c_surrey
			has_landed_title = c_kent
			has_landed_title = c_gloucester
			has_landed_title = c_hereford
			has_landed_title = c_shrewsbury
			has_landed_title = c_worcester
			has_landed_title = c_warwick
			has_landed_title = c_leicester
			has_landed_title = c_lincoln
			has_landed_title = d_canterbury
			has_landed_title = d_somerset
			has_landed_title = d_cornwall
			has_landed_title = d_gloucester
			has_landed_title = d_hereford
			has_landed_title = d_york
			any_realm_lord = { has_landed_title = c_cornwall }
			any_realm_lord = { has_landed_title = c_devon }
			any_realm_lord = { has_landed_title = c_somerset }
			any_realm_lord = { has_landed_title = c_dorset }
			any_realm_lord = { has_landed_title = c_wiltshire }
			any_realm_lord = { has_landed_title = c_winchester }
			any_realm_lord = { has_landed_title = c_sussex }
			any_realm_lord = { has_landed_title = c_surrey }
			any_realm_lord = { has_landed_title = c_kent }
			any_realm_lord = { has_landed_title = c_gloucester }
			any_realm_lord = { has_landed_title = c_hereford }
			any_realm_lord = { has_landed_title = c_shrewsbury }
			any_realm_lord = { has_landed_title = c_worcester }
			any_realm_lord = { has_landed_title = c_warwick }
			any_realm_lord = { has_landed_title = c_leicester }
			any_realm_lord = { has_landed_title = c_lincoln }
			any_realm_lord = { has_landed_title = d_canterbury }
			any_realm_lord = { has_landed_title = d_somerset }
			any_realm_lord = { has_landed_title = d_cornwall }
			any_realm_lord = { has_landed_title = d_gloucester }
			any_realm_lord = { has_landed_title = d_hereford }
			any_realm_lord = { has_landed_title = d_york }
		}
	}
	
	weight_multiplier = {
		days = 1
	}
	
	immediate = {
		if = {
			limit = { has_landed_title = c_cornwall }
			k_england = { gain_title = c_cornwall }
		}
		if = {
			limit = { any_realm_lord = { has_landed_title = c_cornwall } }
			k_england = { gain_title = c_cornwall }
		}
		if = {
			limit = { has_landed_title = c_devon }
			k_england = { gain_title = c_devon }
		}
		if = {
			limit = { any_realm_lord = { has_landed_title = c_devon } }
			k_england = { gain_title = c_devon }
		}
		if = {
			limit = { has_landed_title = c_somerset }
			k_england = { gain_title = c_somerset }
		}
		if = {
			limit = { any_realm_lord = { has_landed_title = c_somerset } }
			k_england = { gain_title = c_somerset }
		}
		if = {
			limit = { has_landed_title = c_dorset }
			k_england = { gain_title = c_dorset }
		}
		if = {
			limit = { any_realm_lord = { has_landed_title = c_dorset } }
			k_england = { gain_title = c_dorset }
		}
		if = {
			limit = { has_landed_title = c_wiltshire }
			k_england = { gain_title = c_wiltshire }
		}
		if = {
			limit = { any_realm_lord = { has_landed_title = c_wiltshire } }
			k_england = { gain_title = c_wiltshire }
		}
		if = {
			limit = { has_landed_title = c_winchester }
			k_england = { gain_title = c_winchester }
		}
		if = {
			limit = { any_realm_lord = { has_landed_title = c_winchester } }
			k_england = { gain_title = c_winchester }
		}
		if = {
			limit = { has_landed_title = c_sussex }
			k_england = { gain_title = c_sussex }
		}
		if = {
			limit = { any_realm_lord = { has_landed_title = c_sussex } }
			k_england = { gain_title = c_sussex }
		}
		if = {
			limit = { has_landed_title = c_surrey }
			k_england = { gain_title = c_surrey }
		}
		if = {
			limit = { any_realm_lord = { has_landed_title = c_surrey } }
			k_england = { gain_title = c_surrey }
		}
		if = {
			limit = { has_landed_title = c_kent }
			k_england = { gain_title = c_kent }
		}
		if = {
			limit = { any_realm_lord = { has_landed_title = c_kent } }
			k_england = { gain_title = c_kent }
		}
		if = {
			limit = { has_landed_title = c_gloucester }
			k_england = { gain_title = c_gloucester }
		}
		if = {
			limit = { any_realm_lord = { has_landed_title = c_gloucester } }
			k_england = { gain_title = c_gloucester }
		}
		if = {
			limit = { has_landed_title = c_hereford }
			k_england = { gain_title = c_hereford }
		}
		if = {
			limit = { any_realm_lord = { has_landed_title = c_hereford } }
			k_england = { gain_title = c_hereford }
		}
		if = {
			limit = { has_landed_title = c_shrewsbury }
			k_england = { gain_title = c_shrewsbury }
		}
		if = {
			limit = { any_realm_lord = { has_landed_title = c_shrewsbury } }
			k_england = { gain_title = c_shrewsbury }
		}
		if = {
			limit = { has_landed_title = c_worcester }
			k_england = { gain_title = c_worcester }
		}
		if = {
			limit = { any_realm_lord = { has_landed_title = c_worcester } }
			k_england = { gain_title = c_worcester }
		}
		if = {
			limit = { has_landed_title = c_warwick }
			k_england = { gain_title = c_warwick }
		}
		if = {
			limit = { any_realm_lord = { has_landed_title = c_warwick } }
			k_england = { gain_title = c_warwick }
		}
		if = {
			limit = { has_landed_title = c_leicester }
			k_england = { gain_title = c_leicester }
		}
		if = {
			limit = { any_realm_lord = { has_landed_title = c_leicester } }
			k_england = { gain_title = c_leicester }
		}
		if = {
			limit = { has_landed_title = c_lincoln }
			k_england = { gain_title = c_lincoln }
		}
		if = {
			limit = { any_realm_lord = { has_landed_title = c_lincoln } }
			k_england = { gain_title = c_lincoln }
		}
		if = {
			limit = { has_landed_title = d_canterbury }
			k_england = { gain_title = d_canterbury }
		}
		if = {
			limit = { any_realm_lord = { has_landed_title = d_canterbury } }
			k_england = { gain_title = d_canterbury }
		}
		if = {
			limit = { has_landed_title = d_somerset }
			k_england = { gain_title = d_somerset }
		}
		if = {
			limit = { any_realm_lord = { has_landed_title = d_somerset } }
			k_england = { gain_title = d_somerset }
		}
		if = {
			limit = { has_landed_title = d_cornwall }
			k_england = { gain_title = d_cornwall }
		}
		if = {
			limit = { any_realm_lord = { has_landed_title = d_cornwall } }
			k_england = { gain_title = d_cornwall }
		}
		if = {
			limit = { has_landed_title = d_gloucester }
			k_england = { gain_title = d_gloucester }
		}
		if = {
			limit = { any_realm_lord = { has_landed_title = d_gloucester } }
			k_england = { gain_title = d_gloucester }
		}
		if = {
			limit = { has_landed_title = d_hereford }
			k_england = { gain_title = d_hereford }
		}
		if = {
			limit = { any_realm_lord = { has_landed_title = d_hereford } }
			k_england = { gain_title = d_hereford }
		}
		if = {
			limit = { has_landed_title = d_york }
			k_england = { gain_title = d_york }
		}
		if = {
			limit = { any_realm_lord = { has_landed_title = d_york } }
			k_england = { gain_title = d_york }
		}
		if = {
			limit = { NOT = { has_claim = k_england } }
			add_claim = k_england
		}
		set_global_flag = norman_cleanup_done
	}
}

character_event = { # Republic maintenance event -- removes high Crown Authority or incorrect succession law
	id = Plus.331
	
	hide_window = yes
	
	only_rulers = yes
	
	trigger = {		
		OR = {
			is_republic = yes
			is_merchant_republic = yes
		}
		higher_tier_than = duke
		any_demesne_title = {
			higher_tier_than = duke
			OR = {
				has_law = crown_authority_3
				has_law = crown_authority_4
				NOT = { has_law = succ_patrician_elective }
			}
		}
	}
	
	mean_time_to_happen = {
		days = 1
	}
	
	immediate = {
		set_character_flag = centralize_without_penalties
		any_demesne_title = {
			limit = { higher_tier_than = duke }
			if = {
				limit = {
					OR = {
						has_law = crown_authority_3
						has_law = crown_authority_4
					}
				}
				add_law = crown_authority_2
			}
			if = {
				limit = {
					NOT = { has_law = succ_patrician_elective }
				}
				add_law = succ_patrician_elective
			}			
		}
		clr_character_flag = centralize_without_penalties
	}
}

character_event = { # Builds the Third Temple once the modifiers runs out
	id = Plus.332

	hide_window = yes
	
	only_rulers = yes

	trigger = {
		NOT = { has_global_flag = third_temple_built }
		has_global_flag = building_third_temple
		k_papal_state = {
			holder_scope = {
				NOT = { has_character_modifier = third_temple_timer }
			}
		}
	}
	
	mean_time_to_happen = {
		days = 1
	}
	
	immediate = {
		set_global_flag = third_temple_built
		clr_global_flag = building_third_temple	
		any_playable_ruler = {
			if = {
				limit = { has_character_modifier = third_temple_builder }
				narrative_event = { id = SoA.101 }
				remove_character_modifier = third_temple_builder
			}
		}
	}
}

character_event = { # Remove Papal Claims on children that have them, as well as those under the Papacy
	id = Plus.333

	hide_window = yes
	is_triggered_only = yes

	trigger = {
		OR = {
			is_adult = no
			k_papal_state = {
				holder_scope = { same_realm = ROOT }
			}
		}
		any_claim = { title = k_papal_state }		
	}
	
	weight_multiplier = {
		days = 1
	}
	
	immediate = {
		remove_claim = k_papal_state
	}
}

character_event = { # Adds the flag for the 'Civilize a Province' ambition
	id = Plus.334 #formerly 1000182009
	desc = EVTDESC_Plus_334
	picture = GFX_evt_throne_room

	is_triggered_only = yes
	hide_from = yes

	option = {
		name = EXCELLENT
		hidden_tooltip = {
			set_character_flag = civilized_province
		}
	}
}

character_event = { # Adds the Yehudi trait to Jews and children of Jews
	id = Plus.335
	
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		religion_group = jewish_group
		NOT = { trait = yehudi }
		NOT = { has_character_flag = yehudi_check }
	}
	
	weight_multiplier = {
		days = 1
	}
	
	immediate = {
		set_character_flag = yehudi_check
		if = {
			limit = {
				is_ruler = yes
				primary_title = { is_theocracy = yes }
			}
			add_trait = yehudi
		}
		if = {
			limit = { 
				is_ruler = no
			}
			random = {
				chance = 70
				add_trait = yehudi
			}
		}
	}
}

character_event = { # Tell family to come out of hiding once the war is done
	id = Plus.336

	hide_window = yes
	
	only_rulers = yes
	
	trigger = {
		war = no
		in_siege = no
		OR = {
			has_character_modifier = stalwart_defender
			has_character_modifier = left_at_siege
			has_character_modifier = escaped_siege
			has_character_flag = defending_the_castle
			any_courtier = {
				OR = {
					has_character_modifier = stalwart_defender
					has_character_modifier = left_at_siege
					has_character_modifier = escaped_siege
					has_character_flag = defending_the_castle
				}
			}
		}
	}
	
	mean_time_to_happen = {
		days = 10
	}
	
	immediate = {	
		remove_character_modifier = stalwart_defender
		remove_character_modifier = left_at_siege
		remove_character_modifier = escaped_siege
		clr_character_flag = defending_the_castle
		any_courtier = {
			remove_character_modifier = stalwart_defender
			remove_character_modifier = left_at_siege
			remove_character_modifier = escaped_siege
			clr_character_flag = defending_the_castle
		}
	}
}

character_event = { # Clear siege modifiers/hiding trait if imprisoned
	id = Plus.337
	
	hide_window = yes
	
	prisoner = yes
	
	trigger = {
		prisoner = yes
		OR = {
			trait = in_hiding
			has_character_modifier = stalwart_defender
			has_character_modifier = left_at_siege
			has_character_modifier = escaped_siege
			has_character_flag = defending_the_castle
		}
	}
	
	mean_time_to_happen = {
		days = 1
	}
	
	immediate = {
		remove_trait = in_hiding
		remove_character_modifier = stalwart_defender
		remove_character_modifier = left_at_siege
		remove_character_modifier = escaped_siege
		clr_character_flag = defending_the_castle
		clr_character_flag = in_hiding_murder
		clr_character_flag = in_hiding_siege
	}
}

character_event = { # HRE Auto-Destroy Mechanic. Destroys the HRE if the ruler is no longer Catholic (or replacement heresy)
	id = Plus.338
	desc = "EVTDESC_Plus_328"
	picture = "GFX_evt_council"
	
	only_rulers = yes

	trigger = {
		has_landed_title = e_hre
		NOT = {
			religion = catholic
			religion = cathar
			religion = fraticelli
			religion = waldensian
			religion = lollard
		}
		war = no
	}

	mean_time_to_happen = {
		days = 1
	}

	option = {
		name = "OK"
		if = {
			limit = { trait = crowned_by_pope }
			remove_trait = crowned_by_pope
		}
		if = {
			limit = {
				culture = german
				e_germany = { has_holder = no }
			}
			set_character_flag = centralize_without_penalties
			e_germany = {
				hidden_tooltip = {
					copy_title_laws = e_hre
				}
				gain_title = ROOT
			}
			e_hre = {
				any_claimant = {
					if = {
						limit = { has_weak_claim = PREV }
						add_weak_pressed_claim = e_germany
					}
					if = {
						limit = { has_strong_claim = PREV }
						add_pressed_claim = e_germany
					}
					remove_claim = PREV
				}
				destroy_landed_title = yes
			}
			clr_character_flag = centralize_without_penalties
		}
		e_hre = {
			destroy_landed_title = yes
		}
		hidden_tooltip = {
			k_papal_state = { holder_scope = { character_event = { id = Plus.307 } } }
			any_vassal = {
				limit = { NOT = { has_character_flag = considered_for_independence } }
				character_event = { id = Plus.430 days = 3 }
			}
		}
	}
}

character_event = { # Change scarred trait on females
	id = Plus.339
	
	hide_window = yes
	is_triggered_only = yes
	
	only_women = yes
	
	trigger = {
		trait = scarred
		is_female = yes
	}
	
	weight_multiplier = {
		days = 1
	}
	
	immediate = {
		remove_trait = scarred
		add_trait = scarred_female
	}
}

character_event = { # Clean up "children serving in holy orders" chains upon appropriate parent death
	id = Plus.340
	
	hide_window = yes
	is_triggered_only = yes
	
	trigger = { #should be fired from the highest ranking parent
		has_dlc = "The Old Gods"
		OR = {
			any_child = { 
				father = { 
					character = ROOT
					any_child = {	
						character = PREVPREV
						mother = { 
							OR = {
								is_alive = no
								NOT = { higher_tier_than = ROOT }
							}
						}
					}
				}
			}
			any_child = { 
				mother = { 
					character = ROOT
					any_child = {	
						character = PREVPREV
						father = { 
							OR = {
								is_alive = no
								lower_tier_than = ROOT
							}
						}
					}
				}
			}
		}
		any_child = {
			OR = {
				has_character_flag = serving_gwydion
				has_character_flag = wants_gwydion
				has_character_flag = wants_varangian
				has_character_flag = serving_varangian
				has_character_flag = serving_fianna
				has_character_flag = wants_fianna
				has_character_flag = wants_druidic_training
				has_character_flag = druidic_training
			}
		}
	}
	
	immediate = {
		any_child = {
			limit = {				
				is_primary_heir = ROOT
				OR = {
					has_character_flag = wants_druidic_training
					has_character_flag = druidic_training
				}
			}
			character_event = { id = ancrel.206 days = 3 }
		}			
		any_child = {
			limit = {				
				is_primary_heir = no
				OR = {
					has_character_flag = wants_druidic_training
					has_character_flag = druidic_training
				}
			}
			character_event = { id = ancrel.207 days = 3 }
		}
		any_child = {
			limit = {				
				is_primary_heir = ROOT
				OR = {
					has_character_flag = wants_gwydion
					has_character_flag = serving_gwydion
				}
			}
			character_event = { id = ancrel.144 days = 3 }
		}			
		any_child = {
			limit = {				
				is_primary_heir = no
				OR = {
					has_character_flag = wants_gwydion
					has_character_flag = serving_gwydion
				}
			}
			character_event = { id = ancrel.145 days = 3 }
		}
		any_child = {
			limit = {				
				is_primary_heir = ROOT
				OR = {
					has_character_flag = wants_fianna
					has_character_flag = serving_fianna
				}
			}
			character_event = { id = ancrel.1184 days = 3 }
		}			
		any_child = {
			limit = {				
				is_primary_heir = no
				OR = {
					has_character_flag = wants_fianna
					has_character_flag = serving_fianna
				}
			}
			character_event = { id = ancrel.1185 days = 3 }
		}
		any_child = {
			limit = {				
				is_primary_heir = ROOT
				OR = {
					has_character_flag = wants_varangian
					has_character_flag = serving_varangian
				}
			}
			character_event = { id = TOG.3134 days = 3 }
		}			
		any_child = {
			limit = {				
				is_primary_heir = no
				OR = {
					has_character_flag = wants_varangian
					has_character_flag = serving_varangian
				}
			}
			character_event = { id = TOG.3135 days = 3 }
		}
	}
}

character_event = { # Ultimatum to overthrown rulers who re-inherit the throne
	id = Plus.341		

	is_triggered_only = yes		
	
	hide_window = yes

	immediate = {
		character_event = { id = Plus.342 days = 3 }
	}	
}

character_event = { # Ultimatum to overthrown rulers who re-inherit the throne
	id = Plus.342
	desc = "EVTDESC_Plus_341"
	picture = "GFX_evt_council"

	is_triggered_only = yes
	
	trigger = {	
		FROMFROM = {			
			is_primary_holder_title_tier = yes
			any_vassal = {								
				has_opinion_modifier = { who = ROOT modifier = overthrown_ruler }
				relative_power = { who = ROOT power = 0.25 }
			}		
		}
	}	
	
	immediate = {
		#assess power of demanders
		hidden_tooltip = {
			set_variable = { which = "ultimatum_power" value = "0" }			
			any_vassal = {
				limit = {
					de_jure_liege = FROMFROM
					has_opinion_modifier = { who = ROOT modifier = overthrown_ruler }
				}
				if = {
					limit = {
						relative_power = { who = ROOT power = 0.25 }
						NOT = { relative_power = { who = ROOT power = 0.5 } }
					}
					ROOT = { change_variable = { which = "ultimatum_power" value = "0.25" } }
				}
				if = {
					limit = {
						relative_power = { who = ROOT power = 0.5 }
						NOT = { relative_power = { who = ROOT power = 0.75 } }
					}
					ROOT = { change_variable = { which = "ultimatum_power" value = "0.5" } }
				}
				if = {
					limit = {
						relative_power = { who = ROOT power = 0.75 }
						NOT = { relative_power = { who = ROOT power = 1 } }
					}
					ROOT = { change_variable = { which = "ultimatum_power" value = "0.75" } }
				}
				if = {
					limit = {
						relative_power = { who = ROOT power = 1 }							
					}
					ROOT = { change_variable = { which = "ultimatum_power" value = "1" } }
				}
			}
		}
	}

	option = {
		name = "EVTDEMANDYES"
		#abdicate to next in line		
		ai_chance = {
			factor = 50
			modifier = {
				factor = 1.25
				trait = weak
			}
			modifier = {
				factor = 1.25
				trait = craven
			}
			modifier = {
				factor = 1.25
				trait = humble
			}
			modifier = {
				factor = 1.25
				trait = kind
			}
			modifier = {
				factor = 1.25
				trait = charitable
			}
			modifier = {
				factor = 1.25
				trait = patient
			}
			modifier = {
				factor = 1.25
				trait = content
			}
		}
		abdicate = yes
	}
	
	option = {
		name = "EVTDEMANDNO" #reject demand		
		ai_chance = {
			factor = 50
			modifier = {
				factor = 1.25
				trait = strong
			}
			modifier = {
				factor = 1.25
				trait = brave
			}
			modifier = {
				factor = 1.25
				trait = proud
			}
			modifier = {
				factor = 1.25
				trait = envious
			}
			modifier = {
				factor = 1.25
				trait = greedy
			}
			modifier = {
				factor = 1.25
				trait = wroth
			}
			modifier = {
				factor = 1.25
				trait = ambitious
			}
			modifier = {
				factor = 5.0
				NOT = { check_variable = { which = "rebel_power" value = 0.99 } }
				NOT = { check_variable = { which = "ultimatum_power" value = "1" } }
			}
			modifier = {
				factor = 0.75
				check_variable = { which = "rebel_power" value = 0.99 }
			}
			modifier = {
				factor = 0.75
				check_variable = { which = "rebel_power" value = 1.99 }
			}
			modifier = {
				factor = 0.75
				check_variable = { which = "rebel_power" value = 2.99 }
			}
			modifier = {
				factor = 0.75
				check_variable = { which = "rebel_power" value = 3.99 }
			}
			modifier = {
				factor = 0.75
				check_variable = { which = "ultimatum_power" value = "1" }
			}
			modifier = {
				factor = 1.5
				OR = {
					NOT = { check_variable = { which = "rebel_power" value = 0.99 } }
					NOT = { check_variable = { which = "ultimatum_power" value = "1" } }
				}
			}
		}
		#a direct-vassal demander with sufficient power declares war, other demanders follow suit		
		random_vassal = {
			limit = {
				de_jure_liege = FROMFROM
				has_opinion_modifier = { who = ROOT modifier = overthrown_ruler }
				relative_power = { who = ROOT power = 0.25 }
			}
			war = {
				target = ROOT
				casus_belli = overthrow_ruler
			}
			FROMFROM = {
				any_vassal = {
					limit = {													
						has_opinion_modifier = { who = ROOT modifier = overthrown_ruler }
					}
					join_attacker_wars = PREVPREV
				}
			}
		}
	}
}

character_event = { # Modifier remover for characters who convert away from hinduism
	id = Plus.343

	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		NOT = { religion = hindu }
		OR = {
			has_character_modifier = patron_vishnu
			has_character_modifier = patron_brahma
			has_character_modifier = patron_shiva
			has_character_modifier = patron_kali
			has_character_modifier = patron_ganesha
			has_character_modifier = patron_ganga
		}
	}
	
	weight_multiplier = {
		days = 1
	}
	
	immediate = {
		if = {
			limit = { has_character_modifier = patron_vishnu }
			remove_character_modifier = patron_vishnu
		}
		if = {
			limit = { has_character_modifier = patron_brahma }
			remove_character_modifier = patron_brahma
		}
		if = {
			limit = { has_character_modifier = patron_shiva }
			remove_character_modifier = patron_shiva
		}
		if = {
			limit = { has_character_modifier = patron_kali }
			remove_character_modifier = patron_kali
		}
		if = {
			limit = { has_character_modifier = patron_ganesha }
			remove_character_modifier = patron_ganesha
		}
		if = {
			limit = { has_character_modifier = patron_ganga }
			remove_character_modifier = patron_ganga
		}
	}
}

character_event = { # Adds Uncrowned trait to all new independent kings and emperors
	id = Plus.344
	
	hide_window = yes
	
	only_playable = yes
	
	trigger = {
		war = no
		is_feudal = yes
		is_landed = yes
		higher_real_tier_than = DUKE
		has_horde_culture = no
		primary_title = {
			is_tribal_type_title = no
		}
		NOT = {
			trait = crowned
			trait = uncrowned
			trait = crowned_by_pope
			trait = strong_basileus
			trait = weak_basileus
		}
		has_global_flag = startup
	}
	
	mean_time_to_happen = {
		days = 1
	}
	
	immediate = {
		add_trait = uncrowned
	}
}

character_event = { # Removes In Hiding trait from characters who no longer have someone to remove it
	id = Plus.345
	
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		trait = in_hiding
		is_ruler = no
		NOT = {
			liege = {
				OR = {
					any_spouse = { character = ROOT }
					any_child = { character = ROOT }
				}
			}
			AND = {
				has_character_flag = in_hiding_siege
				liege = { is_close_relative = ROOT }
			}
		}
	}
	
	weight_multiplier = {
		days = 1
	}
	
	immediate = {
		remove_trait = in_hiding
		clr_character_flag = in_hiding_murder
		clr_character_flag = in_hiding_siege
	}
}

character_event = { # Removes austerity modifier from non-AI characters
	id = Plus.346
	
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		has_character_modifier = ai_austerity
		ai = no
	}
	
	weight_multiplier = {
		days = 1
	}
	
	immediate = {
		remove_character_modifier = ai_austerity
	}
}

