namespace = Plus

#reserved: Plus.1200 to Plus.1299

#######################################
# CORONATION EVENTS
#######################################

# Ruler begins planning the coronation
character_event = {
	id = Plus.1200
	desc = EVTDESC_Plus_1200
	picture = GFX_evt_coronation
	
	is_triggered_only = yes
	hide_from = yes
	
	option = {
		name = EVTOPTA_Plus_1200
		custom_tooltip = { text = send_invitations }
		hidden_tooltip = {
			any_realm_character = {
				limit = {
					OR = {
						is_ruler = yes
						spouse = { is_ruler = yes }
						is_close_relative = ROOT
						is_allied_with = ROOT
					}
					religion = ROOT
					is_adult = yes
					prisoner = no
					NOT = {
						trait = incapable
						trait = excommunicated
					}
				}
				letter_event = { id = Plus.1201 }
			}
			any_independent_ruler = {
				any_realm_character = {
					limit = {
						OR = {
							is_allied_with = ROOT
							spouse = { is_allied_with = ROOT }
							is_close_relative = ROOT
							spouse = { is_close_relative = ROOT }
						}
						independent = no
						religion = ROOT
						is_adult = yes
						prisoner = no
						is_within_diplo_range = ROOT
						NOT = {
							trait = incapable
							trait = excommunicated
						}
					}
					letter_event = { id = Plus.1201 }
				}
			}
			any_independent_ruler = {
				limit = {
					religion = ROOT
					is_adult = yes
					prisoner = no
					is_within_diplo_range = ROOT
					OR = {
						is_allied_with = ROOT
						any_realm_province = {
							any_neighbor_province = {
								owner = { same_realm = ROOT }
							}
						}
					}
					NOT = {
						trait = incapable
						trait = excommunicated
						reverse_has_truce = FROM
					}
				}
				letter_event = { id = Plus.1201 }
			}
		}
	}
}

# Invitation to the coronation
letter_event = {
	id = Plus.1201
	desc = EVTDESC_Plus_1201
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_Plus_1201 # I will attend
		trigger = {
			war = no
			NOT = { has_character_modifier = do_not_disturb }
		}
		ai_chance = {
			factor = 80
			modifier = {
				factor = 0
				OR = {
					is_ill = yes
					is_pregnant = yes
				}
			}
			modifier = {
				factor = 0.5
				trait = paranoid
			}
			modifier = {
				factor = 0.5
				trait = shy
			}
			modifier = {
				factor = 0.5
				trait = cynical
			}
			modifier = {
				factor = 0.5
				trait = slothful
			}
			modifier = {
				factor = 1.5
				trait = diligent
			}
			modifier = {
				factor = 1.5
				trait = zealous
			}
			modifier = {
				factor = 1.5
				trait = gregarious
			}
			modifier = {
				factor = 5
				is_close_relative = FROM
			}
			modifier = {
				factor = 2
				OR = {
					dynasty = FROM
					is_allied_with = FROM
					is_theocracy = yes
				}
			}
			modifier = {
				factor = 1.25
				opinion = { who = FROM value = 25 }
			}
			modifier = {
				factor = 1.25
				opinion = { who = FROM value = 50 }
			}
			modifier = {
				factor = 1.25
				opinion = { who = FROM value = 75 }
			}
			modifier = {
				factor = 0.75
				NOT = { opinion = { who = FROM value = 0 } }
			}
			modifier = {
				factor = 0.75
				NOT = { opinion = { who = FROM value = -25 } }
			}
			modifier = {
				factor = 0.5
				NOT = { opinion = { who = FROM value = -50 } }
			}
			modifier = {
				factor = 0.25
				NOT = { opinion = { who = FROM value = -75 } }
			}
		}
		if = {
			limit = {
				higher_real_tier_than = COUNT
				NOT = { same_realm = FROM }
			}
			FROM = {
				letter_event = { id = Plus.1202 days = 3 random = 10 tooltip = accept_invitation }
			}
		}
		hidden_tooltip = {
			opinion = {
				who = FROM
				modifier = attending_coronation
				months = 12
			}
			add_character_modifier = {
				name = do_not_disturb
				days = 200
				hidden = yes
			}
		}
	}
	option = {
		name = EVTOPTB_Plus_1201 # I will not attend
		trigger = {
			war = no
			NOT = { has_character_modifier = do_not_disturb }
			OR = {
				same_realm = FROM
				is_ruler = no
			}
		}
		ai_chance = {
			factor = 20
		}
		reverse_opinion = {
			who = FROM
			modifier = opinion_insulted
			months = 60
		}
		if = {
			limit = {
				higher_real_tier_than = COUNT
				NOT = { any_spouse = { character = FROM } }
			}
			FROM = {
				letter_event = { id = Plus.1203 days = 3 random = 10 tooltip = decline_invitation }
			}
		}
	}
	option = {
		name = EVTOPTC_Plus_1201 # Send an envoy in my stead
		trigger = {
			war = no
			NOT = { has_character_modifier = do_not_disturb }
			NOT = { same_realm = FROM }
			is_ruler = yes
		}
		ai_chance = {
			factor = 40
		}
		reverse_opinion = {
			who = FROM
			modifier = opinion_insulted
			months = 60
		}
		if = {
			limit = { higher_real_tier_than = COUNT }
			FROM = {
				letter_event = { id = Plus.1204 days = 3 random = 10 tooltip = decline_invitation }
			}
		}
	}
	option = {
		name = EVTOPTD_Plus_1201 # I am at war
		trigger = {
			war = yes
		}
		if = {
			limit = { higher_real_tier_than = COUNT }
			FROM = {
				letter_event = { id = Plus.1205 days = 3 random = 10 tooltip = decline_invitation }
			}
		}
	}
	option = {
		name = EVTOPTE_Plus_1201 # I am too busy
		trigger = {
			has_character_modifier = do_not_disturb
		}
		if = {
			limit = { higher_real_tier_than = COUNT }
			FROM = {
				letter_event = { id = Plus.1206 days = 3 random = 10 tooltip = decline_invitation }
			}
		}
	}
}

# Foreign ruler accepts the invitation
letter_event = {
	id = Plus.1202
	desc = EVTDESC_Plus_1202
	
	is_triggered_only = yes
	
	option = {
		name = EXCELLENT
	}
}

# Notification of an invitation declined
letter_event = {
	id = Plus.1203
	desc = EVTDESC_Plus_1203
	
	is_triggered_only = yes
	
	option = {
		name = I_SEE
	}
}

# Notification of an invitation declined by foreign ruler
letter_event = {
	id = Plus.1204
	desc = EVTDESC_Plus_1204
	
	is_triggered_only = yes
	
	option = {
		name = I_SEE
	}
}

# Notification of an invitation declined due to war
letter_event = {
	id = Plus.1205
	desc = EVTDESC_Plus_1205
	
	is_triggered_only = yes
	
	option = {
		name = I_SEE
	}
}

# Notification of an invitation declined due to being busy
letter_event = {
	id = Plus.1206
	desc = EVTDESC_Plus_1206
	
	is_triggered_only = yes
	
	option = {
		name = I_SEE
	}
}

# Vassal priest asks to perform the ceremony
character_event = {
	id = Plus.1207
	desc = EVTDESC_Plus_1207
	picture = GFX_evt_coronation
	
	only_rulers = yes
	min_age = 16
	capable_only = yes
	prisoner = no
	
	trigger = {
		capital_holding = { holding_type = temple }
		OR = {
			higher_tier_than = BARON
			liege = { reverse_has_opinion_modifier = { who = ROOT modifier = attending_coronation } }
		}
		any_liege = {
			has_character_flag = planning_coronation
			reverse_has_opinion_modifier = { who = ROOT modifier = attending_coronation }
			NOT = {
				has_character_flag = has_priest_to_perform_coronation
				has_character_flag = asked_about_coronation
				reverse_has_opinion_modifier = { who = ROOT modifier = opinion_insulted }
			}
		}
	}
	
	mean_time_to_happen = {
		days = 15
		modifier = {
			factor = 0.75
			trait = diligent
		}
		modifier = {
			factor = 0.75
			trait = proud
		}
		modifier = {
			factor = 0.75
			trait = zealous
		}
		modifier = {
			factor = 0.5
			trait = ambitious
		}
		modifier = {
			factor = 1.5
			trait = humble
		}
		modifier = {
			factor = 1.5
			trait = content
		}
		modifier = {
			factor = 2.0
			real_tier = BARON
		}
		modifier = {
			factor = 0.5
			higher_real_tier_than = COUNT
		}
		modifier = {
			factor = 0.5
			higher_real_tier_than = DUKE
		}
		modifier = {
			factor = 0.75
			any_liege = {
				reverse_has_opinion_modifier = { who = ROOT modifier = attending_coronation }
				reverse_opinion = { who = ROOT value = 25 }
			}
		}
		modifier = {
			factor = 0.75
			any_liege = {
				reverse_has_opinion_modifier = { who = ROOT modifier = attending_coronation }
				reverse_opinion = { who = ROOT value = 50 }
			}
		}
		modifier = {
			factor = 0.75
			any_liege = {
				reverse_has_opinion_modifier = { who = ROOT modifier = attending_coronation }
				reverse_opinion = { who = ROOT value = 75 }
			}
		}
		modifier = {
			factor = 1.5
			any_liege = {
				reverse_has_opinion_modifier = { who = ROOT modifier = attending_coronation }
				NOT = { reverse_opinion = { who = ROOT value = 0 } }
			}
		}
		modifier = {
			factor = 1.5
			any_liege = {
				reverse_has_opinion_modifier = { who = ROOT modifier = attending_coronation }
				NOT = { reverse_opinion = { who = ROOT value = -25 } }
			}
		}
		modifier = {
			factor = 1.5
			any_liege = {
				reverse_has_opinion_modifier = { who = ROOT modifier = attending_coronation }
				NOT = { reverse_opinion = { who = ROOT value = -50 } }
			}
		}
		modifier = {
			factor = 0.5
			any_liege = {
				reverse_has_opinion_modifier = { who = ROOT modifier = attending_coronation }
				dynasty = ROOT
			}
		}
	}

	immediate = {
		any_liege = {
			limit = {
				has_character_flag = planning_coronation
				reverse_has_opinion_modifier = { who = ROOT modifier = attending_coronation }
				NOT = {
					has_character_flag = has_priest_to_perform_coronation
					has_character_flag = asked_about_coronation
					reverse_has_opinion_modifier = { who = ROOT modifier = opinion_insulted }
				}
			}
			set_character_flag = asked_about_coronation
		}
	}
	
	option = {
		name = EVTOPTA_Plus_1207 # Make the request
		any_liege = {
			limit = {
				has_character_flag = planning_coronation
				NOT = { has_character_flag = has_priest_to_perform_coronation }
				reverse_has_opinion_modifier = { who = ROOT modifier = attending_coronation }
			}
			letter_event = { id = Plus.1208 tooltip = request_to_perform_coronation }
		}
	}
}

# Liege receives request from priest to perform the coronation
letter_event = {
	id = Plus.1208
	desc = EVTDESC_Plus_1208
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_Plus_1208 # Let him do it
		clr_character_flag = asked_about_coronation
		set_character_flag = has_priest_to_perform_coronation
		reverse_opinion = {
			who = FROM
			modifier = opinion_performed_coronation
			months = 120
		}
		hidden_tooltip = {
			FROM = {
				letter_event = { id = Plus.1209 days = 1 }
			}
		}
	}
	option = {
		name = EVTOPTB_Plus_1208 # Refuse
		trigger = {
			ai = no
		}
		clr_character_flag = asked_about_coronation
		reverse_opinion = {
			who = FROM
			modifier = opinion_insulted
			months = 60
		}
		hidden_tooltip = {
			FROM = {
				letter_event = { id = Plus.1210 days = 1 }
			}
		}
	}
}

# Liege agrees to the request
letter_event = {
	id = Plus.1209
	desc = EVTDESC_Plus_1209
	
	is_triggered_only = yes
	
	option = {
		name = EXCELLENT
		reverse_opinion = {
			who = FROM
			modifier = opinion_performed_coronation
			months = 120
		}
		hidden_tooltip = {
			FROM = {
				any_realm_character = {
					limit = {
						capital_holding = { holding_type = temple }
						has_opinion_modifier = { who = PREV modifier = attending_coronation }
						higher_real_tier_than = ROOT
						prisoner = no
						NOT = { trait = incapable }
					}
					opinion = {
						who = PREV
						modifier = opinion_insulted
						months = 60
					}
				}
			}
		}
	}
}

# Liege refuses the request
letter_event = {
	id = Plus.1210
	desc = EVTDESC_Plus_1210
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_Plus_1210
		prestige = -50
		tooltip = {
			opinion = {
				who = FROM
				modifier = opinion_insulted
				months = 60
			}
		}
	}
}

# Coronation cancelled due to war
character_event = {
	id = Plus.1211
	desc = EVTDESC_Plus_1211
	picture = GFX_evt_council
	
	only_rulers = yes
	min_age = 16
	
	trigger = {
		war = yes
		OR = {
			has_character_flag = planning_coronation
			has_character_flag = holding_coronation
		}
	}
	
	mean_time_to_happen = {
		days = 1
	}
	
	option = {
		name = CURSES
		if = {
			limit = { has_character_flag = planning_coronation }
			scaled_wealth = 0.8
		}
		hidden_tooltip = {
			remove_character_modifier = do_not_disturb
			clr_character_flag = planning_coronation
			clr_character_flag = holding_coronation
			clr_character_flag = has_priest_to_perform_coronation
			clr_character_flag = asked_about_coronation
			clr_character_flag = coronation_event
			clr_character_flag = coronation_lover
			clr_character_flag = coronation_duel
			clr_character_flag = coronation_poetry
			clr_character_flag = coronation_friend
			clr_character_flag = coronation_rival
			clr_character_flag = coronation_toast
			clr_character_flag = coronation_badmouth
			clr_character_flag = coronation_drunkard
			clr_character_flag = coronation_lunatic
			any_realm_character = {
				limit = {
					has_opinion_modifier = { who = ROOT modifier = attending_coronation }
				}
				letter_event = { id = Plus.1212 }
			}
			any_independent_ruler = {
				any_realm_character = {
					limit = {
						has_opinion_modifier = { who = ROOT modifier = attending_coronation }
					}
					letter_event = { id = Plus.1212 }
				}
			}
			any_independent_ruler = {
				limit = {
					has_opinion_modifier = { who = ROOT modifier = attending_coronation }
				}
				letter_event = { id = Plus.1212 }
			}
		}
	}
}

# Receive notification about cancellation of coronation due to war
letter_event = {
	id = Plus.1212
	desc = EVTDESC_Plus_1212
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_Plus_1212
		hidden_tooltip = {
			remove_character_modifier = do_not_disturb
			clr_character_flag = coronation_event
			remove_opinion = { who = FROM modifier = attending_coronation }
			if = {
				limit = {
					FROM = { NOT = { trait = crowned } }
					has_opinion_modifier = { who = FROM modifier = opinion_performed_coronation }
				}
				remove_opinion = { who = FROM modifier = opinion_performed_coronation }
				reverse_remove_opinion = { who = FROM modifier = opinion_performed_coronation }
			}
		}
	}
}

# Ruler dies, the coronation must be canceled
character_event = {
	id = Plus.1213
	desc = EVTDESC_Plus_1213
	picture = GFX_evt_death
	
	is_triggered_only = yes
	
	trigger = {
		OR = {
			has_character_flag = planning_coronation
			has_character_flag = holding_coronation
		}
	}
	
	option = {
		name = CURSES
		if = {
			limit = { has_character_flag = planning_coronation }
			scaled_wealth = 0.8
		}
		hidden_tooltip = {
			clr_character_flag = planning_coronation
			clr_character_flag = holding_coronation
			clr_character_flag = has_priest_to_perform_coronation
			clr_character_flag = asked_about_coronation
			clr_character_flag = coronation_event
			clr_character_flag = coronation_lover
			clr_character_flag = coronation_duel
			clr_character_flag = coronation_poetry
			clr_character_flag = coronation_friend
			clr_character_flag = coronation_rival
			clr_character_flag = coronation_toast
			clr_character_flag = coronation_badmouth
			clr_character_flag = coronation_drunkard
			clr_character_flag = coronation_lunatic
			any_realm_character = {
				limit = {
					has_opinion_modifier = { who = ROOT modifier = attending_coronation }
				}
				letter_event = { id = Plus.1214 }
			}
			any_independent_ruler = {
				any_realm_character = {
					limit = {
						has_opinion_modifier = { who = ROOT modifier = attending_coronation }
					}
					letter_event = { id = Plus.1214 }
				}
			}
			any_independent_ruler = {
				limit = {
					has_opinion_modifier = { who = ROOT modifier = attending_coronation }
				}
				letter_event = { id = Plus.1214 }
			}
		}
	}
}

# Receive notification about cancellation of coronation due to ruler's death
letter_event = {
	id = Plus.1214
	desc = EVTDESC_Plus_1214
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_Plus_1212
		hidden_tooltip = {
			remove_character_modifier = do_not_disturb
			clr_character_flag = coronation_event
			remove_opinion = { who = FROM modifier = attending_coronation }
		}
	}
}

### THE CORONATION

# The coronation begins
narrative_event = {
	id = Plus.1215
	title = EVTNAME_Plus_1215
	desc = EVTDESC_Plus_1215
	picture = GFX_evt_coronation
	border = GFX_event_narrative_frame_religion
	sound = church_bells
	
	major = yes
	is_triggered_only = yes
	
	major_trigger = {
		OR = {
			character = FROM
			has_opinion_modifier = { who = FROM modifier = attending_coronation }
			same_realm = FROM
		}
	}
	
	immediate = {
		clr_character_flag = planning_coronation
	}
	
	option = {
		name = EVTOPTA_Plus_1215
		trigger = { character = FROM }
		piety = 100
		add_trait = crowned
		if = {
			limit = { trait = humble }
			random = {
				chance = 50
				remove_trait = humble
			}
		}
		if = {
			limit = {
				NOT = { trait = humble }
				NOT = { trait = proud }
			}
			random = {
				chance = 50
				add_trait = proud
				hidden_tooltip = { character_event = { id = 38261 } } # notify proud
			}
		}
		custom_tooltip = {
			text = RELIGIOUSFACTIONMOODPLUS
			hidden_tooltip = { change_variable = { which = "faction_mood_religious" value = 2 } }
			hidden_tooltip = { random_courtier = { limit = { ai = yes } character_event = { id = PlusFaction.306 days = 1 } } }
		}
		hidden_tooltip = {
			character_event = { id = Plus.1216 days = 1 } # the feast begins
		}
	}
	option = {
		name = EVTOPTB_Plus_1215
		trigger = {
			NOT = { character = FROM }
			has_opinion_modifier = { who = FROM modifier = attending_coronation }
		}
	}
	option = {
		name = EVTOPTC_Plus_1215
		trigger = {
			NOT = { character = FROM }
			NOT = { has_opinion_modifier = { who = FROM modifier = attending_coronation } }
		}
	}
}

# The coronation feast follows
character_event = {
	id = Plus.1216
	title = EVTNAME_Plus_1215
	desc = EVTDESC_Plus_1216
	picture = GFX_evt_feast
	
	major = yes
	is_triggered_only = yes
	
	major_trigger = {
		OR = {
			character = FROM
			has_opinion_modifier = { who = FROM modifier = attending_coronation }
		}
	}
	
	immediate = {
		set_character_flag = holding_coronation
		character_event = { id = Plus.1275 days = 30 } # coronation feast ends
	}
	
	option = {
		name = EVTOPTA_Plus_1216
		trigger = { character = FROM }
	}
	option = {
		name = EVTOPTB_Plus_1216
		trigger = {
			NOT = { character = FROM }
			has_opinion_modifier = { who = FROM modifier = attending_coronation }
		}
	}
}
	
# Ruler gets along with host at the coronation
character_event = {
	id = Plus.1217
	desc = EVTDESC_Plus_1217
	picture = GFX_evt_feast
	
	only_rulers = yes
	min_age = 16
	capable_only = yes
	prisoner = no
	
	trigger = {
		war = no
		any_independent_ruler = {
			NOT = {
				is_friend = ROOT
				num_of_friends = 5
			}
			OR = {
				AND = {
					is_female = no
					ROOT = { is_female = no }
				}
				AND = {
					is_female = yes
					ROOT = { is_female = yes }
				}
			}
			has_character_flag = holding_coronation
			reverse_has_opinion_modifier = { who = ROOT modifier = attending_coronation }
			opinion = { who = ROOT value = 0 }
			reverse_opinion = { who = ROOT value = 0 }
			OR = {
				NOT = { has_character_flag = coronation_friend }
				had_character_flag = { flag = coronation_friend days = 10 }
			}
			OR = {
				NOT = { has_character_flag = coronation_event }
				had_character_flag = { flag = coronation_event days = 3 }
			}
		}
		NOT = { has_character_flag = coronation_event }
	}
	
	mean_time_to_happen = {
		days = 100
		modifier = {
			factor = 2.0
			tier = BARON
		}
		modifier = {
			factor = 1.5
			tier = COUNT
		}
		modifier = {
			factor = 1.5
			independent = no
		}
		modifier = {
			factor = 0.5
			trait = gregarious
		}
		modifier = {
			factor = 0.75
			trait = drunkard
		}
		modifier = {
			factor = 2
			trait = shy
		}
		modifier = {
			factor = 2
			trait = paranoid
		}
		modifier = {
			factor = 1.5
			any_independent_ruler = {
				has_character_flag = holding_coronation
				reverse_has_opinion_modifier = { who = ROOT modifier = attending_coronation }
				trait = shy
			}
		}
		modifier = {
			factor = 0.75
			any_independent_ruler = {
				has_character_flag = holding_coronation
				reverse_has_opinion_modifier = { who = ROOT modifier = attending_coronation }
				trait = gregarious
			}
		}
		modifier = {
			factor = 2
			any_independent_ruler = {
				has_character_flag = holding_coronation
				reverse_has_opinion_modifier = { who = ROOT modifier = attending_coronation }
				NOT = { reverse_opinion = { who = ROOT value = 0 } }
			}
		}
		modifier = {
			factor = 2
			any_independent_ruler = {
				has_character_flag = holding_coronation
				reverse_has_opinion_modifier = { who = ROOT modifier = attending_coronation }
				ROOT = { any_claim = { holder = PREVPREV } }
			}
		}
	}
	
	option = {
		name = EVTOPTA_Plus_1217
		set_character_flag = coronation_event
		random_independent_ruler = {
			limit = {
				has_character_flag = holding_coronation
				reverse_has_opinion_modifier = { who = ROOT modifier = attending_coronation }
			}
			set_character_flag = coronation_event
			set_character_flag = coronation_friend
			character_event = { id = Plus.1218 tooltip = coronation_friends }
		}
	}
}

character_event = {
	id = Plus.1218
	desc = EVTDESC_Plus_1218
	picture = GFX_evt_feast
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_Plus_1217
		random_list = {
			50 = {
				add_friend = FROM
			}
			25 = {
				opinion = { who = FROM modifier = coronation_friends multiplier = 2 months = 120 }
				hidden_tooltip = { reverse_opinion = { who = FROM modifier = coronation_friends multiplier = 2 months = 120 } }
			}
			25 = {
				opinion = { who = FROM modifier = coronation_friends months = 60 }
				hidden_tooltip = { reverse_opinion = { who = FROM modifier = coronation_friends months = 60 } }
			}
		}
	}
}

# Ruler argues with host over claim
character_event = {
	id = Plus.1219
	desc = EVTDESC_Plus_1219
	picture = GFX_evt_feast
	
	only_rulers = yes
	min_age = 16
	capable_only = yes
	prisoner = no
	
	trigger = {
		war = no
		any_independent_ruler = {
			NOT = {
				is_rival = ROOT
				num_of_rivals = 5
			}
			ROOT = {
				any_claim = { holder = PREVPREV }
			}
			has_character_flag = holding_coronation
			reverse_has_opinion_modifier = { who = ROOT modifier = attending_coronation }
			OR = {
				NOT = { has_character_flag = coronation_rival }
				had_character_flag = { flag = coronation_rival days = 10 }
			}
			OR = {
				NOT = { has_character_flag = coronation_event }
				had_character_flag = { flag = coronation_event days = 3 }
			}
		}
		NOT = { has_character_flag = coronation_event }
	}
	
	mean_time_to_happen = {
		days = 80
		modifier = {
			factor = 1.5
			independent = no
		}
		modifier = {
			factor = 0.5
			trait = envious
		}
		modifier = {
			factor = 0.5
			trait = wroth
		}
		modifier = {
			factor = 0.75
			trait = drunkard
		}
		modifier = {
			factor = 2
			trait = content
		}
		modifier = {
			factor = 1.5
			trait = charitable
		}
		modifier = {
			factor = 1.5
			trait = kind
		}
	}

	option = {
		name = EVTOPTA_Plus_1219
		set_character_flag = coronation_event
		random_independent_ruler = {
			limit = {
				has_character_flag = holding_coronation
				reverse_has_opinion_modifier = { who = ROOT modifier = attending_coronation }
			}
			set_character_flag = coronation_rival
			set_character_flag = coronation_event
			character_event = { id = Plus.1220 tooltip = coronation_rivals }
		}
	}
}

character_event = {
	id = Plus.1220
	desc = EVTDESC_Plus_1220
	picture = GFX_evt_feast
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_Plus_1220
		random_list = {
			50 = {
				add_rival = FROM
			}
			25 = {
				opinion = { who = FROM modifier = coronation_rivals multiplier = 2 months = 120 }
				hidden_tooltip = { reverse_opinion = { who = FROM modifier = coronation_rivals multiplier = 2 months = 120 } }
			}
			25 = {
				opinion = { who = FROM modifier = coronation_rivals months = 60 }
				hidden_tooltip = { reverse_opinion = { who = FROM modifier = coronation_rivals months = 60 } }
			}
		}
	}
}

# The Duel - begin
character_event = {
	id = Plus.1221
	
	hide_window = yes
	
	min_age = 16
	capable_only = yes
	prisoner = no
	only_men = yes
	only_playable = yes
	
	trigger = {
		war = no
		NOT = {
			trait = wounded
			trait = maimed
		}
		any_independent_ruler = {
			has_character_flag = holding_coronation
			reverse_has_opinion_modifier = { who = ROOT modifier = attending_coronation }
			NOT = { has_character_flag = coronation_duel }
			OR = {
				NOT = { has_character_flag = coronation_event }
				had_character_flag = { flag = coronation_event days = 3 }
			}
			OR = {
				any_realm_character = {
					war = no
					has_opinion_modifier = { who = PREV modifier = attending_coronation }
					is_female = no
					is_playable = yes
					OR = {
						martial = 8
						trait = duelist
						trait = lunatic
						trait = possessed
					}
					NOT = {
						trait = craven
						trait = wounded
						trait = maimed
						opinion = { who = ROOT value = -75 }
						has_character_flag = coronation_event
					}
				}
				any_independent_ruler = {
					any_realm_character = {
						war = no
						has_opinion_modifier = { who = PREVPREV modifier = attending_coronation }
						is_female = no
						is_playable = yes
						OR = {
							martial = 8
							trait = duelist
							trait = lunatic
							trait = possessed
						}
						NOT = {
							trait = craven
							trait = wounded
							trait = maimed
							opinion = { who = ROOT value = -75 }
							has_character_flag = coronation_event
						}
					}
				}	
				any_independent_ruler = {
					war = no
					NOT = { character = PREV }
					has_opinion_modifier = { who = PREV modifier = attending_coronation }
					is_female = no
					is_playable = yes
					OR = {
						martial = 8
						trait = duelist
						trait = lunatic
						trait = possessed
					}
					NOT = {
						trait = craven
						trait = wounded
						trait = maimed
						opinion = { who = ROOT value = -75 }
						has_character_flag = coronation_event
					}
				}
			}
		}
		NOT = { has_character_flag = coronation_event }
	}
	
	mean_time_to_happen = {
		days = 100
		modifier = {
			factor = 1.5
			trait = kind
		}
		modifier = {
			factor = 1.5
			trait = humble
		}
		modifier = {
			factor = 0.75
			trait = wroth
		}
		modifier = {
			factor = 0.5
			trait = duelist
		}
		modifier = {
			factor = 0.75
			trait = impaler
		}
		modifier = {
			factor = 0.75
			trait = cruel
		}
	}
	
	immediate = {
		random_independent_ruler = {
			limit = {
				has_character_flag = holding_coronation
				reverse_has_opinion_modifier = { who = ROOT modifier = attending_coronation }
				OR = {
					NOT = { has_character_flag = coronation_event }
					had_character_flag = { flag = coronation_event days = 3 }
				}
			}
			random_independent_ruler = {
				limit = {
					NOT = { character = PREV }
					has_opinion_modifier = { who = PREV modifier = attending_coronation }
					is_female = no
					is_playable = yes
					OR = {
						martial = 8
						trait = duelist
						trait = lunatic
						trait = possessed
					}
					NOT = {
						trait = craven
						trait = wounded
						trait = maimed
						opinion = { who = ROOT value = -75 }
						has_character_flag = coronation_event
					}
				}
				ROOT = { set_character_flag = found_duel_partner }
				set_character_flag = coronation_event
				character_event = { id = Plus.1222 }
			}
			random_independent_ruler = {
				limit = {
					any_realm_character = {
						war = no
						has_opinion_modifier = { who = PREVPREV modifier = attending_coronation }
						is_female = no
						is_playable = yes
						OR = {
							martial = 8
							trait = duelist
							trait = lunatic
							trait = possessed
						}
						NOT = {
							trait = craven
							trait = wounded
							trait = maimed
							opinion = { who = ROOT value = -75 }
							has_character_flag = coronation_event
						}
					}
				}
				random_realm_character = {
					limit = {
						ROOT = { NOT = { has_character_flag = found_duel_partner } }
						war = no
						has_opinion_modifier = { who = PREVPREV modifier = attending_coronation }
						is_female = no
						is_playable = yes
						OR = {
							martial = 8
							trait = duelist
							trait = lunatic
							trait = possessed
						}
						NOT = {
							trait = craven
							trait = wounded
							trait = maimed
							opinion = { who = ROOT value = -75 }
							has_character_flag = coronation_event
						}
					}
					ROOT = { set_character_flag = found_duel_partner }
					set_character_flag = coronation_event
					character_event = { id = Plus.1222 }
				}
			}
			random_realm_character = {
				limit = {
					ROOT = { NOT = { has_character_flag = found_duel_partner } }
					has_opinion_modifier = { who = PREV modifier = attending_coronation }
					is_female = no
					is_playable = yes
					OR = {
						martial = 8
						trait = duelist
						trait = lunatic
						trait = possessed
					}
					NOT = {
						trait = craven
						trait = wounded
						trait = maimed
						opinion = { who = ROOT value = -75 }
						has_character_flag = coronation_event
					}
				}
				set_character_flag = coronation_event
				character_event = { id = Plus.1222 }
			}
			clr_character_flag = found_duel_partner
		}
	}
}

# The Duel - character notified that enemy is present
character_event = {
	id = Plus.1222
	desc = EVTDESC_Plus_1222
	picture = GFX_evt_feast

	is_triggered_only = yes
	
	option = {
		name = EVTOPTA72030 # Challenge to a duel
		ai_chance = {
			factor = 70
			modifier = {
				factor = 0.5
				trait = kind
			}
			modifier = {
				factor = 0.5
				trait = humble
			}
			modifier = {
				factor = 0.5
				trait = content
			}
			modifier = {
				factor = 0.5
				trait = patient
			}
			modifier = {
				factor = 0.5
				trait = slothful
			}
		}
		set_character_flag = coronation_event
		FROM = {
			character_event = { id = Plus.1223 tooltip = EVTTOOLTIP72031 }
		}
	}
	option = {
		ai_chance = {
			factor = 30
			modifier = {
				factor = 0
				OR = {
					trait = drunkard
					trait = possessed
					trait = lunatic
					trait = wroth
					trait = cruel
					trait = duelist
				}
			}
			modifier = {
				factor = 0.5
				trait = brave
			}
			modifier = {
				factor = 0.5
				trait = proud
			}
		}
		name = EVTOPTB72030 # No challenge
		prestige = -20
	}
}

# The Duel - the challenge is made
character_event = {
	id = Plus.1223
	desc = EVTDESC72031
	picture = GFX_evt_feast
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA72031 # Accept the duel
		ai_chance = {
			factor = 70
			modifier = {
				factor = 0
				trait = craven
			}
			modifier = {
				factor = 0.5
				trait = kind
			}
			modifier = {
				factor = 0.5
				trait = humble
			}
			modifier = {
				factor = 0.5
				trait = content
			}
			modifier = {
				factor = 0.5
				trait = patient
			}
			modifier = {
				factor = 0.5
				trait = slothful
			}
		}
		random_independent_ruler = {
			limit = {
				has_character_flag = holding_coronation
				reverse_has_opinion_modifier = { who = ROOT modifier = attending_coronation }
			}
			set_character_flag = coronation_event
			set_character_flag = coronation_duel
			character_event = { id = Plus.1225 tooltip = ask_permission_to_duel }
		}
	}
	option = {
		name = EVTOPTB72031 # Refuse
		ai_chance = {
			factor = 30
			modifier = {
				factor = 0
				OR = {
					trait = drunkard
					trait = possessed
					trait = lunatic
					trait = wroth
					trait = cruel
					trait = duelist
				}
				NOT = { trait = craven }
			}
			modifier = {
				factor = 0.5
				trait = brave
			}
			modifier = {
				factor = 0.5
				trait = proud
			}
		}
		prestige = -20
		hidden_tooltip = {
			FROM = { character_event = { id = Plus.1224 } }
		}
	}
}

# The Duel - the challenged refuses the duel
character_event = {
	id = Plus.1224
	desc = EVTDESC_Plus_1224
	picture = GFX_evt_feast
	
	is_triggered_only = yes

	option = {
		name = EVTOPTA_Plus_1224
		prestige = 20
	}
}

# The Duel - the host is asked for permission to hold the duel
character_event = {
	id = Plus.1225
	desc = EVTDESC_Plus_1225
	picture = GFX_evt_feast
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_Plus_1225 # Absolutely not!
		trigger = { NOT = { diplomacy = 12 } }
		ai_chance = {
			factor = 30
		}
		FROM = { character_event = { id = Plus.1226 days = 1 tooltip = refused_duel } }
		FROMFROM = { character_event = { id = Plus.1226 days = 1 tooltip = refused_duel } }
	}
	option = {
		name = EVTOPTB_Plus_1225 # Talk them out of it
		trigger = { diplomacy = 12 }
		ai_chance = {
			factor = 30
		}
		tooltip_info = diplomacy
		FROM = { character_event = { id = Plus.1227 days = 1 tooltip = talked_out_of_duel } }
		FROMFROM = { character_event = { id = Plus.1227 days = 1 tooltip = talked_out_of_duel } }
	}
	option = {
		name = EVTOPTC_Plus_1225 # Let them fight
		ai_chance = {
			factor = 70
			modifier = {
				factor = 5
				OR = {
					trait = impaler
					trait = duelist
					trait = cruel
					trait = lunatic
					trait = possessed
				}
			}
			modifier = {
				factor = 2
				trait = arbitrary
			}
			modifier = {
				factor = 0.5
				trait = zealous
			}
			modifier = {
				factor = 0.5
				trait = kind
			}
			modifier = {
				factor = 0.5
				trait = just
			}
			modifier = {
				factor = 0.75
				trait = temperate
			}
			modifier = {
				factor = 0.75
				trait = charitable
			}
			modifier = {
				factor = 0.75
				trait = proud
			}
		}
		custom_tooltip = { text = let_the_duel_begin }
		hidden_tooltip = {
			random_list = {
				5 = { character_event = { id = Plus.1228 days = 1 } } # challenger loses and dies
				45 = { character_event = { id = Plus.1229 days = 1 } } # challenger loses and is wounded
				45 = { character_event = { id = Plus.1231 days = 1 } } # challenged loses and is wounded
				5 = { character_event = { id = Plus.1230 days = 1 } } # challenged loses and dies
			}
		}
	}
}

# The Duel - the host refuses to let them fight
character_event = {
	id = Plus.1226
	desc = EVTDESC_Plus_1226
	picture = GFX_evt_feast
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_Plus_1226
		prestige = -20
		opinion = {
			who = FROM
			modifier = opinion_insulted
			months = 60
		}
	}
}

# The Duel - the host diplomatically talks them out of fighting
character_event = {
	id = Plus.1227
	desc = EVTDESC_Plus_1227
	picture = GFX_evt_feast
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_Plus_1226
		prestige = -20
		opinion = {
			who = FROM
			modifier = opinion_impressed
			months = 60
		}
	}
}

# The Duel - the challenger loses and dies
character_event = {
	id = Plus.1228
	desc = EVTDESC_Plus_1228
	picture = GFX_evt_battle

	major = yes
	is_triggered_only = yes
	hide_from = yes
	
	major_trigger = {
		OR = {
			character = FROM
			character = FROMFROM
			character = FROMFROMFROM
			has_opinion_modifier = { who = FROM modifier = attending_coronation }
		}
	}
	
	option = {
		name = EVTOPTA_Plus_1228 # Most unfortunate
		trigger = { character = FROM }
		opinion = {
			who = FROMFROM
			modifier = opinion_disappointed
			months = 60
		}
		hidden_tooltip = {
			any_realm_character = {
				limit = {
					has_opinion_modifier = { who = ROOT modifier = attending_coronation }
					NOT = { character = FROMFROM }
					NOT = { character = FROMFROMFROM }
				}
				opinion = { who = FROM modifier = coronation_duel months = 24 }
				opinion = { who = FROMFROM modifier = coronation_duel multiplier = 2 months = 24 }
			}
			any_independent_ruler = {
				any_realm_character = {
					limit = {
						has_opinion_modifier = { who = ROOT modifier = attending_coronation }
						NOT = { character = FROMFROM }
						NOT = { character = FROMFROMFROM }
					}
					opinion = { who = FROM modifier = coronation_duel months = 24 }
					opinion = { who = FROMFROM modifier = coronation_duel multiplier = 2 months = 24 }
				}
			}
			any_independent_ruler = {
				limit = {
					has_opinion_modifier = { who = ROOT modifier = attending_coronation }
					NOT = { character = FROMFROM }
					NOT = { character = FROMFROMFROM }
				}
				opinion = { who = FROM modifier = coronation_duel months = 24 }
				opinion = { who = FROMFROM modifier = coronation_duel multiplier = 2 months = 24 }
			}
		}
	}
	option = {
		name = EVTOPTB_Plus_1228 # The bastard killed me!
		trigger = { character = FROMFROMFROM }
		death = {
			death_reason = death_duel
			killer = FROMFROM
		}
	}
	option = {
		name = EVTOPTC_Plus_1228 # Ha! He had it coming!
		trigger = { character = FROMFROM }
		prestige = 100
		piety = -50
		if = {
			limit = { NOT = { trait = scarred } }
			random = {
				chance = 30
				add_trait = scarred
			}
		}
		opinion = {
			who = FROM
			modifier = opinion_grateful
			months = 60
		}
	}
	option = {
		name = EVTOPTD_Plus_1228 # How scandalous!
		trigger = {
			NOT = {
				character = FROM
				character = FROMFROM
				character = FROMFROMFROM
			}
			has_opinion_modifier = { who = FROM modifier = attending_coronation }
		}
	}
}

# The Duel - the challenger loses and is wounded
character_event = {
	id = Plus.1229
	desc = EVTDESC_Plus_1229
	picture = GFX_evt_battle

	major = yes
	is_triggered_only = yes
	hide_from = yes
	
	major_trigger = {
		OR = {
			character = FROM
			character = FROMFROM
			character = FROMFROMFROM
			has_opinion_modifier = { who = FROM modifier = attending_coronation }
		}
	}
	
	option = {
		name = EVTOPTA_Plus_1229 # There, it is done
		trigger = { character = FROM }
	}
	option = {
		name = EVTOPTB_Plus_1229 # He must have cheated!
		trigger = { character = FROMFROMFROM }
		random_list = {
			75 = { add_trait = wounded }
			25 = { add_trait = maimed }
		}
		if = {
			limit = { NOT = { trait = scarred } }
			random = {
				chance = 30
				add_trait = scarred
			}
		}
		if = {
			limit = { NOT = { is_rival = FROMFROM } }
			add_rival = FROMFROM
		}
		opinion = {
			who = FROM
			modifier = opinion_grateful
			months = 60
		}
	}
	option = {
		name = EVTOPTC_Plus_1229 # Victory is mine!
		trigger = { character = FROMFROM }
		prestige = 200
		if = {
			limit = { NOT = { trait = scarred } }
			random = {
				chance = 30
				add_trait = scarred
			}
		}
		opinion = {
			who = FROM
			modifier = opinion_grateful
			months = 60
		}
	}
	option = {
		name = EVTOPTD_Plus_1228 # How scandalous!
		trigger = {
			NOT = {
				character = FROM
				character = FROMFROM
				character = FROMFROMFROM
			}
			has_opinion_modifier = { who = FROM modifier = attending_coronation }
		}
	}
}

# The Duel - the challenged loses and is wounded
character_event = {
	id = Plus.1230
	desc = EVTDESC_Plus_1230
	picture = GFX_evt_battle

	major = yes
	is_triggered_only = yes
	hide_from = yes
	
	major_trigger = {
		OR = {
			character = FROM
			character = FROMFROM
			character = FROMFROMFROM
			has_opinion_modifier = { who = FROM modifier = attending_coronation }
		}
	}
	
	option = {
		name = EVTOPTA_Plus_1229 # There, it is done
		trigger = { character = FROM }
	}
	option = {
		name = EVTOPTB_Plus_1229 # He must have cheated!
		trigger = { character = FROMFROM }
		random_list = {
			75 = { add_trait = wounded }
			25 = { add_trait = maimed }
		}
		if = {
			limit = { NOT = { trait = scarred } }
			random = {
				chance = 30
				add_trait = scarred
			}
		}
		if = {
			limit = { NOT = { is_rival = FROMFROMFROM } }
			add_rival = FROMFROMFROM
		}
		opinion = {
			who = FROM
			modifier = opinion_grateful
			months = 60
		}
	}
	option = {
		name = EVTOPTC_Plus_1229 # Victory is mine!
		trigger = { character = FROMFROMFROM }
		prestige = 200
		if = {
			limit = { NOT = { trait = scarred } }
			random = {
				chance = 30
				add_trait = scarred
			}
		}
		opinion = {
			who = FROM
			modifier = opinion_grateful
			months = 60
		}
	}
	option = {
		name = EVTOPTD_Plus_1228 # How scandalous!
		trigger = {
			NOT = {
				character = FROM
				character = FROMFROM
				character = FROMFROMFROM
			}
			has_opinion_modifier = { who = FROM modifier = attending_coronation }
		}
	}
}

# The Duel - the challenged loses and dies
character_event = {
	id = Plus.1231
	desc = EVTDESC_Plus_1231
	picture = GFX_evt_battle

	major = yes
	is_triggered_only = yes
	hide_from = yes
	
	major_trigger = {
		OR = {
			character = FROM
			character = FROMFROM
			character = FROMFROMFROM
			has_opinion_modifier = { who = FROM modifier = attending_coronation }
		}
	}
	
	option = {
		name = EVTOPTA_Plus_1228 # Most unfortunate
		trigger = { character = FROM }
		opinion = {
			who = FROMFROMFROM
			modifier = opinion_disappointed
			months = 60
		}
		hidden_tooltip = {
			any_realm_character = {
				limit = {
					has_opinion_modifier = { who = ROOT modifier = attending_coronation }
					NOT = { character = FROMFROM }
					NOT = { character = FROMFROMFROM }
				}
				opinion = { who = FROM modifier = coronation_duel months = 24 }
				opinion = { who = FROMFROMFROM modifier = coronation_duel multiplier = 2 months = 24 }
			}
			any_independent_ruler = {
				any_realm_character = {
					limit = {
						has_opinion_modifier = { who = ROOT modifier = attending_coronation }
						NOT = { character = FROMFROM }
						NOT = { character = FROMFROMFROM }
					}
					opinion = { who = FROM modifier = coronation_duel months = 24 }
					opinion = { who = FROMFROMFROM modifier = coronation_duel multiplier = 2 months = 24 }
				}
			}
			any_independent_ruler = {
				limit = {
					has_opinion_modifier = { who = ROOT modifier = attending_coronation }
					NOT = { character = FROMFROM }
					NOT = { character = FROMFROMFROM }
				}
				opinion = { who = FROM modifier = coronation_duel months = 24 }
				opinion = { who = FROMFROMFROM modifier = coronation_duel multiplier = 2 months = 24 }
			}
		}
	}
	option = {
		name = EVTOPTB_Plus_1228 # The bastard killed me!
		trigger = { character = FROMFROM }
		death = {
			death_reason = death_duel
			killer = FROMFROMFROM
		}
	}
	option = {
		name = EVTOPTC_Plus_1228 # Ha! He had it coming!
		trigger = { character = FROMFROMFROM }
		prestige = 100
		piety = -50
		if = {
			limit = { NOT = { trait = scarred } }
			random = {
				chance = 30
				add_trait = scarred
			}
		}
		opinion = {
			who = FROM
			modifier = opinion_grateful
			months = 60
		}
	}
	option = {
		name = EVTOPTD_Plus_1228 # How scandalous!
		trigger = {
			NOT = {
				character = FROM
				character = FROMFROM
				character = FROMFROMFROM
			}
			has_opinion_modifier = { who = FROM modifier = attending_coronation }
		}
	}
}

# Wife/husband is upset that lover attends the coronation
character_event = {
	id = Plus.1232
	desc = EVTDESC_Plus_1232
	picture = GFX_evt_feast
	
	capable_only = yes
	prisoner = no
	
	trigger = {
		is_married = yes
		any_spouse = {
			trait = crowned
			has_character_flag = holding_coronation
			reverse_has_opinion_modifier = { who = ROOT modifier = attending_coronation }
			OR = {
				NOT = { has_character_flag = coronation_event }
				had_character_flag = { flag = coronation_event days = 3 }
			}
			any_lover = {
				NOT = { character = ROOT }
				has_opinion_modifier = { who = PREV modifier = attending_coronation }
			}
		}
		NOT = { has_character_flag = coronation_event }
	}
	
	mean_time_to_happen = {
		days = 40
		modifier = {
			factor = 0.5
			trait = wroth
		}
		modifier = {
			factor = 0.5
			trait = proud
		}
		modifier = {
			factor = 2
			trait = patient
		}
		modifier = {
			factor = 2
			trait = humble
		}
	}
	
	option = {
		name = EVTOPTA_Plus_1232
		set_character_flag = coronation_event
		random_spouse = {
			limit = {
				trait = crowned
				has_character_flag = holding_coronation
				reverse_has_opinion_modifier = { who = ROOT modifier = attending_coronation }
			}
			random_lover = {
				limit = {
					NOT = { character = ROOT }
					has_opinion_modifier = { who = PREV modifier = attending_coronation }
					NOT = { has_character_flag = coronation_event }
				}
				reverse_opinion = {
					who = ROOT
					modifier = opinion_outraged
					months = 60
				}
			}
			set_character_flag = coronation_event
			character_event = { id = Plus.1233 tooltip = lover_at_coronation }
		}
	}
}

character_event = {
	id = Plus.1233
	desc = EVTDESC_Plus_1233
	picture = GFX_evt_feast
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_Plus_1233
		prestige = -20
		reverse_opinion = {
			who = FROM
			modifier = opinion_outraged
			months = 60
		}
	}
}

# Poet puts on a show at the coronation
character_event = {
	id = Plus.1234
	desc = EVTDESC_Plus_1234
	picture = GFX_evt_feast
	
	min_age = 16
	capable_only = yes
	prisoner = no
	
	trigger = {
		war = no
		trait = poet
		NOT = {
			trait = depressed
			trait = stressed
		}
		any_independent_ruler = {
			has_character_flag = holding_coronation
			reverse_has_opinion_modifier = { who = ROOT modifier = attending_coronation }
			reverse_opinion = { who = ROOT value = 25 }
			NOT = { has_character_flag = coronation_poetry }
			OR = {
				NOT = { has_character_flag = coronation_event }
				had_character_flag = { flag = coronation_event days = 3 }
			}
		}
		NOT = { has_character_flag = coronation_event }
	}
	
	mean_time_to_happen = {
		days = 60
		modifier = {
			factor = 0.5
			trait = ambitious
		}
		modifier = {
			factor = 0.75
			trait = proud
		}
		modifier = {
			factor = 0.75
			trait = gregarious
		}
		modifier = {
			factor = 1.5
			trait = humble
		}
		modifier = {
			factor = 2
			trait = shy
		}
	}
	
	option = {
		name = EVTOPTA_Plus_1234 # I'll do it!
		set_character_flag = coronation_event
		if = {
			limit = { diplomacy = 15 }
			random_independent_ruler = {
				limit = {
					has_character_flag = holding_coronation
					reverse_has_opinion_modifier = { who = ROOT modifier = attending_coronation }
					reverse_opinion = { who = ROOT value = 25 }
					NOT = { has_character_flag = coronation_poetry }
					OR = {
						NOT = { has_character_flag = coronation_event }
						had_character_flag = { flag = coronation_event days = 3 }
					}
				}
				set_character_flag = coronation_event
				set_character_flag = coronation_poetry
				random_list = {
					80 = { character_event = { id = Plus.1235 tooltip = coronation_poetry_good } }
					20 = { character_event = { id = Plus.1236 tooltip = coronation_poetry_bad } }
				}
			}
		}
		if = {
			limit = {
				NOT = { diplomacy = 15 }
				diplomacy = 8
			}
			random_independent_ruler = {
				limit = {
					has_character_flag = holding_coronation
					reverse_has_opinion_modifier = { who = ROOT modifier = attending_coronation }
					reverse_opinion = { who = ROOT value = 25 }
					NOT = { has_character_flag = coronation_poetry }
					OR = {
						NOT = { has_character_flag = coronation_event }
						had_character_flag = { flag = coronation_event days = 3 }
					}
				}
				set_character_flag = coronation_event
				set_character_flag = coronation_poetry
				random_list = {
					60 = { character_event = { id = Plus.1235 tooltip = coronation_poetry_good } }
					40 = { character_event = { id = Plus.1236 tooltip = coronation_poetry_bad } }
				}
			}
		}
		if = {
			limit = { NOT = { diplomacy = 8 } }
			random_independent_ruler = {
				limit = {
					has_character_flag = holding_coronation
					reverse_has_opinion_modifier = { who = ROOT modifier = attending_coronation }
					reverse_opinion = { who = ROOT value = 25 }
					NOT = { has_character_flag = coronation_poetry }
					OR = {
						NOT = { has_character_flag = coronation_event }
						had_character_flag = { flag = coronation_event days = 3 }
					}
				}
				set_character_flag = coronation_event
				set_character_flag = coronation_poetry
				random_list = {
					40 = { character_event = { id = Plus.1235 tooltip = coronation_poetry_good } }
					60 = { character_event = { id = Plus.1236 tooltip = coronation_poetry_bad } }
				}
			}
		}
	}
	option = {
		name = EVTOPTB_Plus_1234 # I'd rather not risk it
		trigger = { ai = no }
		random = {
			chance = 30
			add_trait = depressed
		}
	}
}

# The poetry goes over well
character_event = {
	id = Plus.1235
	desc = EVTDESC_Plus_1235
	picture = GFX_evt_feast
	
	major = yes
	is_triggered_only = yes
	
	major_trigger = {
		OR = {
			character = ROOT
			character = FROM
			has_opinion_modifier = { who = ROOT modifier = attending_coronation }
		}
	}
	
	option = {
		name = EVTOPTA_Plus_1235
		trigger = { character = ROOT }
		prestige = 50
		opinion = {
			who = FROM
			modifier = opinion_approves
			months = 60
		}
	}
	option = {
		name = EVTOPTB_Plus_1235
		trigger = { character = FROM }
		prestige = 50
		change_diplomacy = 1
	}
	option = {
		name = EVTOPTC_Plus_1235
		trigger = {
			NOT = { character = ROOT }
			NOT = { character = FROM }
			has_opinion_modifier = { who = ROOT modifier = attending_coronation }
		}
	}
}

# The poetry goes over poorly
character_event = {
	id = Plus.1236
	desc = EVTDESC_Plus_1236
	picture = GFX_evt_feast
	
	major = yes
	is_triggered_only = yes
	
	major_trigger = {
		OR = {
			character = ROOT
			character = FROM
			has_opinion_modifier = { who = ROOT modifier = attending_coronation }
		}
	}
	
	option = {
		name = EVTOPTA_Plus_1236
		trigger = { character = ROOT }
		prestige = -20
		opinion = {
			who = FROM
			modifier = opinion_disapprove
			months = 60
		}
	}
	option = {
		name = EVTOPTB_Plus_1236
		trigger = { character = FROM }
		prestige = -50
		add_trait = depressed
	}
	option = {
		name = EVTOPTC_Plus_1236
		trigger = {
			NOT = { character = ROOT }
			NOT = { character = FROM }
			has_opinion_modifier = { who = ROOT modifier = attending_coronation }
		}
	}
}

# Ruler gives a toast at the coronation
character_event = {
	id = Plus.1237
	
	hide_window = yes
	
	only_rulers = yes
	min_age = 16
	capable_only = yes
	prisoner = no
	
	trigger = {
		ai = yes
		war = no
		diplomacy = 8
		NOT = {
			trait = shy
			trait = envious
			trait = cruel
		}
		any_independent_ruler = {
			has_character_flag = holding_coronation
			reverse_has_opinion_modifier = { who = ROOT modifier = attending_coronation }
			reverse_opinion = { who = ROOT value = 0 }
			OR = {
				NOT = { has_character_flag = coronation_toast }
				had_character_flag = { flag = coronation_toast days = 10 }
			}
			OR = {
				NOT = { has_character_flag = coronation_event }
				had_character_flag = { flag = coronation_event days = 3 }
			}
		}
		NOT = { has_character_flag = coronation_event }
	}
	
	mean_time_to_happen = {
		days = 100
		modifier = {
			factor = 2.0
			tier = BARON
		}
		modifier = {
			factor = 1.5
			tier = COUNT
		}
		modifier = {
			factor = 0.75
			lower_real_tier_than = KING
			trait = ambitious
		}
		modifier = {
			factor = 0.75
			trait = gregarious
		}
		modifier = {
			factor = 0.75
			trait = humble
		}
		modifier = {
			factor = 0.75
			trait = kind
		}
		modifier = {
			factor = 0.75
			diplomacy = 12
		}
		modifier = {
			factor = 0.75
			diplomacy = 16
		}
		modifier = {
			factor = 1.5
			lower_real_tier_than = KING
			trait = content
		}
		modifier = {
			factor = 2
			trait = proud
		}
		modifier = {
			factor = 2
			trait = slothful
		}
		modifier = {
			factor = 2
			trait = craven
		}
	}

	immediate = {
		set_character_flag = coronation_event
		random_independent_ruler = {
			limit = {
				has_character_flag = holding_coronation
				reverse_has_opinion_modifier = { who = ROOT modifier = attending_coronation }
			}
			set_character_flag = coronation_event
			set_character_flag = coronation_toast
			character_event = { id = Plus.1238 }
		}
	}
}

character_event = {
	id = Plus.1238
	desc = EVTDESC_Plus_1238
	picture = GFX_evt_feast
	
	is_triggered_only = yes
	major = yes
	
	major_trigger = {
		OR = {
			character = ROOT
			has_opinion_modifier = { who = ROOT modifier = attending_coronation }
		}
	}
	
	option = {
		name = EVTOPTA_Plus_1238
		trigger = { character = ROOT }
		prestige = 10
		opinion = {
			who = FROM
			modifier = opinion_pleased
			months = 24
		}
	}
	option = {
		name = EVTOPTB_Plus_1238
		trigger = { NOT = { character = ROOT } }
	}
}

# A dance with the host?
character_event = {
	id = Plus.1239
	
	hide_window = yes
	
	min_age = 16
	max_age = 40
	capable_only = yes
	prisoner = no
	
	trigger = {
		ai = yes
		war = no
		OR = {
			is_married = no
			NOT = { trait = chaste }
		}
		OR = {
			has_lover = no
			AND = {
				trait = lustful
				NOT = { num_of_lovers = 5 }
			}
		}
		is_pregnant = no
		NOT = {
			trait = infirm
			trait = celibate
			trait = eunuch
			trait = hunchback
			trait = dwarf
			trait = ugly
			trait = homosexual
			trait = chaste
		}
		any_independent_ruler = {
			has_character_flag = holding_coronation
			reverse_has_opinion_modifier = { who = ROOT modifier = attending_coronation }
			reverse_opinion = { who = ROOT value = 0 }
			opinion = { who = ROOT value = 0 }
			is_pregnant = no
			NOT = {
				trait = infirm
				trait = incapable
				trait = celibate
				trait = eunuch
				trait = homosexual
				trait = chaste
				is_former_lover = ROOT
				is_rival = ROOT
				is_close_relative = ROOT
				any_consort = { character = ROOT }
				any_lover = { character = ROOT }
				has_character_flag = coronation_lover
			}
			OR = {
				is_married = no
				NOT = { trait = chaste }
			}
			OR = {
				has_lover = no
				AND = {
					trait = lustful
					NOT = { num_of_lovers = 5 }
				}
			}
			OR = {
				NOT = { has_character_flag = coronation_event }
				had_character_flag = { flag = coronation_event days = 3 }
			}
		}
		NOT = { has_character_flag = coronation_event }
	}
	
	mean_time_to_happen = {
		days = 200
		modifier = {
			factor = 2.0
			religion_group = muslim
		}
		modifier = {
			factor = 0.75
			NOT = { age = 20 }
		}
		modifier = {
			factor = 1.5
			NOT = { trait = ambitious }
		}
		modifier = {
			factor = 0.75
			trait = hedonist
		}
		modifier = {
			factor = 0.75
			trait = lustful
		}
		modifier = {
			factor = 0.5
			trait = fair
		}
		modifier = {
			factor = 0.75
			trait = poet
		}
		modifier = {
			factor = 0.75
			trait = gregarious
		}
		modifier = {
			factor = 2.0
			trait = imbecile
		}
		modifier = {
			factor = 3.0
			trait = inbred
		}
		modifier = {
			factor = 3.0
			trait = blinded
		}
		modifier = {
			factor = 0.5
			has_ambition = obj_find_lover
		}
		modifier = {
			factor = 0.5
			any_independent_ruler = {
				has_character_flag = holding_coronation
				reverse_has_opinion_modifier = { who = ROOT modifier = attending_coronation }
				has_ambition = obj_find_lover
			}
		}
		modifier = {
			factor = 0.75
			any_independent_ruler = {
				has_character_flag = holding_coronation
				reverse_has_opinion_modifier = { who = ROOT modifier = attending_coronation }
				trait = lustful
			}
		}
		modifier = {
			factor = 0.75
			any_independent_ruler = {
				has_character_flag = holding_coronation
				reverse_has_opinion_modifier = { who = ROOT modifier = attending_coronation }
				trait = hedonist
			}
		}
	}
	
	immediate = {
		set_character_flag = coronation_event
		random_independent_ruler = {
			limit = {
				has_character_flag = holding_coronation
				reverse_has_opinion_modifier = { who = ROOT modifier = attending_coronation }
			}
			set_character_flag = coronation_event
			set_character_flag = coronation_lover
			character_event = { id = Plus.1240 }
		}
	}
}

character_event = {
	id = Plus.1240
	desc = EVTDESC_Plus_1240
	picture = GFX_evt_courtly_love
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_Plus_1240 # Pursue him/her
		add_lover = FROM
		hidden_tooltip = {
			if = {
				limit = {
					is_female = no
					fertility = 0.33
					FROM = {
						is_female = yes
						fertility = 0.33
					}
				}
				if = {
					limit = { FROM = { is_married = no } }
					random = {
						chance = 50
						ROOT = { impregnate = FROM }
					}
				}
				if = {
					limit = { FROM = { is_married = yes } }
					random = {
						chance = 50
						ROOT = { impregnate_cuckoo = FROM }
					}
				}
			}
			if = {
				limit = {
					NOT = { age = 45 }
					is_female = yes
					fertility = 0.33
					FROM = {
						is_female = no
						fertility = 0.33
					}
				}
				if = {
					limit = { is_married = no }
					random = {
						chance = 50
						FROM = { impregnate = ROOT }
					}
				}
				if = {
					limit = { is_married = yes }
					random = {
						chance = 50
						FROM = { impregnate_cuckoo = ROOT }
					}
				}
			}
		}
	}
	option = {
		name = EVTOPTB_Plus_1240 # A dance is more than enough
		trigger = { ai = no }
		reverse_opinion = {
			who = FROM
			modifier = opinion_spurned
			months = 60
		}
	}
}

# A homosexual guest is interested in the host
character_event = {
	id = Plus.1241
	
	hide_window = yes
	
	min_age = 16
	max_age = 40
	capable_only = yes
	prisoner = no
	
	trigger = {
		ai = yes
		war = no
		trait = homosexual
		OR = {
			is_married = no
			NOT = { trait = chaste }
		}
		OR = {
			has_lover = no
			AND = {
				trait = lustful
				NOT = { num_of_lovers = 5 }
			}
		}
		NOT = {
			trait = infirm
			trait = celibate
			trait = eunuch
			trait = hunchback
			trait = dwarf
			trait = ugly
			trait = chaste
		}
		any_independent_ruler = {
			has_character_flag = holding_coronation
			reverse_has_opinion_modifier = { who = ROOT modifier = attending_coronation }
			reverse_opinion = { who = ROOT value = 0 }
			opinion = { who = ROOT value = 0 }
			trait = homosexual
			is_pregnant = no
			OR = {
				AND = {
					is_female = yes
					ROOT = { is_female = yes }
				}
				AND = {
					is_female = no
					ROOT = { is_female = no }
				}
			}
			NOT = {
				trait = infirm
				trait = incapable
				trait = celibate
				trait = eunuch
				trait = chaste
				is_former_lover = ROOT
				is_rival = ROOT
				is_close_relative = ROOT
				any_consort = { character = ROOT }
				any_lover = { character = ROOT }
				has_character_flag = coronation_lover
			}
			OR = {
				has_lover = no
				AND = {
					trait = lustful
					NOT = { num_of_lovers = 5 }
				}
			}
			OR = {
				NOT = { has_character_flag = coronation_event }
				had_character_flag = { flag = coronation_event days = 3 }
			}
		}
		NOT = { has_character_flag = coronation_event }
	}
	
	mean_time_to_happen = {
		days = 70
		modifier = {
			factor = 2.0
			religion_group = muslim
		}
		modifier = {
			factor = 0.75
			NOT = { age = 20 }
		}
		modifier = {
			factor = 1.5
			NOT = { trait = ambitious }
		}
		modifier = {
			factor = 0.75
			trait = hedonist
		}
		modifier = {
			factor = 0.75
			trait = lustful
		}
		modifier = {
			factor = 0.5
			trait = fair
		}
		modifier = {
			factor = 0.75
			trait = poet
		}
		modifier = {
			factor = 0.75
			trait = gregarious
		}
		modifier = {
			factor = 2.0
			trait = imbecile
		}
		modifier = {
			factor = 3.0
			trait = inbred
		}
		modifier = {
			factor = 3.0
			trait = blinded
		}
		modifier = {
			factor = 0.5
			has_ambition = obj_find_lover
		}
		modifier = {
			factor = 0.5
			any_independent_ruler = {
				has_character_flag = holding_coronation
				reverse_has_opinion_modifier = { who = ROOT modifier = attending_coronation }
				has_ambition = obj_find_lover
			}
		}
		modifier = {
			factor = 0.75
			any_independent_ruler = {
				has_character_flag = holding_coronation
				reverse_has_opinion_modifier = { who = ROOT modifier = attending_coronation }
				trait = lustful
			}
		}
		modifier = {
			factor = 0.75
			any_independent_ruler = {
				has_character_flag = holding_coronation
				reverse_has_opinion_modifier = { who = ROOT modifier = attending_coronation }
				trait = hedonist
			}
		}
	}
	
	immediate = {
		set_character_flag = coronation_event
		random_independent_ruler = {
			limit = {
				has_character_flag = holding_coronation
				reverse_has_opinion_modifier = { who = ROOT modifier = attending_coronation }
			}
			set_character_flag = coronation_event
			set_character_flag = coronation_lover
			character_event = { id = Plus.1242 }
		}
	}
}

character_event = {
	id = Plus.1242
	desc = EVTDESC_Plus_1240
	picture = GFX_evt_courtly_love
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_Plus_1240 # Pursue him/her
		add_lover = FROM
	}
	option = {
		name = EVTOPTB_Plus_1240 # Not interested
		trigger = { ai = no }
		reverse_opinion = {
			who = FROM
			modifier = opinion_spurned
			months = 60
		}
	}
}

# Guest is badmouthing the host
character_event = {
	id = Plus.1243
	
	hide_window = yes
	
	only_rulers = yes
	min_age = 16
	capable_only = yes
	prisoner = no
	
	trigger = {
		ai = yes
		war = no
		OR = {
			trait = cruel
			trait = envious
			trait = deceitful
			trait = wroth
		}
		any_independent_ruler = {
			has_character_flag = holding_coronation
			reverse_has_opinion_modifier = { who = ROOT modifier = attending_coronation }
			NOT = { reverse_opinion = { who = ROOT value = 0 } }
			NOT = { num_of_rivals = 5 }
			OR = {
				NOT = { has_character_flag = coronation_badmouth }
				had_character_flag = { flag = coronation_badmouth days = 10 }
			}
			OR = {
				NOT = { has_character_flag = coronation_event }
				had_character_flag = { flag = coronation_event days = 3 }
			}
		}
		NOT = { has_character_flag = coronation_event }
	}
	
	mean_time_to_happen = {
		days = 100
		modifier = {
			factor = 3.0
			tier = BARON
		}
		modifier = {
			factor = 2.0
			tier = COUNT
		}
		modifier = {
			factor = 1.5
			independent = no
		}
		modifier = {
			factor = 0.5
			OR = {
				trait = cruel
				trait = lunatic
				trait = possessed
			}
		}
		modifier = {
			factor = 0.75
			any_independent_ruler = {
				has_character_flag = holding_coronation
				reverse_has_opinion_modifier = { who = ROOT modifier = attending_coronation }
				NOT = { reverse_opinion = { who = ROOT value = -25 } }
			}
		}
		modifier = {
			factor = 0.75
			any_independent_ruler = {
				has_character_flag = holding_coronation
				reverse_has_opinion_modifier = { who = ROOT modifier = attending_coronation }
				NOT = { reverse_opinion = { who = ROOT value = -50 } }
			}
		}
	}
	
	immediate = {
		set_character_flag = coronation_event
		random_independent_ruler = {
			limit = {
				has_character_flag = holding_coronation
				reverse_has_opinion_modifier = { who = ROOT modifier = attending_coronation }
			}
			set_character_flag = coronation_badmouth
			set_character_flag = coronation_event
			character_event = { id = Plus.1244 }
		}
	}
}

character_event = {
	id = Plus.1244
	desc = EVTDESC_Plus_1244
	picture = GFX_evt_feast
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_Plus_1244 # Endure it
		ai_chance = {
			factor = 50
			modifier = {
				factor = 2
				trait = patient
			}
			modifier = {
				factor = 2
				trait = kind
			}
			modifier = {
				factor = 1.5
				trait = craven
			}
		}
		prestige = -20
		if = {
			limit = { NOT = { trait = patient } }
			random = {
				chance = 20
				add_trait = patient
			}
		}
		opinion = {
			who = FROM
			modifier = opinion_insulted
			months = 60
		}
	}
	option = {
		name = EVTOPTB_Plus_1244 # This cannot be endured
		ai_chance = {
			factor = 50
			modifier = {
				factor = 2
				trait = wroth
			}
			modifier = {
				factor = 2
				trait = cruel
			}
			modifier = {
				factor = 1.5
				trait = brave
			}
		}
		if = {
			limit = { NOT = { trait = wroth } }
			random = {
				chance = 20
				add_trait = wroth
			}
		}
		random_list = {
			20 = {
				reverse_opinion = { who = FROM modifier = opinion_impressed months = 24 }
			}
			40 = {
				reverse_opinion = { who = FROM modifier = opinion_furious months = 60 }
				hidden_tooltip = { opinion = { who = FROM modifier = opinion_insulted months = 60 } }
			}
			40 = {
				add_rival = FROM
			}
		}	
	}
}

# Guest overindulges and makes a spectacle of themselves
character_event = {
	id = Plus.1245
	
	hide_window = yes
	
	min_age = 16
	capable_only = yes
	prisoner = no
	
	trigger = {
		ai = yes
		war = no
		OR = {
			trait = drunkard
			trait = depressed
			trait = imbecile
			trait = inbred
		}
		any_independent_ruler = {
			NOT = { trait = drunkard }
			has_character_flag = holding_coronation
			reverse_has_opinion_modifier = { who = ROOT modifier = attending_coronation }
			NOT = { has_character_flag = coronation_drunkard }
			OR = {
				NOT = { has_character_flag = coronation_event }
				had_character_flag = { flag = coronation_event days = 3 }
			}
		}
		NOT = { has_character_flag = coronation_event }
	}
	
	mean_time_to_happen = {
		months = 100
		modifier = {
			factor = 2
			is_ruler = no
		}
		modifier = {
			factor = 1.5
			tier = BARON
		}
		modifier = {
			factor = 1.5
			NOT = { trait = drunkard }
		}
	}
	
	immediate = {
		set_character_flag = coronation_event
		prestige = -20
		random_independent_ruler = {
			limit = {
				has_character_flag = holding_coronation
				reverse_has_opinion_modifier = { who = ROOT modifier = attending_coronation }
			}
			set_character_flag = coronation_event
			set_character_flag = coronation_drunkard
			character_event = { id = Plus.1246 }
		}
	}
}

character_event = {
	id = Plus.1246
	desc = EVTDESC_Plus_1246
	picture = GFX_evt_feast
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_Plus_1246
		opinion = {
			who = FROM
			modifier = opinion_feast_scandal
			months = 24
		}
		hidden_tooltip = {
			any_realm_character = {
				limit = {
					NOT = { character = FROM }
					NOT = { trait = drunkard }
					has_opinion_modifier = { who = ROOT modifier = attending_coronation }
				}
				opinion = { who = FROM modifier = opinion_feast_scandal months = 24 }
			}
			any_independent_ruler = {
				any_realm_character = {
					limit = {
						NOT = { character = FROM }
						NOT = { trait = drunkard }
						has_opinion_modifier = { who = ROOT modifier = attending_coronation }
					}
					opinion = { who = FROM modifier = opinion_feast_scandal months = 24 }
				}
			}
			any_independent_ruler = {
				limit = {
					NOT = { character = FROM }
					NOT = { trait = drunkard }
					has_opinion_modifier = { who = ROOT modifier = attending_coronation }
				}
				opinion = { who = FROM modifier = opinion_feast_scandal months = 24 }
			}
		}
	}
}

# Lunatic guest makes a spectacle of themselves
character_event = {
	id = Plus.1247
	
	hide_window = yes
	
	min_age = 16
	capable_only = yes
	prisoner = no
	
	trigger = {
		ai = yes
		war = no
		OR = {
			trait = lunatic
			trait = possessed
		}
		any_independent_ruler = {
			has_character_flag = holding_coronation
			reverse_has_opinion_modifier = { who = ROOT modifier = attending_coronation }
			NOT = { has_character_flag = coronation_lunatic }
			OR = {
				NOT = { has_character_flag = coronation_event }
				had_character_flag = { flag = coronation_event days = 3 }
			}
		}
		NOT = { has_character_flag = coronation_event }
	}
	
	mean_time_to_happen = {
		months = 100
		modifier = {
			factor = 2
			is_ruler = no
		}
		modifier = {
			factor = 1.5
			tier = BARON
		}
	}
	
	immediate = {
		set_character_flag = coronation_event
		prestige = -20
		random_independent_ruler = {
			limit = {
				has_character_flag = holding_coronation
				reverse_has_opinion_modifier = { who = ROOT modifier = attending_coronation }
			}
			set_character_flag = coronation_event
			set_character_flag = coronation_lunatic
			character_event = { id = Plus.1248 }
		}
	}
}

character_event = {
	id = Plus.1248
	desc = EVTDESC_Plus_1248
	picture = GFX_evt_feast
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_Plus_1246
		opinion = {
			who = FROM
			modifier = opinion_feast_scandal
			multiplier = 2
			months = 24
		}
		reverse_opinion = {
			who = FROM
			modifier = opinion_insulted
			months = 60
		}
		hidden_tooltip = {
			any_realm_character = {
				limit = {
					NOT = { character = FROM }
					has_opinion_modifier = { who = ROOT modifier = attending_coronation }
				}
				opinion = { who = FROM modifier = opinion_feast_scandal months = 24 }
			}
			any_independent_ruler = {
				any_realm_character = {
					limit = {
						NOT = { character = FROM }
						has_opinion_modifier = { who = ROOT modifier = attending_coronation }
					}
					opinion = { who = FROM modifier = opinion_feast_scandal months = 24 }
				}
			}
			any_independent_ruler = {
				limit = {
					NOT = { character = FROM }
					has_opinion_modifier = { who = ROOT modifier = attending_coronation }
				}
				opinion = { who = FROM modifier = opinion_feast_scandal months = 24 }
			}
		}
	}
}

# The coronation feast ends
character_event = {
	id = Plus.1275
	desc = EVTDESC_Plus_1275
	picture = GFX_evt_feast
	
	is_triggered_only = yes
	major = yes
	
	major_trigger = {
		OR = {
			character = FROM
			has_opinion_modifier = { who = FROM modifier = attending_coronation }
		}
	}
	
	immediate = {
		clr_character_flag = holding_coronation
	}
	
	option = {
		name = EVTOPTA_Plus_1275
		trigger = { character = FROM }
		prestige = 100
		custom_tooltip = {
			text = COURTFACTIONMOODPLUS
			hidden_tooltip = { change_variable = { which = faction_mood_court value = 2 } }
			hidden_tooltip = { random_courtier = { limit = { ai = yes } character_event = { id = PlusFaction.306 days = 1 } } }
		}
		hidden_tooltip = {
			remove_character_modifier = do_not_disturb
			clr_character_flag = has_priest_to_perform_coronation
			clr_character_flag = asked_about_coronation
			clr_character_flag = coronation_event
			clr_character_flag = coronation_lover
			clr_character_flag = coronation_duel
			clr_character_flag = coronation_poetry
			clr_character_flag = coronation_friend
			clr_character_flag = coronation_rival
			clr_character_flag = coronation_toast
			clr_character_flag = coronation_badmouth
			clr_character_flag = coronation_drunkard
			clr_character_flag = coronation_lunatic
			any_realm_character = {
				limit = {
					has_opinion_modifier = { who = ROOT modifier = attending_coronation }
				}
				remove_character_modifier = do_not_disturb
				clr_character_flag = coronation_event
				remove_opinion = { who = FROM modifier = attending_coronation }
				opinion = { who = FROM modifier = opinion_attended_ceremony years = 5 }
			}
			any_independent_ruler = {
				any_realm_character = {
					limit = {
						has_opinion_modifier = { who = ROOT modifier = attending_coronation }
					}
					remove_character_modifier = do_not_disturb
					clr_character_flag = coronation_event
					remove_opinion = { who = FROM modifier = attending_coronation }
					opinion = { who = FROM modifier = opinion_attended_ceremony years = 5 }
				}
			}
			any_independent_ruler = {
				limit = {
					has_opinion_modifier = { who = ROOT modifier = attending_coronation }
				}
				remove_character_modifier = do_not_disturb
				clr_character_flag = coronation_event
				remove_opinion = { who = FROM modifier = attending_coronation }
				opinion = { who = FROM modifier = opinion_attended_ceremony years = 5 }
			}
		}
	}
	option = {
		name = EVTOPTB_Plus_1275
		trigger = { NOT = { character = FROM } }
	}
}

	