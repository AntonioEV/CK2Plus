
namespace = Plus

#reserved: Plus.100 to Plus.149

#######################################
# PARDONS
#######################################

# Pardon - fired from the minor title decision
character_event = {
	id = Plus.100
	desc = "EVTDESC_Plus_100"
	picture = GFX_evt_emissary

	is_triggered_only = yes

	option = {
		name = "EVTOPTA_Plus_100" #Mercy is a virtue
		FROM = {
			custom_tooltip = { text = CUSTOMTOOLTIP37 }
			opinion = {
				who = ROOT
				modifier = opinion_relieved
				years = 5
			}
			hidden_tooltip = {
				character_event = { id = Plus.101 }
				remove_title = pardon
			}
		}
	}
	option = {
		name = "EVTOPTB_Plus_100" #Eh, never mind
		hidden_tooltip = {
			FROM = {
				remove_title = pardon
			}
		}
	}
}

character_event = {
	id = Plus.101
	
	hide_window = yes
	
	immediate = {
		reverse_remove_opinion = {
			who = FROM
			modifier = opinion_traitor
		}
		reverse_remove_opinion = {
			who = FROM
			modifier = declared_war
		}
		reverse_remove_opinion = {
			who = FROM
			modifier = opinion_dishonorable
		}
		reverse_remove_opinion = {
			who = FROM
			modifier = opinion_rebel_traitor
		}
		reverse_remove_opinion = {
			who = FROM
			modifier = attempted_murder_of_spouse
		}
		reverse_remove_opinion = {
			who = FROM
			modifier = attempted_murder_of_vassal
		}
		reverse_remove_opinion = {
			who = FROM
			modifier = attempted_murder
		}
		reverse_remove_opinion = {
			who = FROM
			modifier = attempted_murder_of_child
		}
		reverse_remove_opinion = {
			who = FROM
			modifier = opinion_spouse_slayer
		}
		reverse_remove_opinion = {
			who = FROM
			modifier = opinion_murder_attempt
		}
		reverse_remove_opinion = {
			who = FROM
			modifier = opinion_killed_close_kin
		}
		reverse_remove_opinion = {
			who = FROM
			modifier = opinion_fatwa_target
		}
		reverse_remove_opinion = {
			who = FROM
			modifier = opinion_witch
		}
		reverse_remove_opinion = {
			who = FROM
			modifier = opinion_takfir
		}
		reverse_remove_opinion = {
			who = FROM
			modifier = attempted_murder_of_close_kin
		}
		reverse_remove_opinion = {
			who = FROM
			modifier = killed_vassal
		}
		reverse_remove_opinion = {
			who = FROM
			modifier = opinion_civil_war_loser
		}
		reverse_remove_opinion = {
			who = FROM
			modifier = mad_heretic
		}
		reverse_remove_opinion = {
			who = FROM
			modifier = devious_plotter
		}
		reverse_remove_opinion = {
			who = FROM
			modifier = attempted_kidnapping
		}
		reverse_remove_opinion = {
			who = FROM
			modifier = attempted_kidnapping_of_kin
		}
		reverse_remove_opinion = {
			who = FROM
			modifier = attempted_kidnapping_of_vassal
		}
		reverse_remove_opinion = {
			who = FROM
			modifier = opinion_kidnapped_kin
		}
	}
}

#######################################
# ESTATE EVENTS
#######################################

# Grant Estate - fired from the minor title
character_event = {
	id = Plus.105
	desc = "EVTDESC_Plus_105"
	picture = GFX_evt_emissary
	
	is_triggered_only = yes
	
	option = {
		name = "EVTOPTA_Plus_105" #A minor estate
		trigger = {
			wealth = 50
			FROM = {
				NOT = { has_character_modifier = estates_5 }
			}
		}
		wealth = -50
		reverse_opinion = {
			modifier = opinion_granted_minor_estate
			who = FROM
			years = 100
		}
		FROM = {
			if = {
				limit = { has_character_modifier = estates_4 }
				remove_character_modifier = estates_4
				add_character_modifier = {
					name = "estates_5"
					duration = -1
				}
			}
			if = {
				limit = { has_character_modifier = estates_3 }
				remove_character_modifier = estates_3
				add_character_modifier = {
					name = "estates_4"
					duration = -1
				}
			}
			if = {
				limit = { has_character_modifier = estates_2 }
				remove_character_modifier = estates_2
				add_character_modifier = {
					name = "estates_3"
					duration = -1
				}
			}
			if = {
				limit = { has_character_modifier = estates_1 }
				remove_character_modifier = estates_1
				add_character_modifier = {
					name = "estates_2"
					duration = -1
				}
			}
			if = {
				limit = {
					NOT = {
						has_character_modifier = estates_1
						has_character_modifier = estates_2
						has_character_modifier = estates_3
						has_character_modifier = estates_4
						has_character_modifier = estates_5
					}
				}
				add_character_modifier = {
					name = "estates_1"
					duration = -1
				}
				hidden_tooltip = {
					give_minor_title = title_lord
				}
			}
		}
		hidden_tooltip = {
			FROM = {
				remove_title = grant_estate
			}
		}
	}
	option = {
		name = "EVTOPTB_Plus_105" #A moderate estate
		trigger = {
			wealth = 150
			FROM = {
				NOT = {
					has_character_modifier = estates_3
					has_character_modifier = estates_4
					has_character_modifier = estates_5
				}
			}
		}
		wealth = -150
		reverse_opinion = {
			modifier = opinion_granted_minor_estate
			who = FROM
			years = 100
			multiplier = 3
		}
		FROM = {
			if = {
				limit = { has_character_modifier = estates_2 }
				remove_character_modifier = estates_2
				add_character_modifier = {
					name = "estates_5"
					duration = -1
				}
			}
			if = {
				limit = { has_character_modifier = estates_1 }
				remove_character_modifier = estates_1
				add_character_modifier = {
					name = "estates_4"
					duration = -1
				}
			}
			if = {
				limit = {
					NOT = {
						has_character_modifier = estates_1
						has_character_modifier = estates_2
						has_character_modifier = estates_3
						has_character_modifier = estates_4
						has_character_modifier = estates_5
					}
				}
				add_character_modifier = {
					name = "estates_3"
					duration = -1
				}
				hidden_tooltip = {
					give_minor_title = title_lord
				}
			}
		}
		hidden_tooltip = {
			FROM = {
				remove_title = grant_estate
			}
		}
	}
	option = {
		name = "EVTOPTC_Plus_105" #A large estate
		trigger = {
			wealth = 250
			FROM = {
				NOT = {
					has_character_modifier = estates_1
					has_character_modifier = estates_2
					has_character_modifier = estates_3
					has_character_modifier = estates_4
					has_character_modifier = estates_5
				}
			}
		}
		wealth = -250
		reverse_opinion = {
			modifier = opinion_granted_minor_estate
			who = FROM
			years = 100
			multiplier = 5
		}
		FROM = {
			add_character_modifier = {
				name = "estates_5"
				duration = -1
			}
			hidden_tooltip = {
				give_minor_title = title_lord
			}
		}
		hidden_tooltip = {
			FROM = {
				remove_title = grant_estate
			}
		}
	}
	option = {
		name = "EVTOPTD_Plus_105" #None at all!
		hidden_tooltip = {
			FROM = {
				remove_title = grant_estate
			}
		}
	}
}

# Relative demands estates due to his ambition
character_event = {
	id = Plus.106
	desc = AI_EVENT
	picture = GFX_evt_emissary

	min_age = 20
	capable_only = yes
	prisoner = no

	trigger = {
		has_ambition = obj_gain_estates_1
		is_ruler = no
		NOT = { trait = eunuch }
		NOT = { trait = monk }
		NOT = { trait = nun }
		NOT = { has_minor_title = title_guru }
		NOT = { has_character_flag = flag_denied_estates }
		liege = {
			NOT = { spouse = { character = ROOT } }
			war = no
			OR = {
				is_close_relative = ROOT
				dynasty = ROOT
			}
			wealth = 50
		}
	}

	mean_time_to_happen = {
		months = 12

		modifier = {
			factor = 10.0
			liege = {
				NOT = { is_close_relative = ROOT }
			}
		}
		modifier = {
			factor = 0.5
			liege = {
				wealth = 250
			}
		}
		modifier = {
			factor = 0.5
			liege = {
				wealth = 500
			}
		}
		modifier = {
			factor = 0.5
			trait = greedy
		}
		modifier = {
			factor = 0.5
			trait = ambitious
		}
		modifier = {
			factor = 0.5
			trait = diligent
		}
		modifier = {
			factor = 5.0
			trait = slothful
		}
		modifier = {
			factor = 5.0
			trait = content
		}
		modifier = {
			factor = 5.0
			trait = charitable
		}
	}

	option = {
		name = OK # Ask liege for estates
		liege = { character_event = { id = Plus.107 days = 3 } }
	}
}

# Liege responds to the request
character_event = {
	id = Plus.107
	desc = EVTDESC_Plus_107
	picture = GFX_evt_emissary

	is_triggered_only = yes

	option = {
		name = EVTOPTA_Plus_107 # Give him what he wants
		trigger = {
			wealth = 50
		}
		ai_chance = {
			factor = 10
			modifier = {
				factor = 0
				has_character_modifier = ai_austerity
			}
			modifier = {
				factor = 0.1
				trait = greedy
			}
			modifier = {
				factor = 10
				trait = charitable
			}
			modifier = {
				factor = 2
				wealth = 100
			}
			modifier = {
				factor = 2
				wealth = 200
			}
			modifier = {
				factor = 2
				wealth = 300
			}
			modifier = {
				factor = 2
				wealth = 400
			}
			modifier = {
				factor = 2
				wealth = 500
			}
			modifier = {
				factor = 5
				any_child = { character = FROM }
			}
			modifier = {
				factor = 10
				FROM = { is_primary_heir = yes }
			}
		}
		wealth = -50
		reverse_opinion = {
			modifier = opinion_granted_minor_estate
			who = FROM
			years = 100
		}
		FROM = {
			add_character_modifier = {
				name = estates_1
				duration = -1
			}
			hidden_tooltip = {
				give_minor_title = title_lord
			}
		}
	}

	option = {
		name = EVTOPTB_Plus_107 # Say you can't afford it
		ai_chance = {
			factor = 90
		}
		FROM = {
			opinion = {
				modifier = opinion_denied_estates
				who = ROOT
				months = 240
			}
			tooltip = { cancel_ambition = yes }
			set_character_flag = flag_denied_estates
		}
	}
}

# Character buys estates if they have the money (on-action bi-yearly pulse event)
character_event = {
	id = Plus.108
	desc = "AI_EVENT"
	picture = GFX_evt_council
	
	is_triggered_only = yes
	
	ai = yes
	min_age = 16
	capable_only = yes
	prisoner = no

	trigger = {
		ai = yes
		wealth = 50
		is_adult = yes
		is_ruler = no
		prisoner = no
		OR = {
			is_female = no
			liege = {
				OR = {
					has_law = true_cognatic_succession
					has_law = enatic_cognatic_succession
					has_law = enatic_succession
				}
			}
			liege = {
				is_close_relative = ROOT
				has_law = cognatic_succession
			}
		}
		NOT = { trait = incapable }
		NOT = { spouse = { is_ruler = yes } }
		NOT = { trait = eunuch }
		NOT = { has_minor_title = title_guru }
		NOT = { trait = monk }
		NOT = { trait = nun }
		NOT = { has_character_modifier = estates_5 }
	}

	weight_multiplier = {
		days = 1
	}

	option = {
		name = "OK"
		wealth = -50
		if = {
			limit = { has_character_modifier = estates_4 }
			remove_character_modifier = estates_4
			add_character_modifier = {
				name = "estates_5"
				duration = -1
			}
		}
		if = {
			limit = { has_character_modifier = estates_3 }
			remove_character_modifier = estates_3
			add_character_modifier = {
				name = "estates_4"
				duration = -1
			}
		}
		if = {
			limit = { has_character_modifier = estates_2 }
			remove_character_modifier = estates_2
			add_character_modifier = {
				name = "estates_3"
				duration = -1
			}
		}
		if = {
			limit = { has_character_modifier = estates_1 }
			remove_character_modifier = estates_1
			add_character_modifier = {
				name = "estates_2"
				duration = -1
			}
		}
		if = {
			limit = {
				NOT = {
					has_character_modifier = estates_1
					has_character_modifier = estates_2
					has_character_modifier = estates_3
					has_character_modifier = estates_4
					has_character_modifier = estates_5
				}
			}
			add_character_modifier = {
				name = "estates_1"
				duration = -1
			}
			give_minor_title = title_lord
		}
	}
}

# Ruler sells off estates (on-action bi-yearly pulse event)
character_event = {
	id = Plus.109
	desc = "EVTDESC_Plus_109"
	picture = "GFX_evt_council"
	
	is_triggered_only = yes
	
	only_rulers = yes

	trigger = {
		is_ruler = yes
		OR = {
			has_character_modifier = estates_1
			has_character_modifier = estates_2
			has_character_modifier = estates_3
			has_character_modifier = estates_4
			has_character_modifier = estates_5
		}
	}

	weight_multiplier = {
		days = 1
	}

	option = {
		name = "OK"
		if = {
			limit = { has_character_modifier = estates_1 }
			remove_character_modifier = estates_1
			wealth = 40
		}
		if = {
			limit = { has_character_modifier = estates_2 }
			remove_character_modifier = estates_2
			wealth = 80
		}
		if = {
			limit = { has_character_modifier = estates_3 }
			remove_character_modifier = estates_3
			wealth = 120
		}
		if = {
			limit = { has_character_modifier = estates_4 }
			remove_character_modifier = estates_4
			wealth = 160
		}
		if = {
			limit = { has_character_modifier = estates_5 }
			remove_character_modifier = estates_5
			wealth = 200
		}
	}
}

# Estates Removal Upon Exile (on-action event)
character_event = {
	id = Plus.110
	desc = "EVTDESC155"
	picture = GFX_evt_carriage

	is_triggered_only = yes

	immediate = {
		remove_character_modifier = estates_1
		remove_character_modifier = estates_2
		remove_character_modifier = estates_3
		remove_character_modifier = estates_4
		remove_character_modifier = estates_5
	}
	
	option = {
		name = OK
	}
}

# Estates Succession On Character Death (on-action event)
character_event = {
	id = Plus.111

	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		ai = yes
		is_ruler = no
		OR = {
			has_character_modifier = estates_1
			has_character_modifier = estates_2
			has_character_modifier = estates_3
			has_character_modifier = estates_4
			has_character_modifier = estates_5
		}
	}

	immediate = {
		hidden_tooltip = {
			if = {
				limit = {
					ai = yes
					is_ruler = no
					OR = {
						has_character_modifier = estates_1
						has_character_modifier = estates_2
						has_character_modifier = estates_3
						has_character_modifier = estates_4
						has_character_modifier = estates_5
					}
					any_child = {
						is_female = no
						is_alive = yes
						NOT = { has_character_modifier = estates_5 }
						NOT = { trait = bastard }
					}
				}
				any_child = {
					limit = {
						is_female = no
						is_alive = yes
						NOT = { has_character_modifier = estates_5 }
						NOT = { trait = bastard }
					}
					if = {
						limit = { is_ruler = yes }
						wealth = 50
					}
					if = {
						limit = {
							is_ruler = no
							has_character_modifier = estates_4
						}
						remove_character_modifier = estates_4
						add_character_modifier = {
							name = "estates_5"
							duration = -1
						}
					}
					if = {
						limit = {
							is_ruler = no
							has_character_modifier = estates_3
						}
						remove_character_modifier = estates_3
						add_character_modifier = {
							name = "estates_4"
							duration = -1
						}
					}
					if = {
						limit = {
							is_ruler = no
							has_character_modifier = estates_2
						}
						remove_character_modifier = estates_2
						add_character_modifier = {
							name = "estates_3"
							duration = -1
						}
					}
					if = {
						limit = {
							is_ruler = no
							has_character_modifier = estates_1
						}
						remove_character_modifier = estates_1
						add_character_modifier = {
							name = "estates_2"
							duration = -1
						}
					}
					if = {
						limit = {
							is_ruler = no
							NOT = {
								has_character_modifier = estates_1
								has_character_modifier = estates_2
								has_character_modifier = estates_3
								has_character_modifier = estates_4
								has_character_modifier = estates_5
							}
						}
						add_character_modifier = {
							name = "estates_1"
							duration = -1
						}
						hidden_tooltip = {
							give_minor_title = title_lord
						}
					}
					ROOT = {
						if = {
							limit = { has_character_modifier = estates_1 }
							remove_character_modifier = estates_1
						}
						if = {
							limit = { has_character_modifier = estates_2 }
							remove_character_modifier = estates_2
							add_character_modifier = {
								name = "estates_1"
								duration = -1
							}
						}
						if = {
							limit = { has_character_modifier = estates_3 }
							remove_character_modifier = estates_3
							add_character_modifier = {
								name = "estates_2"
								duration = -1
							}
						}
						if = {
							limit = { has_character_modifier = estates_4 }
							remove_character_modifier = estates_4
							add_character_modifier = {
								name = "estates_3"
								duration = -1
							}
						}
						if = {
							limit = { has_character_modifier = estates_5 }
							remove_character_modifier = estates_5
							add_character_modifier = {
								name = "estates_4"
								duration = -1
							}
						}
					}
				}
				any_child = {
					limit = {
						is_female = no
						is_alive = yes
						NOT = { has_character_modifier = estates_5 }
						NOT = { trait = bastard }
					}
					if = {
						limit = {
							ROOT = {
								OR = {
									has_character_modifier = estates_1
									has_character_modifier = estates_2
									has_character_modifier = estates_3
									has_character_modifier = estates_4
									has_character_modifier = estates_5
								}
							}
						}
						wealth = 50
					}
					ROOT = {
						if = {
							limit = { has_character_modifier = estates_1 }
							remove_character_modifier = estates_1
						}
						if = {
							limit = { has_character_modifier = estates_2 }
							remove_character_modifier = estates_2
							add_character_modifier = {
								name = "estates_1"
								duration = -1
							}
						}
						if = {
							limit = { has_character_modifier = estates_3 }
							remove_character_modifier = estates_3
							add_character_modifier = {
								name = "estates_2"
								duration = -1
							}
						}
						if = {
							limit = { has_character_modifier = estates_4 }
							remove_character_modifier = estates_4
							add_character_modifier = {
								name = "estates_3"
								duration = -1
							}
						}
						if = {
							limit = { has_character_modifier = estates_5 }
							remove_character_modifier = estates_5
							add_character_modifier = {
								name = "estates_4"
								duration = -1
							}
						}
					}
				}
				any_child = {
					limit = {
						is_female = no
						is_alive = yes
						NOT = { has_character_modifier = estates_5 }
						NOT = { trait = bastard }
					}
					if = {
						limit = {
							ROOT = {
								OR = {
									has_character_modifier = estates_1
									has_character_modifier = estates_2
									has_character_modifier = estates_3
									has_character_modifier = estates_4
									has_character_modifier = estates_5
								}
							}
						}
						wealth = 50
					}
					ROOT = {
						if = {
							limit = { has_character_modifier = estates_1 }
							remove_character_modifier = estates_1
						}
						if = {
							limit = { has_character_modifier = estates_2 }
							remove_character_modifier = estates_2
							add_character_modifier = {
								name = "estates_1"
								duration = -1
							}
						}
						if = {
							limit = { has_character_modifier = estates_3 }
							remove_character_modifier = estates_3
							add_character_modifier = {
								name = "estates_2"
								duration = -1
							}
						}
						if = {
							limit = { has_character_modifier = estates_4 }
							remove_character_modifier = estates_4
							add_character_modifier = {
								name = "estates_3"
								duration = -1
							}
						}
						if = {
							limit = { has_character_modifier = estates_5 }
							remove_character_modifier = estates_5
							add_character_modifier = {
								name = "estates_4"
								duration = -1
							}
						}
					}
				}
				any_child = {
					limit = {
						is_female = no
						is_alive = yes
						NOT = { has_character_modifier = estates_5 }
						NOT = { trait = bastard }
					}
					if = {
						limit = {
							ROOT = {
								OR = {
									has_character_modifier = estates_1
									has_character_modifier = estates_2
									has_character_modifier = estates_3
									has_character_modifier = estates_4
									has_character_modifier = estates_5
								}
							}
						}
						wealth = 50
					}
					ROOT = {
						if = {
							limit = { has_character_modifier = estates_1 }
							remove_character_modifier = estates_1
						}
						if = {
							limit = { has_character_modifier = estates_2 }
							remove_character_modifier = estates_2
							add_character_modifier = {
								name = "estates_1"
								duration = -1
							}
						}
						if = {
							limit = { has_character_modifier = estates_3 }
							remove_character_modifier = estates_3
							add_character_modifier = {
								name = "estates_2"
								duration = -1
							}
						}
						if = {
							limit = { has_character_modifier = estates_4 }
							remove_character_modifier = estates_4
							add_character_modifier = {
								name = "estates_3"
								duration = -1
							}
						}
						if = {
							limit = { has_character_modifier = estates_5 }
							remove_character_modifier = estates_5
							add_character_modifier = {
								name = "estates_4"
								duration = -1
							}
						}
					}
				}
				any_child = {
					limit = {
						is_female = no
						is_alive = yes
						NOT = { has_character_modifier = estates_5 }
						NOT = { trait = bastard }
					}
					if = {
						limit = {
							ROOT = {
								OR = {
									has_character_modifier = estates_1
									has_character_modifier = estates_2
									has_character_modifier = estates_3
									has_character_modifier = estates_4
									has_character_modifier = estates_5
								}
							}
						}
						wealth = 50
					}
					ROOT = {
						if = {
							limit = { has_character_modifier = estates_1 }
							remove_character_modifier = estates_1
						}
						if = {
							limit = { has_character_modifier = estates_2 }
							remove_character_modifier = estates_2
							add_character_modifier = {
								name = "estates_1"
								duration = -1
							}
						}
						if = {
							limit = { has_character_modifier = estates_3 }
							remove_character_modifier = estates_3
							add_character_modifier = {
								name = "estates_2"
								duration = -1
							}
						}
						if = {
							limit = { has_character_modifier = estates_4 }
							remove_character_modifier = estates_4
							add_character_modifier = {
								name = "estates_3"
								duration = -1
							}
						}
						if = {
							limit = { has_character_modifier = estates_5 }
							remove_character_modifier = estates_5
							add_character_modifier = {
								name = "estates_4"
								duration = -1
							}
						}
					}
				}
			}
		}
	}
}

#######################################
# GENERATE RANDOM CLAIMS
#######################################

# Generate random claim on a neighbour
character_event = {
	id = Plus.115 #formerly 1000182425
	desc = "EVTDESC_Plus_115"
	picture = GFX_evt_emissary
	
	is_triggered_only = yes
	
	trigger = {
		war = no
		is_ruler = yes
		is_feudal = yes
		primary_title = { higher_tier_than = BARON }
		has_regent = no
		any_playable_ruler = {
			is_feudal = yes
			any_demesne_title = {
				location = {
					duchy = { 
						OR = { 
							has_holder = no 
							holder_scope = { 
								religion_group = ROOT 
								OR = { 
									ROOT = { independent = yes } 
									same_realm = ROOT 
								} 
							} 
						} 
						NOT = { 
							holder_scope = { 
								OR = { 
									character = ROOT 
									is_liege_or_above = ROOT 
									is_vassal_or_below = ROOT 
								} 
							} 
							ROOT = { has_claim = PREV } 
						} 
					}
					county = { 
						OR = { 
							has_holder = no 
							holder_scope = { 
								religion_group = ROOT 
								OR = { 
									ROOT = { independent = yes }
									same_realm = ROOT 
								} 
							} 
						} 
						NOT = { 
							holder_scope = { 
								OR = { 
									character = ROOT 
									is_liege_or_above = ROOT 
									is_vassal_or_below = ROOT 
								} 
							} 
							ROOT = { has_claim = PREV } 
						} 
					}
					any_neighbor_province = {
						owner = {
							OR = {
								character = ROOT
								is_liege_or_above = ROOT
							}
						}
						has_province_flag = contingent_territory
					}
				}
			}
		}
	}

	immediate = {
		random = {
			chance = 20
			set_character_flag = duchy_claim
		}
		set_character_flag = claim_by_event
	}

	weight_multiplier = {
		days = 1
		modifier = {
			factor = 0.5
			ai = no
		}		
		modifier = {
			factor = 0.25
			religion_group = pagan_group
			is_reformed_religion = no
			NOT = { has_ambition = obj_become_king }
		}
		modifier = {
			factor = 1.1
			ai = no
			has_ambition = obj_become_king
		}
		modifier = {
			factor = 1.2
			ai = yes
			has_ambition = obj_become_king
		}		
		modifier = {
			factor = 2.5 # AI doesn't fabricate claims effectively
			ai = yes
		}
		modifier = {
			factor = 3.0 # Encourage AI independent counts and dukes to form Kingdoms
			ai = yes
			independent = yes
			OR = {
				tier = count
				tier = duke
			}
			NOT = { 
				num_of_duke_titles = 3 
			}
		}
		modifier = {
			factor = 1.2
			independent = yes
			trait = ambitious
		}
		modifier = {
			factor = 0.5
			independent = yes
			trait = content
		}			
		modifier = {
			factor = 0.5 # Discourage free claims for bigger AI
			ai = yes
			independent = yes
			tier = king
			realm_size = 35
		}
		modifier = {
			factor = 0.25 # Discourage free claims for bigger AI
			ai = yes
			independent = yes
			tier = emperor
			realm_size = 120
		}		
		modifier = {
			factor = 0.25
			independent = no
		}
		modifier = {
			factor = 1.1
			realm_diplomacy = 20
		}
		modifier = {
			factor = 1.1
			realm_diplomacy = 30
		}
		modifier = {
			factor = 1.1
			realm_diplomacy = 40
		}
		modifier = {
			factor = 1.1
			realm_diplomacy = 50
		}
	}

	option = {
		name = "EXCELLENT"
		random_playable_ruler = {
			limit = {
				is_feudal = yes
				any_demesne_title = {
					location = {
						duchy = { 
							OR = { 
								has_holder = no 
								holder_scope = {
									religion_group = ROOT 
									OR = { 
										ROOT = { independent = yes } 
										same_realm = ROOT 
									} 
								} 
							} 
							NOT = { 
								holder_scope = { 
									OR = { 
										character = ROOT 
										is_liege_or_above = ROOT 
										is_vassal_or_below = ROOT 
									} 
								} 
								ROOT = { has_claim = PREV } 
							} 
						}
						county = { 
							OR = { 
								has_holder = no 
								holder_scope = { 
									religion_group = ROOT 
									OR = { 
										ROOT = { independent = yes } 
										same_realm = ROOT 
									} 
								} 
							} 
							NOT = { 
								holder_scope = { 
									OR = { 
										character = ROOT 
										is_liege_or_above = ROOT 
										is_vassal_or_below = ROOT 
									} 
								} 
							ROOT = { has_claim = PREV } 
							} 
						}
						any_neighbor_province = {
							owner = {
								OR = {
									character = ROOT
									is_liege_or_above = ROOT
								}
							}
							has_province_flag = contingent_territory
						}
					}
				}
			}
			random_demesne_title = {
				limit = {
					location = {
						duchy = { 
							OR = { 
								has_holder = no 
								holder_scope = { 
									religion_group = ROOT 
									OR = { 
										ROOT = { independent = yes } 
										same_realm = ROOT 
									} 
								} 
							} 
							NOT = { 
								holder_scope = { 
									OR = { 
										character = ROOT 
										is_liege_or_above = ROOT 
										is_vassal_or_below = ROOT 
									} 
								} 
								ROOT = { has_claim = PREV } 
							} 
						}
						county = { 
							OR = { 
								has_holder = no 
								holder_scope = { 
									religion_group = ROOT 
									OR = { 
										ROOT = { independent = yes } 
										same_realm = ROOT 
									} 
								} 
							} 
							NOT = { 
								holder_scope = { 
									OR = { 
										character = ROOT 
										is_liege_or_above = ROOT 
										is_vassal_or_below = ROOT 
									} 
								} 
								ROOT = { has_claim = PREV } 
							} 
						}
						any_neighbor_province = {
							owner = {
								OR = {
									character = ROOT
									is_liege_or_above = ROOT
								}
							}
							has_province_flag = contingent_territory
						}
					}
				}
				location = {
					if = {
						limit = {
							OR = {
								ROOT = { NOT = { has_character_flag = duchy_claim } }
								duchy = { has_holder = no }
							}
						}
						county = {
							add_claim = ROOT
							hidden_tooltip = {
								holder_scope = { character_event = { id = Plus.116 } }
							}
						}
					}
					if = {
						limit = {
							ROOT = { has_character_flag = duchy_claim }
							duchy = { has_holder = yes }
						}
						duchy = {
							add_claim = ROOT
							hidden_tooltip = {
								holder_scope = { character_event = { id = Plus.116 } }
							}
						}
					}
				}
			}
		}
		clr_character_flag = duchy_claim
	}
}

# Neighbor is informed of the claim
character_event = {
	id = Plus.116
	picture = GFX_evt_emissary
	desc = "EVTDESC_Plus_116"

	trigger = {
		ai = no
	}

	is_triggered_only = yes

	option = {
		name = "EVTOPTA_Plus_116"
	}
}

#######################################
# ABDICATION
#######################################

# Ruler considers Abdication
character_event = {
	id = Plus.120
	picture = "GFX_evt_recovery"
	desc = "EVTDESC_Plus_120"
	
	is_triggered_only = yes
	
	option = {
		name = "EVTOPTA_Plus_120" #Go ahead and abdicate
		ai_chance = {
			factor = 100
		}
		hidden_tooltip = {
			current_heir = {
				character_event = { id = Plus.121 days = 1 }
			}
		}
		if = {
			limit = { is_priest = yes }
			set_character_flag = was_priest
		}
		abdicate = yes
		if = {
			limit = { NOT = { trait = content } }
			add_trait = content
		}
		if = {
			limit = {
				is_female = yes
				religion_group = christian
				OR = {
					trait = zealous
					trait = humble
					has_character_flag = was_priest
				}
			}
			add_trait = nun
		}
		if = {
			limit = {
				is_female = no
				religion_group = christian
				OR = {
					trait = zealous
					trait = humble
					has_character_flag = was_priest
				}
			}
			add_trait = monk
		}
		if = {
			limit = {
				OR = {
					NOT = { religion_group = christian }
					NOT = {
						trait = zealous
						trait = humble
						has_character_flag = was_priest
					}
				}
			}
			add_trait = abdicated
		}
		clr_character_flag = was_priest
	}
	
	option = {
		name = "EVTOPTB_Plus_120"  #Reconsider
		clr_character_flag = considering_abdication
		ai_chance = {
			factor = 0
		}
	}
}

# Notify heir of abdication
character_event = {
	id = Plus.121
	picture = GFX_evt_council
	desc = "EVTDESC_Plus_121"
	
	is_triggered_only = yes
	
	option = {
		name = "EVTOPTA_Plus_121"
		opinion = {
			who = FROM
			modifier = abdicated_for_me
			years = 100
		}
	}
}

