namespace = PlusFaction

#reserved: PlusFaction.400 to PlusFaction.499

########################################
# CIVIL WAR EVENTS
########################################

### PRINCELY FACTION CHOOSES SIDES

# Princely faction leader declares for one side or the other...
character_event = {
	id = PlusFaction.400 #formerly 1000182394
	desc = "EVTDESC_PlusFaction_400"
	picture = "GFX_evt_battle"
	border = "GFX_event_normal_frame_war"
	
	is_triggered_only = yes

	option = {
		name = "EVTOPTA_PlusFaction_400" #join the rebellion
		ai_chance = {
			factor = 100
			modifier = {
				factor = 0
				has_character_flag = do_not_join_civil_war
			}
			modifier = {
				factor = 0
				liege = {
					NOT = { has_character_flag = faction_feudal_angry }
					NOT = { has_character_flag = faction_feudal_unhappy }
				}
			}
			modifier = {
				factor = 100
				liege = { has_character_flag = faction_feudal_angry }
			}
			modifier = {
				factor = 1.25
				trait = ambitious
			}
			modifier = {
				factor = 1.25
				NOT = {
					opinion = {
						who = liege
						value = 0
					}
				}
			}
			modifier = {
				factor = 1.25
				NOT = {
					opinion = {
						who = liege
						value = -25
					}
				}
			}
			modifier = {
				factor = 1.25
				NOT = {
					opinion = {
						who = liege
						value = -50
					}
				}
			}
			modifier = {
				factor = 1.25
				NOT = {
					opinion = {
						who = liege
						value = -75
					}
				}
			}
		}
		hidden_tooltip = { liege = { set_character_flag = faction_feudal_war } }
		hidden_tooltip = {
			liege = {
				character_event = { id = PlusFaction.401 }
				any_vassal = {
					limit = {
						NOT = { trait = rebel }
						NOT = { trait = loyalist }
						NOT = { trait = neutral }
						OR = {
							in_faction = faction_feudal_emperor
							in_faction = faction_feudal_king
							in_faction = faction_feudal_duke
						}
					}
					character_event = { id = PlusFaction.403 }
				}
			}
		}
		add_trait = rebel
		hidden_tooltip = {
			liege = { reverse_opinion = { who = ROOT modifier = revolting_against years = 100 } }
		}
		hidden_tooltip = {
			if = {
				limit = {
					liege = {
						OR = {
							independent = yes
							liege = { character = PREV }
						}
					}
				}
				set_defacto_liege = ROOT
			}
			if = {
				limit = {
					liege = {
						independent = no
						liege = { NOT = { character = PREV } }
					}
				}
				liege = {
					liege = {
						ROOT = {
							set_defacto_liege = PREV
						}
					}
				}
			}
		}
		join_attacker_wars = FROM
		clr_character_flag = do_not_join_civil_war
	}
	option = {
		name = "EVTOPTB_PlusFaction_400" #remain loyal
		ai_chance = {
			factor = 50
			modifier = {
				factor = 0
				liege = {
					OR = {
						has_character_flag = faction_feudal_angry
						has_character_flag = faction_feudal_unhappy
					}
				}
			}
			modifier = {
				factor = 10
				liege = { has_character_flag = faction_feudal_happy }
			}
			modifier = {
				factor = 1.25
				trait = content
			}
			modifier = {
				factor = 1.25
				opinion = {
					who = liege
					value = 25
				}
			}
			modifier = {
				factor = 1.25
				opinion = {
					who = liege
					value = 50
				}
			}
			modifier = {
				factor = 1.25
				opinion = {
					who = liege
					value = 75
				}
			}
			modifier = {
				factor = 1.25
				opinion = {
					who = liege
					value = 100
				}
			}
		}
		add_trait = loyalist
		hidden_tooltip = {
			liege = {
				character_event = { id = PlusFaction.402 }
				any_vassal = {
					limit = {
						NOT = { trait = rebel }
						NOT = { trait = loyalist }
						NOT = { trait = neutral }
						OR = {
							in_faction = faction_feudal_emperor
							in_faction = faction_feudal_king
							in_faction = faction_feudal_duke
						}
					}
					character_event = { id = PlusFaction.404 }
				}
			}
		}
		clr_character_flag = do_not_join_civil_war
	}
	option = {
		name = "EVTOPTC_PlusFaction_400" #remain neutral
		ai_chance = {
			factor = 100
		}
		add_trait = neutral
		hidden_tooltip = {
			liege = {
				any_vassal = {
					limit = {
						NOT = { trait = rebel }
						NOT = { trait = loyalist }
						NOT = { trait = neutral }
						OR = {
							in_faction = faction_feudal_emperor
							in_faction = faction_feudal_king
							in_faction = faction_feudal_duke
						}
					}
					character_event = { id = PlusFaction.405 }
				}
			}
		}
		clr_character_flag = do_not_join_civil_war
	}
}

# Notify liege of princely faction joining rebellion
character_event = {
	id = PlusFaction.401
	desc = "EVTDESC_PlusFaction_401"
	picture = "GFX_evt_battle"
	border = "GFX_event_normal_frame_war"
	
	is_triggered_only = yes

	option = {
		name = "EVTOPTA_PlusFaction_401"
	}
}

# Notify liege of princely faction joining loyalists
character_event = {
	id = PlusFaction.402
	desc = "EVTDESC_PlusFaction_402"
	picture = "GFX_evt_battle"
	border = "GFX_event_normal_frame_war"
	
	is_triggered_only = yes

	option = {
		name = "EXCELLENT"
	}
}

# Princely faction member is called into the rebellion
character_event = {
	id = PlusFaction.403
	desc = "EVTDESC_PlusFaction_403"
	picture = "GFX_evt_battle"
	border = "GFX_event_normal_frame_war"
	
	is_triggered_only = yes

	option = {
		name = "TOARMS"
		if = {
			limit = {
				prisoner = yes
				OR = {
					host = { character = FROM }
					host = { character = FROMFROM}
				}
			}
			prisoner = no
		}
		add_trait = rebel
		hidden_tooltip = { liege = { reverse_opinion = { who = ROOT modifier = revolting_against years = 100 } } }
		hidden_tooltip = {
			if = {
				limit = {
					liege = {
						OR = {
							independent = yes
							liege = { character = PREV }
						}
					}
				}
				set_defacto_liege = ROOT
			}
			if = {
				limit = {
					liege = {
						independent = no
						liege = { NOT = { character = PREV } }
					}
				}
				liege = {
					liege = {
						ROOT = {
							set_defacto_liege = PREV
						}
					}
				}
			}
		}
		join_attacker_wars = FROMFROM
	}
}

# Princely faction member becomes a loyalist
character_event = {
	id = PlusFaction.404
	desc = "EVTDESC_PlusFaction_404"
	picture = "GFX_evt_battle"
	border = "GFX_event_normal_frame_war"
	
	is_triggered_only = yes

	option = {
		name = "TOARMS"
		add_trait = loyalist
	}
}

# If princely faction is neutral, player who is part of the faction can pick sides
character_event = {
	id = PlusFaction.405
	is_triggered_only = yes
	desc = "EVTDESC_PlusFaction_405"
	picture = "GFX_evt_battle"
	border = "GFX_event_normal_frame_war"

	option = {
		name = "EVTOPTA_PlusFaction_405" #join the rebellion anyway
		trigger = {
			ai = no
		}
		add_trait = rebel
		hidden_tooltip = { liege = { reverse_opinion = { who = ROOT modifier = revolting_against years = 100 } } }
		hidden_tooltip = {
			if = {
				limit = {
					liege = {
						OR = {
							independent = yes
							liege = { character = PREV }
						}
					}
				}
				set_defacto_liege = ROOT
			}
			if = {
				limit = {
					liege = {
						independent = no
						liege = { NOT = { character = PREV } }
					}
				}
				liege = {
					liege = {
						ROOT = {
							set_defacto_liege = PREV
						}
					}
				}
			}
		}
		join_attacker_wars = FROMFROM
	}
	option = {
		name = "EVTOPTB_PlusFaction_405" #support the liege anyway
		trigger = {
			ai = no
		}
		add_trait = loyalist
	}
	option = {
		name = "EVTOPTC_PlusFaction_405" #stay neutral
		add_trait = neutral
	}
}

### COURT FACTION CHOOSES SIDES

# Court faction leader declares for one side or the other...
character_event = {
	id = PlusFaction.410 #formerly 1000182400
	desc = "EVTDESC_PlusFaction_400"
	picture = "GFX_evt_battle"
	border = "GFX_event_normal_frame_war"
	
	is_triggered_only = yes

	option = {
		name = "EVTOPTA_PlusFaction_400" #join the rebellion
		ai_chance = {
			factor = 100
			modifier = {
				factor = 0
				has_character_flag = do_not_join_civil_war
			}
			modifier = {
				factor = 0
				liege = {
					NOT = { has_character_flag = faction_court_angry }
					NOT = { has_character_flag = faction_court_unhappy }
				}
			}
			modifier = {
				factor = 100
				liege = { has_character_flag = faction_court_angry }
			}
			modifier = {
				factor = 1.25
				trait = ambitious
			}
			modifier = {
				factor = 1.25
				NOT = {
					opinion = {
						who = liege
						value = 0
					}
				}
			}
			modifier = {
				factor = 1.25
				NOT = {
					opinion = {
						who = liege
						value = -25
					}
				}
			}
			modifier = {
				factor = 1.25
				NOT = {
					opinion = {
						who = liege
						value = -50
					}
				}
			}
			modifier = {
				factor = 1.25
				NOT = {
					opinion = {
						who = liege
						value = -75
					}
				}
			}
		}
		hidden_tooltip = { liege = { set_character_flag = faction_court_war } }
		hidden_tooltip = {
			liege = {
				character_event = { id = PlusFaction.411 }
				any_vassal = {
					limit = {
						NOT = { trait = rebel }
						NOT = { trait = loyalist }
						NOT = { trait = neutral }
						OR = {
							in_faction = faction_court_emperor
							in_faction = faction_court_king
							in_faction = faction_court_duke
						}
					}
					character_event = { id = PlusFaction.413 }
				}
			}
		}
		add_trait = rebel
		hidden_tooltip = { liege = { reverse_opinion = { who = ROOT modifier = revolting_against years = 100 } } }
		hidden_tooltip = {
			if = {
				limit = {
					liege = {
						OR = {
							independent = yes
							liege = { character = PREV }
						}
					}
				}
				set_defacto_liege = ROOT
			}
			if = {
				limit = {
					liege = {
						independent = no
						liege = { NOT = { character = PREV } }
					}
				}
				liege = {
					liege = {
						ROOT = {
							set_defacto_liege = PREV
						}
					}
				}
			}
		}
		join_attacker_wars = FROM
		clr_character_flag = do_not_join_civil_war
	}
	option = {
		name = "EVTOPTB_PlusFaction_400" #remain loyal
		ai_chance = {
			factor = 50
			modifier = {
				factor = 0
				liege = {
					OR = {
						has_character_flag = faction_court_angry
						has_character_flag = faction_court_unhappy
					}
				}
			}
			modifier = {
				factor = 10
				liege = { has_character_flag = faction_court_happy }
			}
			modifier = {
				factor = 1.25
				trait = content
			}
			modifier = {
				factor = 1.25
				opinion = {
					who = liege
					value = 25
				}
			}
			modifier = {
				factor = 1.25
				opinion = {
					who = liege
					value = 50
				}
			}
			modifier = {
				factor = 1.25
				opinion = {
					who = liege
					value = 75
				}
			}
			modifier = {
				factor = 1.25
				opinion = {
					who = liege
					value = 100
				}
			}
		}
		add_trait = loyalist
		hidden_tooltip = {
			liege = {
				character_event = { id = PlusFaction.412 }
				any_vassal = {
					limit = {
						NOT = { trait = rebel }
						NOT = { trait = loyalist }
						NOT = { trait = neutral }
						OR = {
							in_faction = faction_court_emperor
							in_faction = faction_court_king
							in_faction = faction_court_duke
						}
					}
					character_event = { id = PlusFaction.414 }
				}
			}
		}
		clr_character_flag = do_not_join_civil_war
	}
	option = {
		name = "EVTOPTC_PlusFaction_400" #remain neutral
		ai_chance = {
			factor = 100
		}
		add_trait = neutral
		hidden_tooltip = {
			liege = {
				any_vassal = {
					limit = {
						NOT = { trait = rebel }
						NOT = { trait = loyalist }
						NOT = { trait = neutral }
						OR = {
							in_faction = faction_court_emperor
							in_faction = faction_court_king
							in_faction = faction_court_duke
						}
					}
					character_event = { id = PlusFaction.415 }
				}
			}
		}
		clr_character_flag = do_not_join_civil_war
	}
}

# Notify liege of court faction joining rebellion
character_event = {
	id = PlusFaction.411
	desc = "EVTDESC_PlusFaction_411"
	picture = "GFX_evt_battle"
	border = "GFX_event_normal_frame_war"
	
	is_triggered_only = yes

	option = {
		name = "EVTOPTA_PlusFaction_401"
	}
}

# Notify liege of court faction joining loyalists
character_event = {
	id = PlusFaction.412
	desc = "EVTDESC_PlusFaction_412"
	picture = "GFX_evt_battle"
	border = "GFX_event_normal_frame_war"
	
	is_triggered_only = yes

	option = {
		name = "EXCELLENT"
	}
}

# Court faction member is called into the rebellion
character_event = {
	id = PlusFaction.413
	desc = "EVTDESC_PlusFaction_413"
	picture = "GFX_evt_battle"
	border = "GFX_event_normal_frame_war"
	
	is_triggered_only = yes

	option = {
		name = "TOARMS"
		add_trait = rebel
		hidden_tooltip = { liege = { reverse_opinion = { who = ROOT modifier = revolting_against years = 100 } } }
		hidden_tooltip = {
			if = {
				limit = {
					liege = {
						OR = {
							independent = yes
							liege = { character = PREV }
						}
					}
				}
				set_defacto_liege = ROOT
			}
			if = {
				limit = {
					liege = {
						independent = no
						liege = { NOT = { character = PREV } }
					}
				}
				liege = {
					liege = {
						ROOT = {
							set_defacto_liege = PREV
						}
					}
				}
			}
		}
		join_attacker_wars = FROMFROM
	}
}

# Court faction member becomes a loyalist
character_event = {
	id = PlusFaction.414
	desc = "EVTDESC_PlusFaction_414"
	picture = "GFX_evt_battle"
	border = "GFX_event_normal_frame_war"
	
	is_triggered_only = yes

	option = {
		name = "TOARMS"
		add_trait = loyalist
	}
}

# If Court faction is neutral, player who is part of the faction can pick sides
character_event = {
	id = PlusFaction.415
	desc = "EVTDESC_PlusFaction_415"
	picture = "GFX_evt_battle"
	border = "GFX_event_normal_frame_war"
	
	is_triggered_only = yes

	option = {
		name = "EVTOPTA_PlusFaction_405" #join the rebellion anyway
		trigger = {
			ai = no
		}
		add_trait = rebel
		hidden_tooltip = { liege = { reverse_opinion = { who = ROOT modifier = revolting_against years = 100 } } }
		hidden_tooltip = {
			if = {
				limit = {
					liege = {
						OR = {
							independent = yes
							liege = { character = PREV }
						}
					}
				}
				set_defacto_liege = ROOT
			}
			if = {
				limit = {
					liege = {
						independent = no
						liege = { NOT = { character = PREV } }
					}
				}
				liege = {
					liege = {
						ROOT = {
							set_defacto_liege = PREV
						}
					}
				}
			}
		}
		join_attacker_wars = FROMFROM
	}
	option = {
		name = "EVTOPTB_PlusFaction_405" #support the liege anyway
		trigger = {
			ai = no
		}
		add_trait = loyalist
	}
	option = {
		name = "EVTOPTC_PlusFaction_405" #stay neutral
		add_trait = neutral
	}
}

### RELIGIOUS FACTION CHOOSES SIDES

# Religious faction leader declares for one side or the other...
character_event = {
	id = PlusFaction.420 #formerly 1000182406
	desc = "EVTDESC_PlusFaction_400"
	picture = "GFX_evt_battle"
	border = "GFX_event_normal_frame_war"
	
	is_triggered_only = yes

	option = {
		name = "EVTOPTA_PlusFaction_400" #join the rebellion
		ai_chance = {
			factor = 100
			modifier = {
				factor = 0
				has_character_flag = do_not_join_civil_war
			}
			modifier = {
				factor = 0
				liege = {
					NOT = { has_character_flag = faction_religious_angry }
					NOT = { has_character_flag = faction_religious_unhappy }
				}
			}
			modifier = {
				factor = 100
				liege = { has_character_flag = faction_religious_angry }
			}
			modifier = {
				factor = 1.25
				trait = ambitious
			}
			modifier = {
				factor = 1.25
				NOT = {
					opinion = {
						who = liege
						value = 0
					}
				}
			}
			modifier = {
				factor = 1.25
				NOT = {
					opinion = {
						who = liege
						value = -25
					}
				}
			}
			modifier = {
				factor = 1.25
				NOT = {
					opinion = {
						who = liege
						value = -50
					}
				}
			}
			modifier = {
				factor = 1.25
				NOT = {
					opinion = {
						who = liege
						value = -75
					}
				}
			}
		}
		hidden_tooltip = { liege = { set_character_flag = faction_religious_war } }
		hidden_tooltip = {
			liege = {
				character_event = { id = PlusFaction.421 }
				any_vassal = {
					limit = {
						NOT = { trait = rebel }
						NOT = { trait = loyalist }
						NOT = { trait = neutral }
						OR = {
							in_faction = faction_religious_emperor
							in_faction = faction_religious_king
							in_faction = faction_religious_duke
						}
					}
					character_event = { id = PlusFaction.423 }
				}
			}
		}
		add_trait = rebel
		hidden_tooltip = { liege = { reverse_opinion = { who = ROOT modifier = revolting_against years = 100 } } }
		hidden_tooltip = {
			if = {
				limit = {
					liege = {
						OR = {
							independent = yes
							liege = { character = PREV }
						}
					}
				}
				set_defacto_liege = ROOT
			}
			if = {
				limit = {
					liege = {
						independent = no
						liege = { NOT = { character = PREV } }
					}
				}
				liege = {
					liege = {
						ROOT = {
							set_defacto_liege = PREV
						}
					}
				}
			}
		}
		join_attacker_wars = FROM
		clr_character_flag = do_not_join_civil_war
	}
	option = {
		name = "EVTOPTB_PlusFaction_400" #remain loyal
		ai_chance = {
			factor = 50
			modifier = {
				factor = 0
				liege = {
					OR = {
						has_character_flag = faction_religious_angry
						has_character_flag = faction_religious_unhappy
					}
				}
			}
			modifier = {
				factor = 10
				liege = { has_character_flag = faction_religious_happy }
			}
			modifier = {
				factor = 1.25
				trait = content
			}
			modifier = {
				factor = 1.25
				opinion = {
					who = liege
					value = 25
				}
			}
			modifier = {
				factor = 1.25
				opinion = {
					who = liege
					value = 50
				}
			}
			modifier = {
				factor = 1.25
				opinion = {
					who = liege
					value = 75
				}
			}
			modifier = {
				factor = 1.25
				opinion = {
					who = liege
					value = 100
				}
			}
		}
		add_trait = loyalist
		hidden_tooltip = {
			liege = {
				character_event = { id = PlusFaction.422 }
				any_vassal = {
					limit = {
						NOT = { trait = rebel }
						NOT = { trait = loyalist }
						NOT = { trait = neutral }
						OR = {
							in_faction = faction_religious_emperor
							in_faction = faction_religious_king
							in_faction = faction_religious_duke
						}
					}
					character_event = { id = PlusFaction.424 }
				}
			}
		}
		clr_character_flag = do_not_join_civil_war
	}
	option = {
		name = "EVTOPTC_PlusFaction_400" #remain neutral
		ai_chance = {
			factor = 100
		}
		add_trait = neutral
		hidden_tooltip = {
			liege = {
				any_vassal = {
					limit = {
						NOT = { trait = rebel }
						NOT = { trait = loyalist }
						NOT = { trait = neutral }
						OR = {
							in_faction = faction_religious_emperor
							in_faction = faction_religious_king
							in_faction = faction_religious_duke
						}
					}
					character_event = { id = PlusFaction.425 }
				}
			}
		}
		clr_character_flag = do_not_join_civil_war
	}
}

# Notify liege of religious faction joining rebellion
character_event = {
	id = PlusFaction.421
	desc = "EVTDESC_PlusFaction_421"
	picture = "GFX_evt_battle"
	border = "GFX_event_normal_frame_war"
	
	is_triggered_only = yes

	option = {
		name = "EVTOPTA_PlusFaction_401"
	}
}

# Notify liege of religious faction joining loyalists
character_event = {
	id = PlusFaction.422
	desc = "EVTDESC_PlusFaction_422"
	picture = "GFX_evt_battle"
	border = "GFX_event_normal_frame_war"
	
	is_triggered_only = yes

	option = {
		name = "EXCELLENT"
	}
}

# Religious faction member is called into the rebellion
character_event = {
	id = PlusFaction.423
	desc = "EVTDESC_PlusFaction_423"
	picture = "GFX_evt_battle"
	border = "GFX_event_normal_frame_war"
	
	is_triggered_only = yes

	option = {
		name = "TOARMS"
		add_trait = rebel
		hidden_tooltip = { liege = { reverse_opinion = { who = ROOT modifier = revolting_against years = 100 } } }
		hidden_tooltip = {
			if = {
				limit = {
					liege = {
						OR = {
							independent = yes
							liege = { character = PREV }
						}
					}
				}
				set_defacto_liege = ROOT
			}
			if = {
				limit = {
					liege = {
						independent = no
						liege = { NOT = { character = PREV } }
					}
				}
				liege = {
					liege = {
						ROOT = {
							set_defacto_liege = PREV
						}
					}
				}
			}
		}
		join_attacker_wars = FROMFROM
	}
}

# Religious faction member becomes a loyalist
character_event = {
	id = PlusFaction.424
	desc = "EVTDESC_PlusFaction_424"
	picture = "GFX_evt_battle"
	border = "GFX_event_normal_frame_war"
	
	is_triggered_only = yes

	option = {
		name = "TOARMS"
		add_trait = loyalist
	}
}

# If religious faction is neutral, player in the faction can pick sides
character_event = {
	id = PlusFaction.425
	desc = "EVTDESC_PlusFaction_425"
	picture = "GFX_evt_battle"
	border = "GFX_event_normal_frame_war"
	
	is_triggered_only = yes

	option = {
		name = "EVTOPTA_PlusFaction_405" #join the rebellion anyway
		trigger = {
			ai = no
		}
		add_trait = rebel
		hidden_tooltip = { liege = { reverse_opinion = { who = ROOT modifier = revolting_against years = 100 } } }
		hidden_tooltip = {
			if = {
				limit = {
					liege = {
						OR = {
							independent = yes
							liege = { character = PREV }
						}
					}
				}
				set_defacto_liege = ROOT
			}
			if = {
				limit = {
					liege = {
						independent = no
						liege = { NOT = { character = PREV } }
					}
				}
				liege = {
					liege = {
						ROOT = {
							set_defacto_liege = PREV
						}
					}
				}
			}
		}
		join_attacker_wars = FROMFROM
	}
	option = {
		name = "EVTOPTB_PlusFaction_405" #support the liege anyway
		trigger = {
			ai = no
		}
		add_trait = loyalist
	}
	option = {
		name = "EVTOPTC_PlusFaction_405" #stay neutral
		add_trait = neutral
		prestige = -50
	}
}

### REPUBLICAN FACTION CHOOSES SIDES

# Republican faction leader declares for one side or the other...
character_event = {
	id = PlusFaction.430 #formerly 1000182412
	is_triggered_only = yes
	desc = "EVTDESC_PlusFaction_400"
	picture = "GFX_evt_battle"
	border = "GFX_event_normal_frame_war"

	option = {
		name = "EVTOPTA_PlusFaction_400" #join the rebellion
		ai_chance = {
			factor = 100
			modifier = {
				factor = 0
				has_character_flag = do_not_join_civil_war
			}
			modifier = {
				factor = 0
				liege = {
					NOT = { has_character_flag = faction_republican_angry }
					NOT = { has_character_flag = faction_republican_unhappy }
				}
			}
			modifier = {
				factor = 100
				liege = { has_character_flag = faction_republican_angry }
			}
			modifier = {
				factor = 1.25
				trait = ambitious
			}
			modifier = {
				factor = 1.25
				NOT = {
					opinion = {
						who = liege
						value = 0
					}
				}
			}
			modifier = {
				factor = 1.25
				NOT = {
					opinion = {
						who = liege
						value = -25
					}
				}
			}
			modifier = {
				factor = 1.25
				NOT = {
					opinion = {
						who = liege
						value = -50
					}
				}
			}
			modifier = {
				factor = 1.25
				NOT = {
					opinion = {
						who = liege
						value = -75
					}
				}
			}
		}
		hidden_tooltip = { liege = { set_character_flag = faction_republican_war } }
		hidden_tooltip = {
			liege = {
				character_event = { id = PlusFaction.431 }
				any_vassal = {
					limit = {
						NOT = { trait = rebel }
						NOT = { trait = loyalist }
						NOT = { trait = neutral }
						OR = {
							in_faction = faction_republican_emperor
							in_faction = faction_republican_king
							in_faction = faction_republican_duke
						}
					}
					character_event = { id = PlusFaction.433 }
				}
			}
		}
		add_trait = rebel
		hidden_tooltip = { liege = { reverse_opinion = { who = ROOT modifier = revolting_against years = 100 } } }
		hidden_tooltip = {
			if = {
				limit = {
					liege = {
						OR = {
							independent = yes
							liege = { character = PREV }
						}
					}
				}
				set_defacto_liege = ROOT
			}
			if = {
				limit = {
					liege = {
						independent = no
						liege = { NOT = { character = PREV } }
					}
				}
				liege = {
					liege = {
						ROOT = {
							set_defacto_liege = PREV
						}
					}
				}
			}
		}
		join_attacker_wars = FROM
		clr_character_flag = do_not_join_civil_war
	}
	option = {
		name = "EVTOPTB_PlusFaction_400" #remain loyal
		ai_chance = {
			factor = 50
			modifier = {
				factor = 0
				liege = {
					OR = {
						has_character_flag = faction_republican_angry
						has_character_flag = faction_republican_unhappy
					}
				}
			}
			modifier = {
				factor = 10
				liege = { has_character_flag = faction_republican_happy }
			}
			modifier = {
				factor = 1.25
				trait = content
			}
			modifier = {
				factor = 1.25
				opinion = {
					who = liege
					value = 25
				}
			}
			modifier = {
				factor = 1.25
				opinion = {
					who = liege
					value = 50
				}
			}
			modifier = {
				factor = 1.25
				opinion = {
					who = liege
					value = 75
				}
			}
			modifier = {
				factor = 1.25
				opinion = {
					who = liege
					value = 100
				}
			}
		}
		add_trait = loyalist
		hidden_tooltip = {
			liege = {
				character_event = { id = PlusFaction.432 }
				any_vassal = {
					limit = {
						NOT = { trait = rebel }
						NOT = { trait = loyalist }
						NOT = { trait = neutral }
						OR = {
							in_faction = faction_republican_emperor
							in_faction = faction_republican_king
							in_faction = faction_republican_duke
						}
					}
					character_event = { id = PlusFaction.434 }
				}
			}
		}
		clr_character_flag = do_not_join_civil_war
	}
	option = {
		name = "EVTOPTC_PlusFaction_400" #remain neutral
		ai_chance = {
			factor = 100
		}
		add_trait = neutral
		hidden_tooltip = {
			liege = {
				any_vassal = {
					limit = {
						NOT = { trait = rebel }
						NOT = { trait = loyalist }
						NOT = { trait = neutral }
						OR = {
							in_faction = faction_republican_emperor
							in_faction = faction_republican_king
							in_faction = faction_republican_duke
						}
					}
					character_event = { id = PlusFaction.435 }
				}
			}
		}
		clr_character_flag = do_not_join_civil_war
	}
}

# Notify liege of republican faction joining rebellion
character_event = {
	id = PlusFaction.431
	desc = "EVTDESC_PlusFaction_431"
	picture = "GFX_evt_battle"
	border = "GFX_event_normal_frame_war"
	
	is_triggered_only = yes

	option = {
		name = "EVTOPTA_PlusFaction_401"
	}
}

# Notify liege of republican faction joining loyalists
character_event = {
	id = PlusFaction.432
	desc = "EVTDESC_PlusFaction_432"
	picture = "GFX_evt_battle"
	border = "GFX_event_normal_frame_war"
	
	is_triggered_only = yes

	option = {
		name = "EXCELLENT"
	}
}

# Republican faction member is called into the rebellion
character_event = {
	id = PlusFaction.433
	desc = "EVTDESC_PlusFaction_433"
	picture = "GFX_evt_battle"
	border = "GFX_event_normal_frame_war"
	
	is_triggered_only = yes

	option = {
		name = "TOARMS"
		add_trait = rebel
		hidden_tooltip = { liege = { reverse_opinion = { who = ROOT modifier = revolting_against years = 100 } } }
		hidden_tooltip = {
			if = {
				limit = {
					liege = {
						OR = {
							independent = yes
							liege = { character = PREV }
						}
					}
				}
				set_defacto_liege = ROOT
			}
			if = {
				limit = {
					liege = {
						independent = no
						liege = { NOT = { character = PREV } }
					}
				}
				liege = {
					liege = {
						ROOT = {
							set_defacto_liege = PREV
						}
					}
				}
			}
		}
		join_attacker_wars = FROMFROM
	}
}

# Republican faction member becomes a loyalist
character_event = {
	id = PlusFaction.434
	desc = "EVTDESC_PlusFaction_434"
	picture = "GFX_evt_battle"
	border = "GFX_event_normal_frame_war"
	
	is_triggered_only = yes

	option = {
		name = "TOARMS"
		add_trait = loyalist
	}
}

# If republican faction is neutral, player in the faction can pick sides
character_event = {
	id = PlusFaction.435
	desc = "EVTDESC_PlusFaction_435"
	picture = "GFX_evt_battle"
	border = "GFX_event_normal_frame_war"
	
	is_triggered_only = yes

	option = {
		name = "EVTOPTA_PlusFaction_405" #join the rebellion anyway
		trigger = {
			ai = no
		}
		add_trait = rebel
		hidden_tooltip = { liege = { reverse_opinion = { who = ROOT modifier = revolting_against years = 100 } } }
		hidden_tooltip = {
			if = {
				limit = {
					liege = {
						OR = {
							independent = yes
							liege = { character = PREV }
						}
					}
				}
				set_defacto_liege = ROOT
			}
			if = {
				limit = {
					liege = {
						independent = no
						liege = { NOT = { character = PREV } }
					}
				}
				liege = {
					liege = {
						ROOT = {
							set_defacto_liege = PREV
						}
					}
				}
			}
		}
		join_attacker_wars = FROMFROM
	}
	option = {
		name = "EVTOPTB_PlusFaction_405" #support the liege anyway
		trigger = {
			ai = no
		}
		add_trait = loyalist
	}
	option = {
		name = "EVTOPTC_PlusFaction_405" #stay neutral
		add_trait = neutral
		prestige = -50
	}
}

### FACTIONLESS RULERS CHOOSE SIDES

# Non-faction aligned characters pick a side
character_event = {
	id = PlusFaction.440 #formerly 1000182418
	desc = "EVTDESC_PlusFaction_440"
	picture = "GFX_evt_battle"
	border = "GFX_event_normal_frame_war"
	
	is_triggered_only = yes

	trigger = {
		OR = {
			higher_tier_than = baron
			num_of_baron_titles = 2
			is_feudal = yes
			is_tribal = yes
			is_patrician = yes
		}
		NOT = {
			trait = rebel
			trait = loyalist
			trait = neutral
			leads_faction = faction_feudal_emperor
			leads_faction = faction_feudal_king
			leads_faction = faction_feudal_duke
			leads_faction = faction_court_emperor
			leads_faction = faction_court_king
			leads_faction = faction_court_duke
			leads_faction = faction_religious_emperor
			leads_faction = faction_religious_king
			leads_faction = faction_religious_duke
			leads_faction = faction_republican_emperor
			leads_faction = faction_republican_king
			leads_faction = faction_republican_duke
			in_faction = faction_feudal_emperor
			in_faction = faction_feudal_king
			in_faction = faction_feudal_duke
			in_faction = faction_court_emperor
			in_faction = faction_court_king
			in_faction = faction_court_duke
			in_faction = faction_religious_emperor
			in_faction = faction_religious_king
			in_faction = faction_religious_duke
			in_faction = faction_republican_emperor
			in_faction = faction_republican_king
			in_faction = faction_republican_duke
		}
	}

	option = {
		name = "EVTOPTA_PlusFaction_400" #join the rebellion
		trigger = {
			prisoner = no
			NOT = { trait = incapable }
		}
		ai_chance = {
			factor = 10
			modifier = {
				factor = 0
				is_adult = no
			}
			modifier = {
				factor = 0
				liege = {
					current_heir = { character = ROOT }
				}
			}
			modifier = {
				factor = 0.5
				liege = { is_allied_with = ROOT }
			}
			modifier = {
				factor = 5
				liege = { is_rival = ROOT }
			}
			modifier = {
				factor = 0
				has_character_flag = do_not_join_civil_war
			}
			modifier = {
				factor = 1.5
				trait = ambitious
			}
			modifier = {
				factor = 0
				opinion = {
					who = liege
					value = 0
				}
			}
			modifier = {
				factor = 3
				NOT = {
					opinion = {
						who = liege
						value = 0
					}
				}
			}
			modifier = {
				factor = 3
				NOT = {
					opinion = {
						who = liege
						value = -25
					}
				}
			}
			modifier = {
				factor = 3
				NOT = {
					opinion = {
						who = liege
						value = -50
					}
				}
			}
			modifier = {
				factor = 3
				NOT = {
					opinion = {
						who = liege
						value = -75
					}
				}
			}
		}
		add_trait = rebel
		hidden_tooltip = { liege = { reverse_opinion = { who = ROOT modifier = revolting_against years = 100 } } }
		hidden_tooltip = {
			if = {
				limit = {
					liege = {
						OR = {
							independent = yes
							liege = { character = PREV }
						}
					}
				}
				set_defacto_liege = ROOT
			}
			if = {
				limit = {
					liege = {
						independent = no
						liege = { NOT = { character = PREV } }
					}
				}
				liege = {
					liege = {
						ROOT = {
							set_defacto_liege = PREV
						}
					}
				}
			}
		}
		join_attacker_wars = FROM
		clr_character_flag = do_not_join_civil_war
	}
	option = {
		name = "EVTOPTB_PlusFaction_400" #remain loyal
		trigger = {
			prisoner = no
			NOT = { trait = incapable }
		}
		ai_chance = {
			factor = 10
			modifier = {
				factor = 0
				NOT = {
					opinion = {
						who = liege
						value = 0
					}
				}
			}
			modifier = {
				factor = 10
				liege = {
					current_heir = { character = ROOT }
				}
			}
			modifier = {
				factor = 5
				liege = { is_allied_with = ROOT }
			}
			modifier = {
				factor = 1.5
				trait = content
			}
			modifier = {
				factor = 3
				opinion = {
					who = liege
					value = 25
				}
			}
			modifier = {
				factor = 3
				opinion = {
					who = liege
					value = 50
				}
			}
			modifier = {
				factor = 3
				opinion = {
					who = liege
					value = 75
				}
			}
			modifier = {
				factor = 3
				opinion = {
					who = liege
					value = 100
				}
			}
		}
		add_trait = loyalist
		clr_character_flag = do_not_join_civil_war
	}
	option = {
		name = "EVTOPTC_PlusFaction_400" #remain neutral
		trigger = {
			prisoner = no
			NOT = { trait = incapable }
		}
		ai_chance = {
			factor = 100
		}
		add_trait = neutral
		clr_character_flag = do_not_join_civil_war
	}
	option = {
		name = "EVTOPTD_PlusFaction_400" #I am imprisoned
		trigger = {
			prisoner = yes
		}
		clr_character_flag = do_not_join_civil_war
	}
	option = {
		name = "EVTOPTE_PlusFaction_400" #I am not up to such a fight...
		tooltip_info = incapable
		trigger = {
			trait = incapable
		}
		clr_character_flag = do_not_join_civil_war
	}
}

### VASSALS CHOOSE SIDES IN A PRETENDER WAR

# Vassal receives notice of the war's begin
character_event = {
	id = PlusFaction.445
	desc = "EVTDESC_PlusFaction_445"
	picture = "GFX_evt_battle"
	border = "GFX_event_normal_frame_war"

	is_triggered_only = yes

	trigger = {
		OR = {
			higher_tier_than = baron
			num_of_baron_titles = 2
			is_feudal = yes
			is_tribal = yes
			is_patrician = yes
		}
		NOT = {
			trait = rebel
			trait = loyalist
			trait = neutral
		}
	}
	
	option = {
		name = "EVTOPTA_PlusFaction_400" #join the rebellion
		trigger = {
			prisoner = no
			NOT = { trait = incapable }
		}
		ai_chance = {
			factor = 10
			modifier = {
				factor = 0
				is_adult = no
				FROM = {
					supported_claimant = {
						NOT = { character = ROOT }
					}
				}
			}
			modifier = {
				factor = 0
				liege = {
					current_heir = { character = ROOT }
				}
			}
			modifier = {
				factor = 0
				FROM = {
					supported_claimant = {
						NOT = { character = ROOT }
						NOT = { reverse_opinion = { who = ROOT value = 0 } }
					}
				}
			}
			modifier = {
				factor = 3
				FROM = {
					supported_claimant = {
						reverse_opinion = { who = ROOT value = 25 }
					}
				}
			}
			modifier = {
				factor = 3
				FROM = {
					supported_claimant = {
						reverse_opinion = { who = ROOT value = 50 }
					}
				}
			}
			modifier = {
				factor = 3
				FROM = {
					supported_claimant = {
						reverse_opinion = { who = ROOT value = 75 }
					}
				}
			}
			modifier = {
				factor = 5
				liege = {
					NOT = { is_close_relative = ROOT }
				}
				FROM = {
					supported_claimant = { is_close_relative = ROOT }
				}
			}
			modifier = {
				factor = 2
				liege = {
					NOT = { is_allied_with = ROOT }
				}
				FROM = {
					supported_claimant = { is_allied_with = ROOT }
				}
			}
			modifier = {
				factor = 0.5
				FROM = {
					supported_claimant_title = {
						any_claimant = { character = ROOT }
					}
				}
			}
			modifier = {
				factor = 0.5
				liege = { is_allied_with = ROOT }
			}
			modifier = {
				factor = 5
				liege = { is_rival = ROOT }
			}
			modifier = {
				factor = 0
				has_character_flag = do_not_join_civil_war
			}
			modifier = {
				factor = 1.5
				trait = ambitious
			}
			modifier = {
				factor = 0.5
				opinion = {
					who = liege
					value = 0
				}
			}
			modifier = {
				factor = 0
				opinion = {
					who = liege
					value = 25
				}
				FROM = {
					supported_claimant = {
						NOT = { character = ROOT }
					}
				}
			}
			modifier = {
				factor = 3
				NOT = {
					opinion = {
						who = liege
						value = 0
					}
				}
			}
			modifier = {
				factor = 3
				NOT = {
					opinion = {
						who = liege
						value = -25
					}
				}
			}
			modifier = {
				factor = 3
				NOT = {
					opinion = {
						who = liege
						value = -50
					}
				}
			}
			modifier = {
				factor = 3
				NOT = {
					opinion = {
						who = liege
						value = -75
					}
				}
			}
		}
		add_trait = rebel
		hidden_tooltip = { liege = { reverse_opinion = { who = ROOT modifier = revolting_against years = 100 } } }
		hidden_tooltip = {
			if = {
				limit = {
					liege = {
						OR = {
							independent = yes
							liege = { character = PREV }
						}
					}
				}
				set_defacto_liege = ROOT
			}
			if = {
				limit = {
					liege = {
						independent = no
						liege = { NOT = { character = PREV } }
					}
				}
				liege = {
					liege = {
						ROOT = {
							set_defacto_liege = PREV
						}
					}
				}
			}
		}
		join_attacker_wars = FROM
		clr_character_flag = do_not_join_civil_war
	}
	option = {
		name = "EVTOPTB_PlusFaction_400" #remain loyal
		trigger = {
			prisoner = no
			NOT = { trait = incapable }
		}
		ai_chance = {
			factor = 10
			modifier = {
				factor = 0
				FROM = { supported_claimant = { character = ROOT } }
				liege = { NOT = { current_heir = { character = ROOT } } }
			}
			modifier = {
				factor = 0
				NOT = {
					opinion = {
						who = liege
						value = 0
					}
				}
			}
			modifier = {
				factor = 3
				FROM = {
					supported_claimant = {
						NOT = { reverse_opinion = { who = ROOT value = -25 } }
					}
				}
			}
			modifier = {
				factor = 3
				FROM = {
					supported_claimant = {
						NOT = { reverse_opinion = { who = ROOT value = -50 } }
					}
				}
			}
			modifier = {
				factor = 3
				FROM = {
					supported_claimant = {
						NOT = { reverse_opinion = { who = ROOT value = -75 } }
					}
				}
			}
			modifier = {
				factor = 10
				liege = {
					current_heir = { character = ROOT }
				}
			}
			modifier = {
				factor = 5
				liege = { is_allied_with = ROOT }
				FROM = {
					supported_claimant = { NOT = { is_allied_with = ROOT } }
				}
			}
			modifier = {
				factor = 5
				liege = { is_close_relative = ROOT }
				FROM = {
					supported_claimant = { NOT = { is_close_relative = ROOT } }
				}
			}
			modifier = {
				factor = 1.5
				trait = content
			}
			modifier = {
				factor = 3
				opinion = {
					who = liege
					value = 25
				}
			}
			modifier = {
				factor = 3
				opinion = {
					who = liege
					value = 50
				}
			}
			modifier = {
				factor = 3
				opinion = {
					who = liege
					value = 75
				}
			}
			modifier = {
				factor = 3
				opinion = {
					who = liege
					value = 100
				}
			}
		}
		add_trait = loyalist
		clr_character_flag = do_not_join_civil_war
	}
	option = {
		name = "EVTOPTC_PlusFaction_400" #remain neutral
		trigger = {
			prisoner = no
			NOT = { trait = incapable }
		}
		ai_chance = {
			factor = 100
			modifier = {
				factor = 0
				FROM = {
					supported_claimant = { character = ROOT }
				}
			}
		}
		add_trait = neutral
		clr_character_flag = do_not_join_civil_war
	}
	option = {
		name = "EVTOPTD_PlusFaction_400" #I am imprisoned
		trigger = {
			prisoner = yes
		}
		clr_character_flag = do_not_join_civil_war
	}
	option = {
		name = "EVTOPTE_PlusFaction_400" #I am not up to such a fight...
		tooltip_info = incapable
		trigger = {
			trait = incapable
		}
		clr_character_flag = do_not_join_civil_war
	}
}	

### THE CIVIL WAR ENDS

# The victorious side rewards their supporters
character_event = {
	id = PlusFaction.450 #formerly 1000182419
	desc = "EVTDESC_PlusFaction_450"
	picture = GFX_evt_council
	
	is_triggered_only = yes
	hide_from = yes

	trigger = {
		any_vassal = {
			higher_tier_than = BARON
			reverse_has_opinion_modifier = { who = ROOT modifier = opinion_civil_war_supporter }
		}
	}

	immediate = {
		# Release all vassals who helped you
		any_vassal = {
			limit = {
				OR = {
					trait = loyalist
					trait = rebel
				}
				prisoner = yes
				host = {
					OR = {
						character = ROOT
						is_liege_or_above = ROOT
					}
				}
			}
			prisoner = no
		}
	}

	option = {
		name = "EVTOPTA_PlusFaction_450" #They will be granted tax privileges
		ai_chance = {
			factor = 100
			modifier = {
				factor = 0.5
				trait = greedy
			}
			modifier = {
				factor = 2.0
				trait = charitable
			}
		}
		# Tax penalty applied to the ruler's provinces
		any_demesne_title = {
			limit = {
				tier = count
			}
			hidden_tooltip = {
				location = {
					remove_province_modifier = tax_privileges
					remove_province_modifier = tax_reduction
				}
			}
			location = {
				add_province_modifier = {
					name = "tax_reduction"
					duration = 3650
				}
			}
		}
		# Tax penalty applied to any vassals who opposed ruler
		hidden_tooltip = {
			any_vassal = {
				limit = {
					higher_tier_than = BARON
					reverse_has_opinion_modifier = { who = ROOT modifier = opinion_civil_war_loser }
				}
				character_event = { id = PlusFaction.451 } #notify
				any_vassal = {
					limit = { higher_tier_than = BARON }
					character_event = { id = PlusFaction.451 } #notify
					any_vassal = {
						limit = { higher_tier_than = BARON }
						character_event = { id = PlusFaction.451 } #notify
					}
				}
			}
		}
		# Tax penalty applied to any vassals who were neutral
		hidden_tooltip = {
			any_vassal = {
				limit = {
					higher_tier_than = BARON
					trait = neutral
				}
				character_event = { id = PlusFaction.456 } #notify
				any_vassal = {
					limit = { higher_tier_than = BARON }
					character_event = { id = PlusFaction.456 } #notify
					any_vassal = {
						limit = { higher_tier_than = BARON }
						character_event = { id = PlusFaction.456 } #notify
					}
				}
			}
		}
		# Tax reward applied to any vassals who supported ruler
		any_vassal = {
			limit = {
				higher_tier_than = BARON
				reverse_has_opinion_modifier = { who = ROOT modifier = opinion_civil_war_supporter }
			}
			custom_tooltip = {
				text = CUSTOMTOOLTIP39
				hidden_tooltip = {
					opinion = {
						who = ROOT
						modifier = opinion_pleased
						months = 120
					}
					character_event = { id = PlusFaction.452 } #notify
					any_vassal = {
						limit = { higher_tier_than = BARON }
						character_event = { id = PlusFaction.452 } #notify
						any_vassal = {
							limit = { higher_tier_than = BARON }
							character_event = { id = PlusFaction.452 } #notify
						}
					}
				}
			}
		}
		# ensure all remaining rebellion traits are removed
		hidden_tooltip = {
			any_vassal = {
				limit = {
					OR = {
						trait = loyalist
						trait = neutral
					}
				}
				remove_trait = loyalist
				remove_trait = neutral
			}
			any_vassal = {
				limit = {
					trait = rebel
					reverse_has_opinion_modifier = { who = ROOT modifier = opinion_civil_war_supporter }
				}
				remove_trait = rebel
				any_realm_character = {
					reverse_remove_opinion = {
						who = PREV
						modifier = revolting_against
					}
				}
			}
		}
	}
	option = {
		name = "EVTOPTB_PlusFaction_450" #Glory and Honor
		ai_chance = {
			factor = 100
			modifier = {
				factor = 0.5
				trait = content
			}
			modifier = {
				factor = 2.0
				trait = ambitious
			}
			modifier = {
				factor = 0.5
				trait = proud
			}
			modifier = {
				factor = 2.0
				trait = humble
			}
			modifier = {
				factor = 0
				OR = {
					AND = {
						tier = duke
						NOT = { prestige = 500 }
					}
					AND = {
						tier = king
						NOT = { prestige = 750 }
					}
					AND = {
						tier = emperor
						NOT = { prestige = 1000 }
					}
				}
			}
		}
		# Ruler takes a prestige penalty
		if = {
			limit = { tier = count }
			prestige = -250
		}
		if = {
			limit = { tier = duke }
			prestige = -500
		}
		if = {
			limit = { tier = king }
			prestige = -750
		}
		if = {
			limit = { tier = emperor }
			prestige = -1000
		}
		# All opponents receive a prestige penalty
		hidden_tooltip = {
			any_vassal = {
				limit = {
					OR = {
						higher_tier_than = baron
						num_of_baron_titles = 2
						is_feudal = yes
						is_tribal = yes
						is_patrician = yes
					}
					reverse_has_opinion_modifier = { who = ROOT modifier = opinion_civil_war_loser }
				}
				character_event = { id = PlusFaction.453 } #notify
			}
		}
		# All neutral rulers receive a prestige penalty
		hidden_tooltip = {
			any_vassal = {
				limit = {
					OR = {
						higher_tier_than = baron
						num_of_baron_titles = 2
						is_feudal = yes
						is_tribal = yes
						is_patrician = yes
					}
					trait = neutral
				}
				character_event = { id = PlusFaction.457 } #notify
			}
		}
		# All supporters receive a prestige bonus
		any_vassal = {
			limit = {
				OR = {
					higher_tier_than = baron
					num_of_baron_titles = 2
					is_feudal = yes
					is_tribal = yes
					is_patrician = yes
				}
				reverse_has_opinion_modifier = { who = ROOT modifier = opinion_civil_war_supporter }
			}
			custom_tooltip = {
				text = CUSTOMTOOLTIP40
				hidden_tooltip = {
					opinion = {
						who = ROOT
						modifier = opinion_pleased
						months = 120
					}
					character_event = { id = PlusFaction.454 } #notify
				}
			}
		}
		# ensure all remaining rebellion traits are removed
		hidden_tooltip = {
			any_vassal = {
				limit = {
					OR = {
						trait = loyalist
						trait = neutral
					}
				}
				remove_trait = loyalist
				remove_trait = neutral
			}
			any_vassal = {
				limit = {
					trait = rebel
					reverse_has_opinion_modifier = { who = ROOT modifier = opinion_civil_war_supporter }
				}
				remove_trait = rebel
				any_realm_character = {
					reverse_remove_opinion = {
						who = PREV
						modifier = revolting_against
					}
				}
			}
		}
	}
	option = {
		name = "EVTOPTC_PlusFaction_450" #Nothing
		ai_chance = {
			factor = 10
			modifier = {
				factor = 0.1
				OR = {
					trait = humble
					trait = content
					trait = charitable
					trait = just
				}
			}
			modifier = {
				factor = 1.5
				trait = arbitrary
			}
			modifier = {
				factor = 1.5
				trait = wroth
			}
			modifier = {
				factor = 2.0
				trait = cruel
			}
			modifier = {
				factor = 5.0
				trait = lunatic
			}
			modifier = {
				factor = 5.0
				trait = possessed
			}
		}
		custom_tooltip = {
			text = CUSTOMTOOLTIP27
			hidden_tooltip = {
				any_vassal = {
					limit = {
						OR = {
							higher_tier_than = baron
							num_of_baron_titles = 2
							is_feudal = yes
							is_tribal = yes
							is_patrician = yes
						}
						reverse_has_opinion_modifier = { who = ROOT modifier = opinion_civil_war_supporter }
					}
					character_event = { id = PlusFaction.455 } #notify
				}
			}
		}
		# ensure all remaining rebellion traits are removed
		hidden_tooltip = {
			any_vassal = {
				limit = {
					OR = {
						trait = loyalist
						trait = neutral
					}
				}
				remove_trait = loyalist
				remove_trait = neutral
			}
			any_vassal = {
				limit = {
					trait = rebel
					reverse_has_opinion_modifier = { who = ROOT modifier = opinion_civil_war_supporter }
				}
				remove_trait = rebel
				any_realm_character = {
					reverse_remove_opinion = {
						who = PREV
						modifier = revolting_against
					}
				}
			}
		}
	}
}

# Notify rebel ruler of tax reduction penalty
character_event = {
	id = PlusFaction.451
	desc = "EVTDESC_PlusFaction_451"
	picture = GFX_evt_council
	
	is_triggered_only = yes

	trigger = {
		independent = no
	}

	immediate = {
		any_demesne_title = {
			limit = {
				tier = count
			}
			location = {
				remove_province_modifier = tax_privileges
				remove_province_modifier = tax_reduction
			}
		}
	}

	option = {
		name = "CURSES"
		any_demesne_title = {
			limit = {
				tier = count
			}
			location = {
				add_province_modifier = {
					name = "tax_reduction"
					duration = 3650
				}
			}
		}
	}
}

# Notify ruler of tax privilege reward
character_event = {
	id = PlusFaction.452
	desc = "EVTDESC_PlusFaction_452"
	picture = GFX_evt_council
	
	is_triggered_only = yes

	trigger = {
		independent = no
	}

	immediate = {
		any_demesne_title = {
			limit = {
				tier = count
			}
			location = {
				remove_province_modifier = tax_privileges
				remove_province_modifier = tax_reduction
			}
		}
	}

	option = {
		name = "EXCELLENT"
		any_demesne_title = {
			limit = {
				tier = count
			}
			location = {
				add_province_modifier = {
					name = "tax_privileges"
					duration = 3650
				}
			}
		}
	}
}

# Notify rebel ruler of prestige penalty
character_event = {
	id = PlusFaction.453
	desc = "EVTDESC_PlusFaction_453"
	picture = GFX_evt_council
	
	is_triggered_only = yes

	trigger = {
		independent = no
	}

	option = {
		name = "CURSES"
		if = {
			limit = { tier = baron }
			prestige = -100
		}
		if = {
			limit = { tier = count }
			prestige = -250
		}
		if = {
			limit = { tier = duke }
			prestige = -500
		}
		if = {
			limit = { tier = king }
			prestige = -750
		}
	}
}

# Notify ruler of prestige reward
character_event = {
	id = PlusFaction.454
	desc = "EVTDESC_PlusFaction_454"
	picture = GFX_evt_council
	
	is_triggered_only = yes

	trigger = {
		independent = no
	}

	option = {
		name = "EXCELLENT"
		if = {
			limit = { tier = baron }
			prestige = 100
		}
		if = {
			limit = { tier = count }
			prestige = 250
		}
		if = {
			limit = { tier = duke }
			prestige = 500
		}
		if = {
			limit = { tier = king }
			prestige = 750
		}
	}
}

# Notify ruler that there will be no reward
character_event = {
	id = PlusFaction.455
	desc = "EVTDESC_PlusFaction_455"
	picture = GFX_evt_council
	
	is_triggered_only = yes

	trigger = {
		independent = no
	}

	option = {
		name = "EVTOPTA_PlusFaction_455" #Treachery!
		opinion = {
			who = FROM
			modifier = opinion_upset
			months = 120
			multiplier = 2
		}
		if = {
			limit = {
				OR = {
					leads_faction = faction_feudal_emperor
					leads_faction = faction_feudal_king
					leads_faction = faction_feudal_duke
				}
			}
			#princely faction is upset if leader is among the unrewarded
			liege = {
				hidden_tooltip = { change_variable = { which = "faction_mood_feudal" value = -4 } }
				custom_tooltip = {
					text = FEUDALFACTIONMOODMINUS
					hidden_tooltip = { random_courtier = { limit = { ai = yes } character_event = { id = PlusFaction.306 days = 1 } } }
				}
			}
		}
		if = {
			limit = {
				OR = {
					leads_faction = faction_republican_emperor
					leads_faction = faction_republican_king
					leads_faction = faction_republican_duke
				}
			}
			#republican faction is upset if leader is among the unrewarded
			liege = {
				hidden_tooltip = { change_variable = { which = "faction_mood_republican" value = -4 } }
				custom_tooltip = {
					text = REPUBLICANFACTIONMOODMINUS
					hidden_tooltip = { random_courtier = { limit = { ai = yes } character_event = { id = PlusFaction.306 days = 1 } } }
				}
			}
		}
		if = {
			limit = {
				OR = {
					leads_faction = faction_religious_emperor
					leads_faction = faction_religious_king
					leads_faction = faction_religious_duke
				}
			}
			#religious faction is upset if leader is among the unrewarded
			liege = {
				hidden_tooltip = { change_variable = { which = "faction_mood_religious" value = -4 } }
				custom_tooltip = {
					text = RELIGIOUSFACTIONMOODMINUS
					hidden_tooltip = { random_courtier = { limit = { ai = yes } character_event = { id = PlusFaction.306 days = 1 } } }
				}
			}
		}
		if = {
			limit = {
				OR = {
					leads_faction = faction_court_emperor
					leads_faction = faction_court_king
					leads_faction = faction_court_duke
				}
			}
			#court faction is upset if leader is among the unrewarded
			liege = {
				hidden_tooltip = { change_variable = { which = "faction_mood_court" value = -4 } }
				custom_tooltip = {
					text = COURTFACTIONMOODMINUS
					hidden_tooltip = { random_courtier = { limit = { ai = yes } character_event = { id = PlusFaction.306 days = 1 } } }
				}
			}
		}
	}
}

# Notify neutral ruler of tax reduction penalty
character_event = {
	id = PlusFaction.456
	desc = "EVTDESC_PlusFaction_456"
	picture = GFX_evt_council
	
	is_triggered_only = yes

	trigger = {
		independent = no
	}

	immediate = {
		any_demesne_title = {
			limit = {
				tier = count
			}
			location = {
				remove_province_modifier = tax_privileges
				remove_province_modifier = tax_reduction
			}
		}
	}

	option = {
		name = "CURSES"
		any_demesne_title = {
			limit = {
				tier = count
			}
			location = {
				add_province_modifier = {
					name = "tax_reduction"
					duration = 1825
				}
			}
		}
	}
}

# Notify neutral ruler of prestige penalty
character_event = {
	id = PlusFaction.457
	desc = "EVTDESC_PlusFaction_457"
	picture = GFX_evt_council
	
	is_triggered_only = yes

	trigger = {
		independent = no
	}

	option = {
		name = "CURSES"
		if = {
			limit = { tier = baron }
			prestige = -50
		}
		if = {
			limit = { tier = count }
			prestige = -100
		}
		if = {
			limit = { tier = duke }
			prestige = -250
		}
		if = {
			limit = { tier = king }
			prestige = -400
		}
	}
}

