
namespace = GoPagan

#reserved: GoPagan.200 to Plus.249

#######################################
# ZOROASTRIAN EVENTS
#######################################

# Help in fighting the local bandits
character_event = {
	id = GoPagan.200
	desc = "EVTDESC_GoPagan_200"
	picture = "GFX_evt_bandits"
	
	min_age = 16
	prisoner = no
	only_playable = yes
	capable_only = yes
	only_men = yes
	
	trigger = {
		war = no
		is_ill = no
		religion_group = zoroastrian_group
		any_demesne_province = {
			OR = {
				has_province_modifier = highway_robber_band
				has_province_modifier = smugglers_ring
				has_province_modifier = thieves_guild
				revolt_risk = 3
			}
		}
	}
	
	mean_time_to_happen = {
		months = 36	
		modifier = {
			factor = 0.8
			trait = diligent
		}
		modifier = {
			factor = 0.6
			realm_learning = 30
		}
	}
	
	option = {
		name = "EVTOPTA_GoPagan_200" #Hunt them down yourself
		piety = 10
		random = {
			chance = 15
			add_trait = wounded
		}
	}
	option = {
		name = "EVTOPTB_GoPagan_200" #Send a squad of guards
		trigger = {
			scaled_wealth = 0.15
		}
		scaled_wealth = -0.15
		prestige = 20
	}
	option = {
		name = "EVTOPTC_GoPagan_200" #Let the locals handle it
		prestige = -10
		piety = -10
	}
}

# Rebuild a local mosque?
character_event = {
	id = GoPagan.201
	desc = "EVTDESC_GoPagan_201"
	picture = "GFX_evt_burning_house_muslim"
	
	min_age = 16
	prisoner = no
	only_rulers = yes
	capable_only = yes
	
	trigger = {
		war = no
		religion_group = zoroastrian_group
		any_demesne_province = {
			religion_group = muslim
		}
		NOT = {
			has_character_modifier = zoroastrian_tolerance
			trait = cruel
		}
	}
	mean_time_to_happen = {
		months = 300	
		modifier = {
			factor = 0.8
			trait = kind
		}
		modifier = {
			factor = 0.7
			trait = charitable
		}
	}
	
	option = {
		name = "EVTOPTA_GoPagan_201" #Help them
		scaled_wealth = -0.5
		piety = 20
		add_character_modifier = {
			name = zoroastrian_tolerance
			duration = 365
		}
		hidden_tooltip = {
			any_realm_character = {
				limit = {
					NOT = { character = ROOT }
				}
				if = {
					limit = { religion_group = muslim }
					opinion = {
						who = ROOT
						modifier = opinion_tolerant_muslims
						months = 24
					}
				}
				if = {
					limit = { religion_group = zoroastrian_group }
					opinion = {
						who = ROOT
						modifier = opinion_tolerant
						months = 24
					}
				}
			}
		}
	}
	option = {
		name = "EVTOPTB_GoPagan_201" #Ignore their plight
		random = {
			chance = 20
			add_trait = cruel
		}
	}
}

# Sedreh Pushi ritual - child's event
character_event = {
	id = GoPagan.202
	desc = "EVTDESC_GoPagan_202"
	picture = "GFX_evt_child_bully"
	
	min_age = 7
	max_age = 15
	prisoner = no
	capable_only = yes

	trigger = {
		religion_group = zoroastrian_group
		father = {
			is_alive = yes
			NOT = { trait = incapable }
			prisoner = no
			war = no
		}
		NOT = { has_character_flag = had_sedreh_pushi }
	}
	
	mean_time_to_happen = {
		months = 12
		modifier = {
			factor = 0.5
			age = 11
		}
		modifier = {
			factor = 0.5
			age = 12
		}
		modifier = {
			factor = 0.5
			age = 13
		}
		modifier = {
			factor = 0.1
			age = 14
		}
	}
	
	option = {
		name = "EVTOPTA_GoPagan_202" #Ask my father for advice
		set_character_flag = had_sedreh_pushi
		hidden_tooltip = {
			father = {
				character_event = {
					id = GoPagan.203
					days = 3
				}
			}
		}
	}
}

# Sedreh Pushi ritual - father's event
character_event = {
	id = GoPagan.203
	desc = "EVTDESC_GoPagan_203"
	picture = "GFX_evt_guardian"
	
	is_triggered_only = yes
	
	option = {
		name = "EVTOPTA_GoPagan_203" # Talk to him about Asha – righteousness
		trigger = {
			OR = {
				trait = just
				trait = kind
			}
		}
		FROM = { piety = 10 }
		FROM = { change_intrigue = -1 }
		FROM = { change_learning = 2 }
	}
	option = {
		name = "EVTOPTB_GoPagan_203" # Talk to him about Khshatr – divine power.
		trigger = {
			OR = {
				trait = brave
				trait = strong
			}
		}
		FROM = { prestige = 20 }
		FROM = { change_intrigue = -1 }
		FROM = { change_martial = 1 }
	}
	option = {
		name = "EVTOPTC_GoPagan_203" # Talk to him about  Armaiti – devotion.
		trigger = {
			OR = {
				trait = zealous
				piety = 400
			}
		}
		FROM = { piety = 30 }
		FROM = { change_intrigue = -1 }
		FROM = { change_diplomacy = 1 }
	}
	option = {
		name = "EVTOPTD_GoPagan_203" # Talk to him about Vohu Manah – holy spirit.
		trigger = {
			OR = {
				trait = diligent
				piety = 800
			}
		}
		FROM = { piety = 10	prestige = 10 }
		FROM = { change_intrigue = -1 }
		FROM = { change_stewardship = 1 }
	}
	option = {
		name = "EVTOPTE_GoPagan_203" # I have nothing to teach him.
		random_list = {
			50 = { FROM = { change_learning = 1 } }
			50 = { FROM = { change_learning = -1 } }
		}
	}
}

### Rebuilding Persepolis

# Rebuild Persepolis Phase 1 - Laying the foundation
character_event = {
	id = GoPagan.205 #formerly 1000182065
	desc = "EVTDESC_GoPagan_205"
	picture = "GFX_persepolis_ruin"

	is_triggered_only = yes
	
	option = {
		name = "EVTOPTC_GoPagan_205" # Make it the greatest city there ever was!
		add_character_modifier = {
			name = is_rebuilding_persepolis
			duration = -1
			hidden = yes
			inherit = yes
		}
	}
}

# Rebuild Persepolis Phase 2 - Add Esfahan bonus modifier ~8 years
province_event = {
	id = GoPagan.206 #formerly 1000182066
	title = "EVTNAME_GoPagan_206"
	desc = "EVTDESC_GoPagan_206"
	picture = "GFX_persepolis_built"

	trigger = {
		province_id = 646 # Esfahan
		has_global_flag = rebuilding_persepolis
		NOT = { has_global_flag = persepolis_rebuilt }
		had_province_flag = { flag = reb_pers_1 days = 2555 random = 365 }
		NOT = { has_province_flag = reb_pers_2 }
	}

	immediate = {
		set_province_flag = reb_pers_2
	}
	
	mean_time_to_happen = {
		days = 7
	}
	
	option = {
		name = "EVTOPTA_GoPagan_206" #Library
		add_province_modifier = { name = persepolis_library duration = -1 }
	}
	option = {
		name = "EVTOPTB_GoPagan_206" #Irrigation system
		add_province_modifier = { name = persepolis_irrigation duration = -1 }
	}
	option = {
		name = "EVTOPTC_GoPagan_206" #Gate of all nations
		add_province_modifier = { name = persepolis_gate duration = -1 }
	}
}

# Rebuild Persepolis Phase 3
province_event = {
	id = GoPagan.207 #formerly 1000182067
	title = "EVTNAME_GoPagan_207"
	desc = "EVTDESC_GoPagan_207"
	picture = "GFX_persepolis_built"
	
	trigger = {
		province_id = 646 # Esfahan
		has_global_flag = rebuilding_persepolis
		NOT = { has_global_flag = persepolis_rebuilt }
		had_province_flag = { flag = reb_pers_2 days = 638 random = 92 }		
	}

	mean_time_to_happen = {
		days = 7
	}
	
	immediate = {
		owner = { remove_character_modifier = is_rebuilding_persepolis }
		clr_global_flag = rebuilding_persepolis
		set_global_flag = persepolis_rebuilt
		clr_province_flag = reb_pers_1
		clr_province_flag = reb_pers_2
	}

	option = {
		name = "EVTOPTA_GoPagan_207"
		owner = {
			prestige = 500
			646 = {
				build_holding = {
				   title = b_new_persepolis
				   type = temple
				   holder = PREV
				}
			}
		}
		hidden_tooltip = {
			owner = {
				set_character_flag = event_1000182067
				narrative_event = { id = GoPagan.210 days = 7 }
			}
		}
	}
}

# Esfahan owned by someone else before Persepolis is rebuilt
province_event = {
	id = GoPagan.208
	
	hide_window = yes
	
	trigger = {
		province_id = 646 # Esfahan
		has_global_flag = rebuilding_persepolis
		NOT = { has_global_flag = persepolis_rebuilt }
		owner = {
			NOT = { has_character_modifier = is_rebuilding_persepolis }
		}
	}
	
	mean_time_to_happen = {
		days = 1
	}
	
	immediate = {
		clr_global_flag = rebuilding_persepolis
		clr_province_flag = reb_pers_1
		clr_province_flag = reb_pers_2
		remove_province_modifier = persepolis_library
		remove_province_modifier = persepolis_irrigation
		remove_province_modifier = persepolis_gate
		any_independent_ruler = {
			remove_character_modifier = is_rebuilding_persepolis
			any_realm_character = {
				remove_character_modifier = is_rebuilding_persepolis
			}
		}
	}
}

# News spread about New Persepolis
narrative_event = {
	id = GoPagan.210 #formerly 1000182068
	title = "EVTNAME_GoPagan_210"
	desc = "EVTDESC_GoPagan_210"
	picture = "GFX_persepolis_built"
	border = "GFX_event_narrative_frame_religion"
	
	major = yes
	only_rulers = yes
	is_triggered_only = yes
	
	option = {
		name = "EXCELLENT"
		trigger = {
			has_character_flag = event_1000182067
		}
		clr_character_flag = event_1000182067
	}
	
	option = {
		name = "EVTOPTA_GoPagan_210"
		trigger = {
			NOT = { has_character_flag = event_1000182067 }
		}
	}
}

# Zhayedan 1
narrative_event = {
	id = GoPagan.215 #formerly 1000182157
	title = "EVTNAME_GoPagan_215"
	desc = "EVTDESC_GoPagan_215"
	picture = "GFX_evt_zhayedan"
	border = "GFX_event_narrative_frame_religion"
	
	major = yes
	only_rulers = yes
	is_triggered_only = yes
	
	option = {
		name = "EXCELLENT"
		trigger = {
			has_character_flag = event_1000182157
		}
		clr_character_flag = event_11000182157
	}
	
	option = {
		name = "EVTOPTA_GoPagan_210"
		trigger = {
			NOT = { has_character_flag = event_1000182157 }
		}
	}
}

# Zhayedan 2
narrative_event = {
	id = GoPagan.216 #formerly 1000182158
	title = "EVTNAME_GoPagan_216"
	desc = "EVTDESC_GoPagan_216"
	picture = "GFX_evt_zhayedan"
	border = "GFX_event_narrative_frame_religion"
	
	major = yes
	only_rulers = yes
	is_triggered_only = yes
	
	option = {
		name = "EXCELLENT"
		trigger = {
			has_character_flag = event_1000182158
		}
		clr_character_flag = event_11000182158
	}
	
	option = {
		name = "EVTOPTA_GoPagan_210"
		trigger = {
			NOT = { has_character_flag = event_1000182158 }
		}
	}
}

# Great Sacrifice event
character_event = {
	id = GoPagan.220 #formerly 1000182159
	title = "EVTNAME_GoPagan_220"
	desc = "EVTDESC_GoPagan_220"
	picture = "GFX_evt_sacrifice"
	
	is_triggered_only = yes
	hide_from = yes	
	
	option = {
		name = "EVTOPTA_GoPagan_220" #To Mithra (War)
		scaled_wealth = -0.3
		piety = -30
		add_character_modifier = {
			name = zoroastrian_sacrifice_mithra
			duration = 365
		}
	}
	option = {
		name = "EVTOPTB_GoPagan_220" #To Parendi (Riches)
		scaled_wealth = -0.3
		piety = -30
		add_character_modifier = {
			name = zoroastrian_sacrifice_parendi
			duration = 365
		}
	}
	option = {
		name = "EVTOPTC_GoPagan_220" #To Chisti (Wisdom)
		scaled_wealth = -0.3
		piety = -30
		add_character_modifier = {
			name = zoroastrian_sacrifice_chisti
			duration = 365
		}
	}
	option = {
		name = "EVTOPTD_GoPagan_220" #To none of them
		trigger = {
			ai = no
		}
		hidden_tooltip = {
			clr_character_flag = made_sacrifice_1
		}
	}
}

# Cleansing Ritual event
character_event = {
	id = GoPagan.225 #formerly 1000182160
	title = "EVTNAME_GoPagan_225"
	desc = "EVTDESC_GoPagan_225"
	picture = "GFX_evt_sacrifice"
	
	is_triggered_only = yes
	hide_from = yes	
	
	option = {
		name = "EVTOPTA_GoPagan_225"
		piety = 25
		add_character_modifier = {
			name = zoroastrian_cleansing
			duration = 365
		}
	}
}

