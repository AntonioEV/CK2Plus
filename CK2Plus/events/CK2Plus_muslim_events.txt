namespace = Plus

#reserved: Plus.1900 to Plus.1999

#######################################
# MUSLIM HERESY EVENTS
# Adapted from Heretic Pride by Rylock
#######################################

### ANARCHY AT SAMARRA EVENTS

# Caliphate administration seized from a weak caliph
narrative_event = {
	id = Plus.1900
	title = EVTNAME_Plus_1900
	desc = EVTDESC_Plus_1900
	picture = GFX_evt_throne_room_arabic
	
	major = yes
	hide_from = yes
	show_ROOT = yes
	
	only_playable = yes
	prisoner = no
	only_men = yes
	ai = yes
	
	trigger = {
		has_landed_title = k_sunni
		year = 800
		realm_size = 200
		NOT = {
			diplomacy = 10
			martial = 10
			stewardship = 10
			intrigue = 10
			has_global_flag = anarchy_at_samarra
			k_sunni = { has_title_flag = anarchy_at_samarra_happened }
		}
	}
	
	major_trigger = {
		OR = {
			religion_group = muslim
			capital_scope = {
				ROOT = {
					capital_scope = {
						NOT = {
							distance = {
								where = PREVPREV
								value = 600	# Same part of the world
							}
						}
					}
				}
			}
		}
	}

	mean_time_to_happen = {
		months = 12
		modifier = {
			factor = 0.5
			NOT = {
				diplomacy = 5
				martial = 5
				stewardship = 5
				intrigue = 5
			}
		}
	}
	
	option = {
		name = EVTOPTA_Plus_1900
		trigger = { has_landed_title = k_sunni }
		set_global_flag = anarchy_at_samarra
		k_sunni = { set_title_flag = anarchy_at_samarra_happened }
		add_trait = court_anarchy
		hidden_tooltip = {
			crownlaw_title = { add_law = infighting_0 }
		}
	}
	
	option = {
		name = EVTOPTB_Plus_1900
		trigger = {
			NOT = { has_landed_title = k_sunni }
			religion_group = muslim
		}
		tooltip = {
			ROOT = { add_trait = court_anarchy }
		}
	}
	option = {
		name = EVTOPTC_Plus_1900
		trigger = {
			NOT = { has_landed_title = k_sunni }
			NOT = { religion_group = muslim }
		}
		tooltip = {
			ROOT = { add_trait = court_anarchy }
		}
	}
}
	
# Succeeding caliph remains a prisoner
character_event = {
	id = Plus.1901
	desc = EVTDESC_Plus_1901
	picture = GFX_evt_throne_room_arabic
	
	is_triggered_only = yes
	
	trigger = {
		FROM = { title = k_sunni }
		has_global_flag = anarchy_at_samarra
		NOT = { trait = court_anarchy }
	}

	option = {
		name = EVTOPTA_Plus_1901
		add_trait = court_anarchy
		hidden_tooltip = {
			FROMFROM = { remove_trait = court_anarchy }
		}
	}
}

# Caliph succeeds at restoring order (fired from decision)
narrative_event = {
	id = Plus.1902
	title = EVTNAME_Plus_1902
	desc = EVTDESC_Plus_1902
	picture = GFX_evt_throne_room_arabic

	major = yes
	hide_from = yes
	show_ROOT = yes
	
	is_triggered_only = yes
	
	major_trigger = {
		OR = {
			religion_group = muslim
			capital_scope = {
				ROOT = {
					capital_scope = {
						NOT = {
							distance = {
								where = PREVPREV
								value = 600	# Same part of the world
							}
						}
					}
				}
			}
		}
	}
	
	option = {
		name = EVTOPTA_Plus_1902
		trigger = { has_landed_title = k_sunni }
		clr_global_flag = anarchy_at_samarra
		hidden_tooltip = {
			crownlaw_title = { revoke_law = infighting_0 }
		}
	}
	option = {
		name = EVTOPTB_Plus_1902
		trigger = {
			NOT = { has_landed_title = k_sunni }
			religion_group = muslim
		}
		if = {
			limit = { trait = court_anarchy }
			remove_trait = court_anarchy
		}
	}
	option = {
		name = OK
		trigger = {
			NOT = { has_landed_title = k_sunni }
			NOT = { religion_group = muslim }
		}
	}
}

# A random realm lord will declare independent while the anarchy reigns
character_event = {
	id = Plus.1903

	hide_window = yes
	
	only_playable = yes
	only_men = yes
	
	trigger = {
		has_landed_title = k_sunni
		trait = court_anarchy
		has_global_flag = anarchy_at_samarra
	}
	
	mean_time_to_happen = {
		years = 3
	}

	immediate = {
		random_vassal = {
			limit = {
				war = no
				real_tier = KING
				any_demesne_province = {
					any_neighbor_province = {
						owner = { NOT = { same_realm = ROOT } }
					}
				}
				NOT = {
					dynasty = ROOT
					opinion = { who = ROOT value = 0 }
					has_character_flag = refuse_caliph_breakaway
				}
			}
			character_event = { id = Plus.1904 }
			break = yes
		}
		random_vassal = {
			limit = {
				war = no
				real_tier = KING
				NOT = {
					dynasty = ROOT
					opinion = { who = ROOT value = 0 }
					has_character_flag = refuse_caliph_breakaway
				}
			}
			character_event = { id = Plus.1904 }
			break = yes
		}
		random_vassal = {
			limit = {
				war = no
				higher_tier_than = COUNT
				any_demesne_province = {
					any_neighbor_province = {
						owner = { NOT = { same_realm = ROOT } }
					}
				}
				NOT = {
					dynasty = ROOT
					opinion = { who = ROOT value = 0 }
					has_character_flag = refuse_caliph_breakaway
				}
			}
			character_event = { id = Plus.1904 }
			break = yes
		}
		random_vassal = {
			limit = {
				war = no
				higher_tier_than = COUNT
				NOT = {
					dynasty = ROOT
					opinion = { who = ROOT value = 0 }
					has_character_flag = refuse_caliph_breakaway
				}
			}
			character_event = { id = Plus.1904 }
			break = yes
		}
		random_vassal = {
			limit = {
				war = no
				higher_tier_than = COUNT
				any_demesne_province = {
					any_neighbor_province = {
						owner = { NOT = { same_realm = ROOT } }
					}
				}
				NOT = {
					dynasty = ROOT
					opinion = { who = ROOT value = 50 }
					has_character_flag = refuse_caliph_breakaway
				}
			}
			character_event = { id = Plus.1904 }
			break = yes
		}
		random_vassal = {
			limit = {
				war = no
				higher_tier_than = COUNT
				NOT = {
					dynasty = ROOT
					opinion = { who = ROOT value = 50 }
					has_character_flag = refuse_caliph_breakaway
				}
			}
			character_event = { id = Plus.1904 }
		}
	}
}

# Ruler decides whether or not to break free of the caliph
character_event = {
	id = Plus.1904
	desc = EVTDESC_Plus_1904
	picture = GFX_evt_throne_room
	
	is_triggered_only = yes

	option = {
		name = EVTOPTA_Plus_1904
		ai_chance = {
			factor = 4
		}
		set_defacto_liege = ROOT
		FROM = { character_event = { id = Plus.1905 } }
	}
	option = {
		name = EVTOPTB_Plus_1904
		ai_chance = {
			factor = 1
		}
		set_character_flag = refuse_caliph_breakaway
		piety = 50
	}
}

# Caliph hears of the ruler breaking free
character_event = {
	id = Plus.1905
	desc = EVTDESC_Plus_1905
	picture = GFX_evt_throne_room
	
	is_triggered_only = yes
	
	option = {
		name = CURSES
		opinion = {
			who = FROM
			modifier = opinion_rightful_vassal
			years = 20
		}
	}
}

### KHARIJITE REBELLION

# Kharijite rebels rise up in Mosul during the Anarchy at Samarra
province_event = {
	id = Plus.1906

	hide_window = yes
	
	trigger = {
		province_id = 697
		owner = {
			OR = {
				has_landed_title = k_sunni
				any_liege = { has_landed_title = k_sunni }
			}
		}
		has_global_flag = anarchy_at_samarra
		had_global_flag = { flag = startup days = 730 }
		NOT = { has_province_flag = kharijite_revolt }
	}
	
	mean_time_to_happen = {
		years = 5
		modifier = {
			factor = 0.1
			year = 866
		}
	}
	
	immediate = {	
		set_province_flag = kharijite_revolt
		if = {
			limit = { NOT = { religion = kharijite } }
			religion = kharijite
		}
		
		create_character = {
			random_traits = yes
			dynasty = none
			name = "Musawir"
			religion = kharijite
			culture = ROOT
			female = no
			age = 32
			attributes = {
				martial = 15
				learning = 7
			}
			trait = heresiarch
			trait = zealous
			trait = skilled_tactician
			trait = unyielding_leader
			trait = holy_warrior
		}		

		new_character = {
			set_character_flag = heretic_revolter			
			create_title = {
				tier = DUKE
				landless = yes
				temporary = yes
				rebel = yes
				culture = ROOT
				name = "Kharijite Rebellion"
				holder = THIS
			}			
			spawn_unit = {
				province = ROOT
				home = ROOT
				owner = THIS
				leader = THIS
				scaled_by_biggest_garrison = 2.0
				troops = {
					archers = { 6 6 }
					light_cavalry = { 4 4 }
					light_infantry = { 10 10 }
				}
				attrition = 0
				maintenance_multiplier = 0
			}
			create_character = {
				random_traits = yes
				dynasty = none
				religion = kharijite
				culture = THIS
				female = no
				age = 30
				attributes = {
					martial = 7
				}
				trait = skilled_tactician
				trait = peasant_leader
			}
			new_character = {
				spawn_unit = {
					province = ROOT
					home = ROOT
					owner = PREV
					scaled_by_biggest_garrison = 2.0
					troops = {
						archers = { 6 6 }
						light_cavalry = { 4 4 }
						light_infantry = { 10 10 }
					}
					attrition = 0.0
					disband_on_peace = yes
					maintenance_multiplier = 0
				}
			}
			create_character = {
				random_traits = yes
				dynasty = none
				religion = THIS
				culture = THIS
				female = no
				age = 23
				attributes = {
					martial = 7
				}
				trait = skilled_tactician
				trait = peasant_leader
			}
			new_character = {
				spawn_unit = {
					province = ROOT
					home = ROOT
					owner = PREV
					scaled_by_biggest_garrison = 2.0
					troops = {
						archers = { 6 6 }
						light_cavalry = { 4 4 }
						light_infantry = { 10 10 }
					}
					attrition = 0.0
					disband_on_peace = yes
					maintenance_multiplier = 0
				}
			}
			
			# DoW on the province top liege
			ROOT = {
				owner = {
					top_liege = {
						reverse_war = {
							target = PREVPREVPREV
							casus_belli = heretic_revolt
						}
						reverse_opinion = {
							who = PREVPREVPREV
							modifier = opinion_evil_tyrant
						}
					}
				}
			}
		}
		
		#inform the lieges
		owner = {
			top_liege = {
				character_event = { id = Plus.1907 }
			}
		}
	}
}

# Rulers informed of the kharajite uprising
character_event = {
	id = Plus.1907
	desc = EVTDESC_Plus_1907
	picture = GFX_evt_heretic
	border = GFX_event_normal_frame_war
	
	is_triggered_only = yes
	
	major = yes
	
	major_trigger = {
		OR = {
			same_realm = ROOT
			capital_scope = {
				ROOT = {
					capital_scope = {
						NOT = {
							distance = {
								where = PREVPREV
								value = 600	# Same part of the world
							}
						}
					}
				}
			}
		}
	}
	
	option = {
		name = EVTOPTA_Plus_1907
		trigger = {
			NOT = { religion = sunni }
		}
	}
	option = {
		name = EVTOPTB_Plus_1907
		trigger = {
			religion = sunni
		}
	}
}

### ADDITIONAL DECADENCE EVENTS

# Rulers of a very large empire may gain decadence
character_event = {
	id = Plus.1910
	desc = EVTDESC_Plus_1910
	picture = GFX_evt_sultan
	
	only_men = yes
	only_independent = yes
	
	trigger = {
		religion_group = muslim
		realm_size = 150
		any_dynasty_member = { is_alive = yes count = 3 } # Does not trigger for tiny dynasties
		OR = {
			NOT = { has_character_flag = decadence_change_empire }
			had_character_flag = { flag = decadence_change_empire days = 3650 }
		}
	}
	
	mean_time_to_happen = {
		months = 240
		modifier = {
			factor = 0.8
			realm_size = 175
		}
		modifier = {
			factor = 0.8
			realm_size = 200
		}
		modifier = {
			factor = 0.8
			realm_size = 225
		}
		modifier = {
			factor = 0.8
			realm_size = 250
		}
		modifier = {
			factor = 0.8
			realm_size = 275
		}
		modifier = {
			factor = 0.8
			realm_size = 300
		}
		modifier = {
			factor = 1.2
			decadence = 50
		}
		modifier = {
			factor = 1.2
			decadence = 60
		}
		modifier = {
			factor = 1.2
			decadence = 70
		}
		modifier = {
			factor = 1.2
			decadence = 80
		}
		modifier = {
			factor = 1.2
			decadence = 90
		}
		modifier = {
			factor = 0.75
			trait = decadent
		}
	}

	option = {
		name = EVTOPTA_Plus_1910
		trigger = { NOT = { trait = decadent } }
		set_character_flag = decadence_change_empire
		decadence = 5
	}
	option = {
		name = EVTOPTB_Plus_1910
		trigger = { trait = decadent }
		set_character_flag = decadence_change_empire
		decadence = 5
	}
}

# Provinces under the ruler of a very decadent dynasty may gain unrest
province_event = {
	id = Plus.1911

	hide_window = yes
	
	trigger = {
		owner = {
			top_liege = {
				religion_group = muslim
				religion_group = ROOT
				decadence = 50
				OR = {
					NOT = { has_character_flag = decadence_unrest_event }
					had_character_flag = { flag = decadence_unrest_event days = 730 }
				}
			}
		}
		OR = {
			NOT = { has_province_flag = crushed_decadence_unrest }
			had_province_flag = { flag = crushed_decadence_unrest days = 3650 }
		}
		NOT = { has_province_modifier = decadence_unrest }
	}
	
	mean_time_to_happen = {
		months = 1200
		modifier = {
			factor = 0.75
			owner = { top_liege = { decadence = 60 } }
		}
		modifier = {
			factor = 0.75
			owner = { top_liege = { decadence = 70 } }
		}
		modifier = {
			factor = 0.75
			owner = { top_liege = { decadence = 80 } }
		}
		modifier = {
			factor = 0.75
			owner = { top_liege = { decadence = 90 } }
		}
		modifier = {
			factor = 1.5
			owner = {
				top_liege = {
					any_realm_province = {
						has_province_modifier = decadence_unrest
						count = 5
					}
				}
			}
		}
		modifier = {
			factor = 2.0
			owner = {
				top_liege = {
					any_realm_province = {
						has_province_modifier = decadence_unrest
						count = 10
					}
				}
			}
		}
	}
	
	immediate = {
		owner = {
			top_liege = {
				set_character_flag = decadence_unrest_event
				character_event = { id = Plus.1912 }
			}
		}
	}
}

character_event = {
	id = Plus.1912
	desc = EVTDESC_Plus_1912
	picture = GFX_evt_imam
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_Plus_1912 #Ignore it
		ai_chance = {
			factor = 50
			modifier = {
				factor = 0.5
				trait = cruel
			}
			modifier = {
				factor = 0.5
				trait = diligent
			}
			modifier = {
				factor = 0.5
				trait = paranoid
			}
			modifier = {
				factor = 0.5
				trait = zealous
			}
		}
		FROM = {
			add_province_modifier = {
				name = decadence_unrest
				duration = 1825
			}
		}
	}
	option = {
		name = EVTOPTB_Plus_1912 #Deal harshly with those responsible
		ai_chance = {
			factor = 50
			modifier = {
				factor = 0.5
				trait = kind
			}
			modifier = {
				factor = 0.5
				trait = slothful
			}
			modifier = {
				factor = 0.5
				trait = trusting
			}
			modifier = {
				factor = 0.5
				trait = cynical
			}
			modifier = {
				factor = 0.25
				trait = decadent
			}
			modifier = {
				factor = 0
				OR = {
					trait = tyrant10
					trait = tyrant11
					trait = tyrant12
					trait = tyrant13
					trait = tyrant14
					trait = tyrant15
					trait = tyrant16
					trait = tyrant17
					trait = tyrant18
					trait = tyrant19
					trait = tyrant20
				}
			}
		}
		FROM = { set_province_flag = crushed_decadence_unrest }
		if = {
			limit = {
				trait = tyrant19
			}
			remove_trait = tyrant19
			add_trait = tyrant20
		}
		if = {
			limit = {
				trait = tyrant18
			}
			remove_trait = tyrant18
			add_trait = tyrant19
		}
		if = {
			limit = {
				trait = tyrant17
			}
			remove_trait = tyrant17
			add_trait = tyrant18
		}
		if = {
			limit = {
				trait = tyrant16
			}
			remove_trait = tyrant16
			add_trait = tyrant17
		}
		if = {
			limit = {
				trait = tyrant15
			}
			remove_trait = tyrant15
			add_trait = tyrant16
		}
		if = {
			limit = {
				trait = tyrant14
			}
			remove_trait = tyrant14
			add_trait = tyrant15
		}
		if = {
			limit = {
				trait = tyrant13
			}
			remove_trait = tyrant13
			add_trait = tyrant14
		}
		if = {
			limit = {
				trait = tyrant12
			}
			remove_trait = tyrant12
			add_trait = tyrant13
		}
		if = {
			limit = {
				trait = tyrant11
			}
			remove_trait = tyrant11
			add_trait = tyrant12
		}
		if = {
			limit = {
				trait = tyrant10
			}
			remove_trait = tyrant10
			add_trait = tyrant11
		}
		if = {
			limit = {
				trait = tyrant9
			}
			remove_trait = tyrant9
			add_trait = tyrant10
		}
		if = {
			limit = {
				trait = tyrant8
			}
			remove_trait = tyrant8
			add_trait = tyrant9
		}
		if = {
			limit = {
				trait = tyrant7
			}
			remove_trait = tyrant7
			add_trait = tyrant8
		}
		if = {
			limit = {
				trait = tyrant6
			}
			remove_trait = tyrant6
			add_trait = tyrant7
		}
		if = {
			limit = {
				trait = tyrant5
			}
			remove_trait = tyrant5
			add_trait = tyrant6
		}
		if = {
			limit = {
				trait = tyrant4
			}
			remove_trait = tyrant4
			add_trait = tyrant5
		}
		if = {
			limit = {
				trait = tyrant3
			}
			remove_trait = tyrant3
			add_trait = tyrant4
		}
		if = {
			limit = {
				trait = tyrant2
			}
			remove_trait = tyrant2
			add_trait = tyrant3
		}
		if = {
			limit = {
				trait = tyrant1
			}
			remove_trait = tyrant1
			add_trait = tyrant2
		}
		if = {
			limit = {
				NOT = {
					trait = tyrant1
					trait = tyrant2
					trait = tyrant3
					trait = tyrant4
					trait = tyrant5
					trait = tyrant6
					trait = tyrant7
					trait = tyrant8
					trait = tyrant9
					trait = tyrant10
					trait = tyrant11
					trait = tyrant12
					trait = tyrant13
					trait = tyrant14
					trait = tyrant15
					trait = tyrant16
					trait = tyrant17
					trait = tyrant18
					trait = tyrant19
					trait = tyrant20
				}
			}
			add_trait = tyrant1
		}
	}
}	

# Province with decadence unrest calms down if decadence is reduced
province_event = {
	id = Plus.1913
	
	hide_window = yes
	
	trigger = {
		has_province_modifier = decadence_unrest
		NOT = {
			owner = {
				top_liege = {
					religion_group = muslim
					religion_group = ROOT
					decadence = 50
				}
			}
		}
	}
	
	mean_time_to_happen = {
		months = 12
	}
	
	immediate = {
		remove_province_modifier = decadence_unrest
	}
}

### KHARIJITE EVENTS

# Liege declares a subject as kafir (triggered via decision)
letter_event = {
	id = Plus.1915
	desc = EVTDESC_Plus_1915
	
	is_triggered_only = yes

	option = {
		name = EVTOPTA_Plus_1915
		add_trait = kharijite_kafir
		if = {
			limit = { dynasty_head = { character = ROOT } }
			decadence = 10
		}
	}
}

# Vassal declares a liege as kafir (triggered via decision)
letter_event = {
	id = Plus.1916
	desc = EVTDESC_Plus_1916
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_Plus_1915
		add_trait = kharijite_kafir
		if = {
			limit = { dynasty_head = { character = ROOT } }
			decadence = 10
		}
	}
}

# Public execution (triggered via decision)
long_character_event = {
	id = Plus.1917
	picture = GFX_evt_beheading
	border = GFX_event_long_frame_religion
	
	desc = {
		text = EVTDESC_Plus_1917_family
		trigger = {
			ROOT = {
				OR = {
					sibling = FROM
					is_father = FROM
					is_mother = FROM
					is_child_of = FROM
				}
			}
		}
	}
	desc = {
		text = EVTDESC_Plus_1917_spouse
		trigger = {
			ROOT = {
				is_married = FROM
				NOT = {
					sibling = FROM
					is_father = FROM
					is_mother = FROM
					is_child_of = FROM
				}
			}
		}
	}
	desc = {
		text = EVTDESC_Plus_1917_dynasty
		trigger = {
			ROOT = {
				dynasty = FROM
				NOT = {
					is_married = FROM
					sibling = FROM
					is_father = FROM
					is_mother = FROM
					is_child_of = FROM
				}
			}
		}
	}
	desc = {
		text = EVTDESC_Plus_1917_saoshyant
		trigger = {
			ROOT = {
				OR = {
					trait = saoshyant
					trait = saoshyant_descendant
				}
				NOT = {
					dynasty = FROM
					is_married = FROM
					sibling = FROM
					is_father = FROM
					is_mother = FROM
					is_child_of = FROM
				}
			}
		}
	}
	desc = {
		text = EVTDESC_Plus_1917_pope
		trigger = {
			ROOT = {
				has_landed_title = k_papal_state
				NOT = {
					dynasty = FROM
					is_married = FROM
					sibling = FROM
					is_father = FROM
					is_mother = FROM
					is_child_of = FROM
					trait = saoshyant
					trait = saoshyant_descendant
				}
			}
		}
	}
	desc = {
		text = EVTDESC_Plus_1917_patriarch
		trigger = {
			ROOT = {
				has_landed_title = k_orthodox
				NOT = {
					dynasty = FROM
					is_married = FROM
					sibling = FROM
					is_father = FROM
					is_mother = FROM
					is_child_of = FROM
					trait = saoshyant
					trait = saoshyant_descendant
					has_landed_title = k_papal_state
				}
			}
		}
	}
	desc = {
		text = EVTDESC_Plus_1917_caliph
		trigger = {
			ROOT = {
				controls_religion = yes
				religion_group = muslim
				NOT = {
					religion = ROOT
					dynasty = FROM
					is_married = FROM
					sibling = FROM
					is_father = FROM
					is_mother = FROM
					is_child_of = FROM
					trait = saoshyant
					trait = saoshyant_descendant
					has_landed_title = k_papal_state
					has_landed_title = k_orthodox
				}
			}
		}
	}
	desc = {
		text = EVTDESC_Plus_1917_jewish_head
		trigger = {
			ROOT = {
				controls_religion = yes
				religion_group = jewish_group
				NOT = {
					dynasty = FROM
					is_married = FROM
					sibling = FROM
					is_father = FROM
					is_mother = FROM
					is_child_of = FROM
					trait = saoshyant
					trait = saoshyant_descendant
					has_landed_title = k_papal_state
					has_landed_title = k_orthodox
					AND = {
						controls_religion = yes
						religion_group = muslim
					}
				}
			}
		}
	}
	desc = {
		text = EVTDESC_Plus_1917_zoro_head
		trigger = {
			ROOT = {
				controls_religion = yes
				religion_group = zoroastrian_group
				NOT = {
					dynasty = FROM
					is_married = FROM
					sibling = FROM
					is_father = FROM
					is_mother = FROM
					is_child_of = FROM
					trait = saoshyant
					trait = saoshyant_descendant
					has_landed_title = k_papal_state
					has_landed_title = k_orthodox
					AND = {
						controls_religion = yes
						religion_group = muslim
					}
					AND = {
						controls_religion = yes
						religion_group = jewish_group
					}
				}
			}
		}
	}
	desc = {
		text = EVTDESC_Plus_1917_king_israel
		trigger = {
			ROOT = {
				has_landed_title = k_israel
				NOT = {
					dynasty = FROM
					is_married = FROM
					sibling = FROM
					is_father = FROM
					is_mother = FROM
					is_child_of = FROM
					trait = saoshyant
					trait = saoshyant_descendant
					has_landed_title = k_papal_state
					has_landed_title = k_orthodox
					AND = {
						controls_religion = yes
						religion_group = muslim
					}
					AND = {
						controls_religion = yes
						religion_group = jewish_group
					}
					AND = {
						controls_religion = yes
						religion_group = zoroastrian_group
					}
				}
			}
		}
	}	
	desc = {
		text = EVTDESC_Plus_1917_emperor
		trigger = {
			ROOT = {
				real_tier = EMPEROR
				NOT = {
					dynasty = FROM
					is_married = FROM
					sibling = FROM
					is_father = FROM
					is_mother = FROM
					is_child_of = FROM
					trait = saoshyant
					trait = saoshyant_descendant
					has_landed_title = k_papal_state
					has_landed_title = k_orthodox
					has_landed_title = k_israel
					AND = {
						controls_religion = yes
						religion_group = muslim
					}
					AND = {
						controls_religion = yes
						religion_group = jewish_group
					}
					AND = {
						controls_religion = yes
						religion_group = zoroastrian_group
					}
				}
			}
		}
	}
	desc = {
		text = EVTDESC_Plus_1917_christian_head
		trigger = {
			ROOT = {
				controls_religion = yes
				religion_group = christian
				NOT = {
					dynasty = FROM
					is_married = FROM
					sibling = FROM
					is_father = FROM
					is_mother = FROM
					is_child_of = FROM
					trait = saoshyant
					trait = saoshyant_descendant
					has_landed_title = k_papal_state
					has_landed_title = k_orthodox
					has_landed_title = k_israel
					higher_real_tier_than = KING
					AND = {
						controls_religion = yes
						religion_group = muslim
					}
					AND = {
						controls_religion = yes
						religion_group = jewish_group
					}
					AND = {
						controls_religion = yes
						religion_group = zoroastrian_group
					}
				}
			}
		}
	}
	desc = {
		text = EVTDESC_Plus_1917_pagan_head
		trigger = {
			ROOT = {
				controls_religion = yes
				religion_group = pagan_group
				NOT = {
					dynasty = FROM
					is_married = FROM
					sibling = FROM
					is_father = FROM
					is_mother = FROM
					is_child_of = FROM
					trait = saoshyant
					trait = saoshyant_descendant
					has_landed_title = k_papal_state
					has_landed_title = k_orthodox
					has_landed_title = k_israel
					higher_real_tier_than = KING
					AND = {
						controls_religion = yes
						religion_group = muslim
					}
					AND = {
						controls_religion = yes
						religion_group = jewish_group
					}
					AND = {
						controls_religion = yes
						religion_group = zoroastrian_group
					}
					AND = {
						controls_religion = yes
						religion_group = christian
					}
				}
			}
		}
	}
	desc = {
		text = EVTDESC_Plus_1917_king
		trigger = {
			ROOT = {
				real_tier = KING
				NOT = {
					dynasty = FROM
					is_married = FROM
					sibling = FROM
					is_father = FROM
					is_mother = FROM
					is_child_of = FROM
					trait = saoshyant
					trait = saoshyant_descendant
					has_landed_title = k_papal_state
					has_landed_title = k_orthodox
					has_landed_title = k_israel
					higher_real_tier_than = KING
					AND = {
						controls_religion = yes
						religion_group = muslim
					}
					AND = {
						controls_religion = yes
						religion_group = jewish_group
					}
					AND = {
						controls_religion = yes
						religion_group = zoroastrian_group
					}
					AND = {
						controls_religion = yes
						religion_group = christian
					}
					AND = {
						controls_religion = yes
						religion_group = pagan_group
					}
				}
			}
		}
	}
	desc = {
		text = EVTDESC_Plus_1917_crusader
		trigger = {
			ROOT = {
				trait = crusader
				NOT = {
					dynasty = FROM
					is_married = FROM
					sibling = FROM
					is_father = FROM
					is_mother = FROM
					is_child_of = FROM
					trait = saoshyant
					trait = saoshyant_descendant
					has_landed_title = k_papal_state
					has_landed_title = k_orthodox
					has_landed_title = k_israel
					higher_real_tier_than = DUKE
					AND = {
						controls_religion = yes
						religion_group = muslim
					}
					AND = {
						controls_religion = yes
						religion_group = jewish_group
					}
					AND = {
						controls_religion = yes
						religion_group = zoroastrian_group
					}
					AND = {
						controls_religion = yes
						religion_group = christian
					}
					AND = {
						controls_religion = yes
						religion_group = pagan_group
					}
				}
			}
		}
	}
	desc = {
		text = EVTDESC_Plus_1917_sayyid
		trigger = {
			ROOT = {
				trait = sayyid
				NOT = {
					dynasty = FROM
					is_married = FROM
					sibling = FROM
					is_father = FROM
					is_mother = FROM
					is_child_of = FROM
					trait = saoshyant
					trait = saoshyant_descendant
					has_landed_title = k_papal_state
					has_landed_title = k_orthodox
					has_landed_title = k_israel
					higher_real_tier_than = DUKE
					trait = crusader
					AND = {
						controls_religion = yes
						religion_group = muslim
					}
					AND = {
						controls_religion = yes
						religion_group = jewish_group
					}
					AND = {
						controls_religion = yes
						religion_group = zoroastrian_group
					}
					AND = {
						controls_religion = yes
						religion_group = christian
					}
					AND = {
						controls_religion = yes
						religion_group = pagan_group
					}
				}
			}
		}
	}
	desc = {
		text = EVTDESC_Plus_1917_duke
		trigger = {
			ROOT = {
				real_tier = DUKE
				NOT = {
					dynasty = FROM
					is_married = FROM
					sibling = FROM
					is_father = FROM
					is_mother = FROM
					is_child_of = FROM
					trait = saoshyant
					trait = saoshyant_descendant
					has_landed_title = k_papal_state
					has_landed_title = k_orthodox
					has_landed_title = k_israel
					higher_real_tier_than = DUKE
					trait = crusader
					trait = sayyid
					AND = {
						controls_religion = yes
						religion_group = muslim
					}
					AND = {
						controls_religion = yes
						religion_group = jewish_group
					}
					AND = {
						controls_religion = yes
						religion_group = zoroastrian_group
					}
					AND = {
						controls_religion = yes
						religion_group = christian
					}
					AND = {
						controls_religion = yes
						religion_group = pagan_group
					}
				}
			}
		}
	}
	desc = {
		text = EVTDESC_Plus_1917_kafir
		trigger = {
			ROOT = {
				trait = kharijite_kafir
				NOT = {
					dynasty = FROM
					is_married = FROM
					sibling = FROM
					is_father = FROM
					is_mother = FROM
					is_child_of = FROM
					trait = saoshyant
					trait = saoshyant_descendant
					has_landed_title = k_papal_state
					has_landed_title = k_orthodox
					has_landed_title = k_israel
					higher_real_tier_than = COUNT
					trait = crusader
					trait = sayyid
					AND = {
						controls_religion = yes
						religion_group = muslim
					}
					AND = {
						controls_religion = yes
						religion_group = jewish_group
					}
					AND = {
						controls_religion = yes
						religion_group = zoroastrian_group
					}
					AND = {
						controls_religion = yes
						religion_group = christian
					}
					AND = {
						controls_religion = yes
						religion_group = pagan_group
					}
				}
			}
		}
	}
	desc = {
		text = EVTDESC_Plus_1917_pirate
		trigger = {
			ROOT = {
				trait = viking
				NOT = {
					dynasty = FROM
					is_married = FROM
					sibling = FROM
					is_father = FROM
					is_mother = FROM
					is_child_of = FROM
					trait = saoshyant
					trait = saoshyant_descendant
					has_landed_title = k_papal_state
					has_landed_title = k_orthodox
					has_landed_title = k_israel
					higher_real_tier_than = COUNT
					trait = crusader
					trait = sayyid
					trait = kharijite_kafir
					AND = {
						controls_religion = yes
						religion_group = muslim
					}
					AND = {
						controls_religion = yes
						religion_group = jewish_group
					}
					AND = {
						controls_religion = yes
						religion_group = zoroastrian_group
					}
					AND = {
						controls_religion = yes
						religion_group = christian
					}
					AND = {
						controls_religion = yes
						religion_group = pagan_group
					}
				}
			}
		}
	}
	desc = {
		text = EVTDESC_Plus_1917_genius
		trigger = {
			ROOT = {
				trait = genius
				NOT = {
					dynasty = FROM
					is_married = FROM
					sibling = FROM
					is_father = FROM
					is_mother = FROM
					is_child_of = FROM
					trait = saoshyant
					trait = saoshyant_descendant
					has_landed_title = k_papal_state
					has_landed_title = k_orthodox
					has_landed_title = k_israel
					higher_real_tier_than = COUNT
					trait = crusader
					trait = sayyid
					trait = kharijite_kafir
					trait = viking
					AND = {
						controls_religion = yes
						religion_group = muslim
					}
					AND = {
						controls_religion = yes
						religion_group = jewish_group
					}
					AND = {
						controls_religion = yes
						religion_group = zoroastrian_group
					}
					AND = {
						controls_religion = yes
						religion_group = christian
					}
					AND = {
						controls_religion = yes
						religion_group = pagan_group
					}
				}
			}
		}
	}
	desc = {
		text = EVTDESC_Plus_1917_imbecile
		trigger = {
			ROOT = {
				trait = imbecile
				NOT = {
					dynasty = FROM
					is_married = FROM
					sibling = FROM
					is_father = FROM
					is_mother = FROM
					is_child_of = FROM
					trait = saoshyant
					trait = saoshyant_descendant
					has_landed_title = k_papal_state
					has_landed_title = k_orthodox
					has_landed_title = k_israel
					higher_real_tier_than = COUNT
					trait = crusader
					trait = sayyid
					trait = kharijite_kafir
					trait = viking
					trait = genius
					AND = {
						controls_religion = yes
						religion_group = muslim
					}
					AND = {
						controls_religion = yes
						religion_group = jewish_group
					}
					AND = {
						controls_religion = yes
						religion_group = zoroastrian_group
					}
					AND = {
						controls_religion = yes
						religion_group = christian
					}
					AND = {
						controls_religion = yes
						religion_group = pagan_group
					}
				}
			}
		}
	}
	desc = {
		text = EVTDESC_Plus_1917_count
		trigger = {
			ROOT = {
				real_tier = COUNT
				NOT = {
					dynasty = FROM
					is_married = FROM
					sibling = FROM
					is_father = FROM
					is_mother = FROM
					is_child_of = FROM
					trait = saoshyant
					trait = saoshyant_descendant
					has_landed_title = k_papal_state
					has_landed_title = k_orthodox
					has_landed_title = k_israel
					higher_real_tier_than = COUNT
					trait = crusader
					trait = sayyid
					trait = kharijite_kafir
					trait = viking
					trait = genius
					trait = imbecile
					AND = {
						controls_religion = yes
						religion_group = muslim
					}
					AND = {
						controls_religion = yes
						religion_group = jewish_group
					}
					AND = {
						controls_religion = yes
						religion_group = zoroastrian_group
					}
					AND = {
						controls_religion = yes
						religion_group = christian
					}
					AND = {
						controls_religion = yes
						religion_group = pagan_group
					}
				}
			}
		}
	}
	desc = {
		text = EVTDESC_Plus_1917_generic
		trigger = {
			ROOT = {
				NOT = {
					dynasty = FROM
					is_married = FROM
					sibling = FROM
					is_father = FROM
					is_mother = FROM
					is_child_of = FROM
					trait = saoshyant
					trait = saoshyant_descendant
					has_landed_title = k_papal_state
					has_landed_title = k_orthodox
					has_landed_title = k_israel
					higher_real_tier_than = BARON
					trait = crusader
					trait = sayyid
					trait = kharijite_kafir
					trait = viking
					trait = genius
					trait = imbecile
					AND = {
						controls_religion = yes
						religion_group = muslim
					}
					AND = {
						controls_religion = yes
						religion_group = jewish_group
					}
					AND = {
						controls_religion = yes
						religion_group = zoroastrian_group
					}
					AND = {
						controls_religion = yes
						religion_group = christian
					}
					AND = {
						controls_religion = yes
						religion_group = pagan_group
					}
				}
			}
		}
	}	
	
	is_triggered_only = yes
	major = yes
	
	major_trigger = {
		OR = {
			character = ROOT
			character = FROM
			is_liege_or_above = ROOT
			is_liege_or_above = FROM
			dynasty = ROOT
			is_close_relative = ROOT
		}
	}
	
	option = {
		name = EVTOPTA_Plus_1917_family
		trigger = {
			character = FROM
			ROOT = {
				OR = {
					sibling = FROM
					is_father = FROM
					is_mother = FROM
					is_child_of = FROM
				}
			}
		}
		ROOT = {
			death = {
				death_reason = death_execution
				killer = FROM
			}
		}
		prestige = -50
		piety = 100
	}
	option = {
		name = EVTOPTA_Plus_1917_spouse
		trigger = {
			character = FROM
			ROOT = {
				is_married = FROM
				NOT = {
					sibling = FROM
					is_father = FROM
					is_mother = FROM
					is_child_of = FROM
				}
			}
		}
		ROOT = {
			death = {
				death_reason = death_execution
				killer = FROM
			}
		}
		prestige = -25
		piety = 50
	}
	option = {
		name = EVTOPTA_Plus_1917_dynasty
		trigger = {
			character = FROM
			ROOT = {
				dynasty = FROM
				NOT = {
					sibling = FROM
					is_father = FROM
					is_mother = FROM
					is_child_of = FROM
					is_married = FROM
				}
			}
		}
		ROOT = {
			death = {
				death_reason = death_execution
				killer = FROM
			}
		}
		prestige = -25
		piety = 25
	}
	option = {
		name = EVTOPTA_Plus_1917_saoshyant
		trigger = {
			character = FROM
			ROOT = {
				OR = {
					trait = saoshyant
					trait = saoshyant_descendant
				}
				NOT = {
					sibling = FROM
					is_father = FROM
					is_mother = FROM
					is_child_of = FROM
					is_married = FROM
					dynasty = FROM
				}
			}
		}
		ROOT = {
			death = {
				death_reason = death_execution
				killer = FROM
			}
		}
		prestige = 100
		piety = 1000
	}
	option = {
		name = EVTOPTA_Plus_1917_pope
		trigger = {
			character = FROM
			ROOT = {
				has_landed_title = k_papal_state
				NOT = {
					sibling = FROM
					is_father = FROM
					is_mother = FROM
					is_child_of = FROM
					is_married = FROM
					dynasty = FROM
					trait = saoshyant
					trait = saoshyant_descendant
				}
			}
		}
		ROOT = {
			death = {
				death_reason = death_execution
				killer = FROM
			}
		}
		prestige = 50
		piety = 500
	}
	option = {
		name = EVTOPTA_Plus_1917_patriarch
		trigger = {
			character = FROM
			ROOT = {
				has_landed_title = k_orthodox
				NOT = {
					sibling = FROM
					is_father = FROM
					is_mother = FROM
					is_child_of = FROM
					is_married = FROM
					dynasty = FROM
					trait = saoshyant
					trait = saoshyant_descendant
					has_landed_title = k_papal_state
				}
			}
		}
		ROOT = {
			death = {
				death_reason = death_execution
				killer = FROM
			}
		}
		prestige = 50
		piety = 500
	}
	option = {
		name = EVTOPTA_Plus_1917_caliph
		trigger = {
			character = FROM
			ROOT = {
				controls_religion = yes
				religion_group = muslim
				NOT = {
					religion = ROOT
					sibling = FROM
					is_father = FROM
					is_mother = FROM
					is_child_of = FROM
					is_married = FROM
					dynasty = FROM
					trait = saoshyant
					trait = saoshyant_descendant
					has_landed_title = k_papal_state
					has_landed_title = k_orthodox
				}
			}
		}
		ROOT = {
			death = {
				death_reason = death_execution
				killer = FROM
			}
		}
		prestige = 50
		piety = 500
	}
	option = {
		name = EVTOPTA_Plus_1917_jewish_head
		trigger = {
			character = FROM
			ROOT = {
				controls_religion = yes
				religion_group = jewish_group
				NOT = {
					sibling = FROM
					is_father = FROM
					is_mother = FROM
					is_child_of = FROM
					is_married = FROM
					dynasty = FROM
					trait = saoshyant
					trait = saoshyant_descendant
					has_landed_title = k_papal_state
					has_landed_title = k_orthodox
					AND = {
						controls_religion = yes
						religion_group = muslim
					}
				}
			}
		}
		ROOT = {
			death = {
				death_reason = death_execution
				killer = FROM
			}
		}
		prestige = 50
		piety = 500
	}
	option = {
		name = EVTOPTA_Plus_1917_zoro_head
		trigger = {
			character = FROM
			ROOT = {
				controls_religion = yes
				religion_group = zoroastrian_group
				NOT = {
					sibling = FROM
					is_father = FROM
					is_mother = FROM
					is_child_of = FROM
					is_married = FROM
					dynasty = FROM
					trait = saoshyant
					trait = saoshyant_descendant
					has_landed_title = k_papal_state
					has_landed_title = k_orthodox
					AND = {
						controls_religion = yes
						religion_group = muslim
					}
					AND = {
						controls_religion = yes
						religion_group = jewish_group
					}
				}
			}
		}
		ROOT = {
			death = {
				death_reason = death_execution
				killer = FROM
			}
		}
		prestige = 50
		piety = 500
	}
	option = {
		name = EVTOPTA_Plus_1917_king_israel
		trigger = {
			character = FROM
			ROOT = {
				has_landed_title = k_israel
				NOT = {
					sibling = FROM
					is_father = FROM
					is_mother = FROM
					is_child_of = FROM
					is_married = FROM
					dynasty = FROM
					trait = saoshyant
					trait = saoshyant_descendant
					has_landed_title = k_papal_state
					has_landed_title = k_orthodox
					AND = {
						controls_religion = yes
						religion_group = muslim
					}
					AND = {
						controls_religion = yes
						religion_group = jewish_group
					}
					AND = {
						controls_religion = yes
						religion_group = zoroastrian_group
					}
				}
			}
		}
		ROOT = {
			death = {
				death_reason = death_execution
				killer = FROM
			}
		}
		prestige = 50
		piety = 500
	}	
	option = {
		name = EVTOPTA_Plus_1917_emperor
		trigger = {
			character = FROM
			ROOT = {
				real_tier = EMPEROR
				NOT = {
					sibling = FROM
					is_father = FROM
					is_mother = FROM
					is_child_of = FROM
					is_married = FROM
					dynasty = FROM
					trait = saoshyant
					trait = saoshyant_descendant
					has_landed_title = k_papal_state
					has_landed_title = k_orthodox
					has_landed_title = k_israel
					AND = {
						controls_religion = yes
						religion_group = muslim
					}
					AND = {
						controls_religion = yes
						religion_group = jewish_group
					}
					AND = {
						controls_religion = yes
						religion_group = zoroastrian_group
					}
				}
			}
		}
		ROOT = {
			death = {
				death_reason = death_execution
				killer = FROM
			}
		}
		prestige = 50
		piety = 250
	}
	option = {
		name = EVTOPTA_Plus_1917_christian_head
		trigger = {
			character = FROM
			ROOT = {
				controls_religion = yes
				religion_group = christian
				NOT = {
					sibling = FROM
					is_father = FROM
					is_mother = FROM
					is_child_of = FROM
					is_married = FROM
					dynasty = FROM
					trait = saoshyant
					trait = saoshyant_descendant
					has_landed_title = k_papal_state
					has_landed_title = k_orthodox
					has_landed_title = k_israel
					higher_real_tier_than = KING
					AND = {
						controls_religion = yes
						religion_group = muslim
					}
					AND = {
						controls_religion = yes
						religion_group = jewish_group
					}
					AND = {
						controls_religion = yes
						religion_group = zoroastrian_group
					}
				}
			}
		}
		ROOT = {
			death = {
				death_reason = death_execution
				killer = FROM
			}
		}
		prestige = 50
		piety = 500
	}
	option = {
		name = EVTOPTA_Plus_1917_pagan_head
		trigger = {
			character = FROM
			ROOT = {
				controls_religion = yes
				religion_group = pagan_group
				NOT = {
					sibling = FROM
					is_father = FROM
					is_mother = FROM
					is_child_of = FROM
					is_married = FROM
					dynasty = FROM
					trait = saoshyant
					trait = saoshyant_descendant
					has_landed_title = k_papal_state
					has_landed_title = k_orthodox
					has_landed_title = k_israel
					higher_real_tier_than = KING
					AND = {
						controls_religion = yes
						religion_group = muslim
					}
					AND = {
						controls_religion = yes
						religion_group = jewish_group
					}
					AND = {
						controls_religion = yes
						religion_group = zoroastrian_group
					}
					AND = {
						controls_religion = yes
						religion_group = christian
					}
				}
			}
		}
		ROOT = {
			death = {
				death_reason = death_execution
				killer = FROM
			}
		}
		prestige = 50
		piety = 250
	}
	option = {
		name = EVTOPTA_Plus_1917_king
		trigger = {
			character = FROM
			ROOT = {
				real_tier = KING
				NOT = {
					sibling = FROM
					is_father = FROM
					is_mother = FROM
					is_child_of = FROM
					is_married = FROM
					dynasty = FROM
					trait = saoshyant
					trait = saoshyant_descendant
					has_landed_title = k_papal_state
					has_landed_title = k_orthodox
					has_landed_title = k_israel
					higher_real_tier_than = KING
					AND = {
						controls_religion = yes
						religion_group = muslim
					}
					AND = {
						controls_religion = yes
						religion_group = jewish_group
					}
					AND = {
						controls_religion = yes
						religion_group = zoroastrian_group
					}
					AND = {
						controls_religion = yes
						religion_group = christian
					}
					AND = {
						controls_religion = yes
						religion_group = pagan_group
					}
				}
			}
		}
		ROOT = {
			death = {
				death_reason = death_execution
				killer = FROM
			}
		}
		prestige = 25
		piety = 250
	}
	option = {
		name = EVTOPTA_Plus_1917_crusader
		trigger = {
			character = FROM
			ROOT = {
				trait = crusader
				NOT = {
					sibling = FROM
					is_father = FROM
					is_mother = FROM
					is_child_of = FROM
					is_married = FROM
					dynasty = FROM
					trait = saoshyant
					trait = saoshyant_descendant
					has_landed_title = k_papal_state
					has_landed_title = k_orthodox
					has_landed_title = k_israel
					higher_real_tier_than = DUKE
					AND = {
						controls_religion = yes
						religion_group = muslim
					}
					AND = {
						controls_religion = yes
						religion_group = jewish_group
					}
					AND = {
						controls_religion = yes
						religion_group = zoroastrian_group
					}
					AND = {
						controls_religion = yes
						religion_group = christian
					}
					AND = {
						controls_religion = yes
						religion_group = pagan_group
					}
				}
			}
		}
		ROOT = {
			death = {
				death_reason = death_execution
				killer = FROM
			}
		}
		prestige = 20
		piety = 100
	}
	option = {
		name = EVTOPTA_Plus_1917_sayyid
		trigger = {
			character = FROM
			ROOT = {
				trait = sayyid
				NOT = {
					sibling = FROM
					is_father = FROM
					is_mother = FROM
					is_child_of = FROM
					is_married = FROM
					dynasty = FROM
					trait = saoshyant
					trait = saoshyant_descendant
					trait = crusader
					has_landed_title = k_papal_state
					has_landed_title = k_orthodox
					has_landed_title = k_israel
					higher_real_tier_than = DUKE
					AND = {
						controls_religion = yes
						religion_group = muslim
					}
					AND = {
						controls_religion = yes
						religion_group = jewish_group
					}
					AND = {
						controls_religion = yes
						religion_group = zoroastrian_group
					}
					AND = {
						controls_religion = yes
						religion_group = christian
					}
					AND = {
						controls_religion = yes
						religion_group = pagan_group
					}
				}
			}
		}
		ROOT = {
			death = {
				death_reason = death_execution
				killer = FROM
			}
		}
		prestige = 15
		piety = 100
	}
	option = {
		name = EVTOPTA_Plus_1917_duke
		trigger = {
			character = FROM
			ROOT = {
				real_tier = DUKE
				NOT = {
					sibling = FROM
					is_father = FROM
					is_mother = FROM
					is_child_of = FROM
					is_married = FROM
					dynasty = FROM
					trait = saoshyant
					trait = saoshyant_descendant
					trait = crusader
					trait = sayyid
					has_landed_title = k_papal_state
					has_landed_title = k_orthodox
					has_landed_title = k_israel
					higher_real_tier_than = DUKE
					AND = {
						controls_religion = yes
						religion_group = muslim
					}
					AND = {
						controls_religion = yes
						religion_group = jewish_group
					}
					AND = {
						controls_religion = yes
						religion_group = zoroastrian_group
					}
					AND = {
						controls_religion = yes
						religion_group = christian
					}
					AND = {
						controls_religion = yes
						religion_group = pagan_group
					}
				}
			}
		}
		ROOT = {
			death = {
				death_reason = death_execution
				killer = FROM
			}
		}
		prestige = 15
		piety = 50
	}
	option = {
		name = EVTOPTA_Plus_1917_kafir
		trigger = {
			character = FROM
			ROOT = {
				trait = kharijite_kafir
				NOT = {
					sibling = FROM
					is_father = FROM
					is_mother = FROM
					is_child_of = FROM
					is_married = FROM
					dynasty = FROM
					trait = saoshyant
					trait = saoshyant_descendant
					trait = crusader
					trait = sayyid
					has_landed_title = k_papal_state
					has_landed_title = k_orthodox
					has_landed_title = k_israel
					higher_real_tier_than = COUNT
					AND = {
						controls_religion = yes
						religion_group = muslim
					}
					AND = {
						controls_religion = yes
						religion_group = jewish_group
					}
					AND = {
						controls_religion = yes
						religion_group = zoroastrian_group
					}
					AND = {
						controls_religion = yes
						religion_group = christian
					}
					AND = {
						controls_religion = yes
						religion_group = pagan_group
					}
				}
			}
		}
		ROOT = {
			death = {
				death_reason = death_execution
				killer = FROM
			}
		}
		prestige = 10
		piety = 50
	}
	option = {
		name = EVTOPTA_Plus_1917_pirate
		trigger = {
			character = FROM
			ROOT = {
				trait = viking
				NOT = {
					sibling = FROM
					is_father = FROM
					is_mother = FROM
					is_child_of = FROM
					is_married = FROM
					dynasty = FROM
					trait = saoshyant
					trait = saoshyant_descendant
					trait = crusader
					trait = sayyid
					trait = kharijite_kafir
					has_landed_title = k_papal_state
					has_landed_title = k_orthodox
					has_landed_title = k_israel
					higher_real_tier_than = COUNT
					AND = {
						controls_religion = yes
						religion_group = muslim
					}
					AND = {
						controls_religion = yes
						religion_group = jewish_group
					}
					AND = {
						controls_religion = yes
						religion_group = zoroastrian_group
					}
					AND = {
						controls_religion = yes
						religion_group = christian
					}
					AND = {
						controls_religion = yes
						religion_group = pagan_group
					}
				}
			}
		}
		ROOT = {
			death = {
				death_reason = death_execution
				killer = FROM
			}
		}
		prestige = 10
		piety = 50
	}
	option = {
		name = EVTOPTA_Plus_1917_genius
		trigger = {
			character = FROM
			ROOT = {
				trait = genius
				NOT = {
					sibling = FROM
					is_father = FROM
					is_mother = FROM
					is_child_of = FROM
					is_married = FROM
					dynasty = FROM
					trait = saoshyant
					trait = saoshyant_descendant
					trait = crusader
					trait = sayyid
					trait = kharijite_kafir
					trait = viking
					has_landed_title = k_papal_state
					has_landed_title = k_orthodox
					has_landed_title = k_israel
					higher_real_tier_than = COUNT
					AND = {
						controls_religion = yes
						religion_group = muslim
					}
					AND = {
						controls_religion = yes
						religion_group = jewish_group
					}
					AND = {
						controls_religion = yes
						religion_group = zoroastrian_group
					}
					AND = {
						controls_religion = yes
						religion_group = christian
					}
					AND = {
						controls_religion = yes
						religion_group = pagan_group
					}
				}
			}
		}
		ROOT = {
			death = {
				death_reason = death_execution
				killer = FROM
			}
		}
		prestige = 10
		piety = 25
	}
	option = {
		name = EVTOPTA_Plus_1917_imbecile
		trigger = {
			character = FROM
			ROOT = {
				trait = imbecile
				NOT = {
					sibling = FROM
					is_father = FROM
					is_mother = FROM
					is_child_of = FROM
					is_married = FROM
					dynasty = FROM
					trait = saoshyant
					trait = saoshyant_descendant
					trait = crusader
					trait = sayyid
					trait = kharijite_kafir
					trait = viking
					trait = genius
					has_landed_title = k_papal_state
					has_landed_title = k_orthodox
					has_landed_title = k_israel
					higher_real_tier_than = COUNT
					AND = {
						controls_religion = yes
						religion_group = muslim
					}
					AND = {
						controls_religion = yes
						religion_group = jewish_group
					}
					AND = {
						controls_religion = yes
						religion_group = zoroastrian_group
					}
					AND = {
						controls_religion = yes
						religion_group = christian
					}
					AND = {
						controls_religion = yes
						religion_group = pagan_group
					}
				}
			}
		}
		ROOT = {
			death = {
				death_reason = death_execution
				killer = FROM
			}
		}
		prestige = -50
		piety = 10
	}
	option = {
		name = EVTOPTA_Plus_1917_count
		trigger = {
			character = FROM
			ROOT = {
				real_tier = COUNT
				NOT = {
					sibling = FROM
					is_father = FROM
					is_mother = FROM
					is_child_of = FROM
					is_married = FROM
					dynasty = FROM
					trait = saoshyant
					trait = saoshyant_descendant
					trait = crusader
					trait = sayyid
					trait = kharijite_kafir
					trait = viking
					trait = genius
					trait = imbecile
					has_landed_title = k_papal_state
					has_landed_title = k_orthodox
					has_landed_title = k_israel
					higher_real_tier_than = COUNT
					AND = {
						controls_religion = yes
						religion_group = muslim
					}
					AND = {
						controls_religion = yes
						religion_group = jewish_group
					}
					AND = {
						controls_religion = yes
						religion_group = zoroastrian_group
					}
					AND = {
						controls_religion = yes
						religion_group = christian
					}
					AND = {
						controls_religion = yes
						religion_group = pagan_group
					}
				}
			}
		}
		ROOT = {
			death = {
				death_reason = death_execution
				killer = FROM
			}
		}
		prestige = 10
		piety = 25
	}
	option = {
		name = EVTOPTA_Plus_1917_generic
		trigger = {
			character = FROM
			ROOT = {
				NOT = {
					sibling = FROM
					is_father = FROM
					is_mother = FROM
					is_married = FROM
					is_child_of = FROM
					dynasty = FROM
					trait = saoshyant
					trait = saoshyant_descendant
					trait = crusader
					trait = sayyid
					trait = kharijite_kafir
					trait = viking
					trait = genius
					trait = imbecile
					higher_real_tier_than = BARON
					AND = {
						controls_religion = yes
						OR = {
							religion_group = christian
							religion_group = muslim
							religion_group = jewish_group
							religion_group = zoroastrian_group
							religion_group = pagan_group
						}
					}	
				}
			}
		}
		ROOT = {
			death = {
				death_reason = death_execution
				killer = FROM
			}
		}
		prestige = 10
		piety = 10
	}
	option = {
		name = EVTOPTB_Plus_1917
		trigger = {
			character = ROOT
		}
		tooltip = {
			death = {
				death_reason = death_execution
				killer = FROM
			}
		}
	}
	option = {
		name = EVTOPTC_Plus_1917
		trigger = {
			NOT = {
				character = ROOT
				character = FROM
			}
			OR = {
				is_liege_or_above = ROOT
				dynasty = ROOT
				is_close_relative = ROOT
				NOT = { religion_group = muslim }
			}
		}
		tooltip = {
			ROOT = {
				death = {
					death_reason = death_execution
					killer = FROM
				}
			}
		}
	}
	option = {
		name = EVTOPTD_Plus_1917
		trigger = {
			NOT = {
				character = ROOT
				character = FROM
				is_liege_or_above = ROOT
				dynasty = ROOT
				is_close_relative = ROOT
			}
			religion_group = muslim
		}
		tooltip = {
			ROOT = {
				death = {
					death_reason = death_execution
					killer = FROM
				}
			}
		}
	}
}

# Bounce for execution event
character_event = {
	id = Plus.1918
	
	hide_window = yes
	is_triggered_only = yes
	
	immediate = {
		FROM = {
			long_character_event = { id = Plus.1917 }
		}
	}
}

# Kafir attempts to remove gluttonous
character_event = {
	id = Plus.1920
	desc = EVTDESC_Plus_1920
	picture = GFX_evt_imam
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_Plus_1920
		hidden_tooltip = {
			add_character_modifier = {
				name = do_not_disturb
				hidden = yes
				duration = 10
			}
			character_event = { id = Plus.1921 days = 10 }
		}
	}
}

# Gluttonous removed after fasting completed
character_event = {
	id = Plus.1921
	desc = EVTDESC_Plus_1921
	picture = GFX_evt_imam
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_Plus_1921
		remove_trait = gluttonous
		random_list = {
			10 = {
				modifier = {
					factor = 0
					trait = weak
				}
				modifier = {
					factor = 0.5
					trait = strong
				}
				add_trait = weak
			}
			30 = {
				modifier = {
					factor = 0
					trait = temperate
				}
				add_trait = temperate
			}
			60 = {
				modifier = {
					factor = 1.5
					trait = weak
				}
				modifier = {
					factor = 0.5
					trait = strong
				}
				health = -1
			}
		}
	}
}

# Kafir attempts to remove greedy
character_event = {
	id = Plus.1922
	desc = EVTDESC_Plus_1922
	picture = GFX_evt_imam
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_Plus_1922
		remove_trait = greedy
		random = {
			chance = 25
			modifier = {
				factor = 2
				trait = kind
			}
			modifier = {
				factor = 1.5
				trait = humble
			}
			modifier = {
				factor = 1.5
				trait = content
			}
			modifier = {
				factor = 0.75
				trait = proud
			}
			modifier = {
				factor = 0.75
				trait = ambitious
			}
			modifier = {
				factor = 0.5
				trait = cruel
			}
			modifier = {
				factor = 0.5
				trait = envious
			}
			add_trait = charitable
		}
	}
}

# Kafir attempts to remove slothful
character_event = {
	id = Plus.1923
	desc = EVTDESC_Plus_1923
	picture = GFX_evt_imam
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_Plus_1923
		remove_trait = slothful
		random = {
			chance = 50
			add_trait = stressed
		}
	}
}

# Kafir attempts to remove arbitrary	
character_event = {
	id = Plus.1924
	desc = EVTDESC_Plus_1924
	picture = GFX_evt_imam
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_Plus_1924
		remove_trait = arbitrary
		random_list = {
			50 = { change_stewardship = -1 }
			35 = { change_stewardship = -2 }
			15 = { }
		}
	}
}

# Kafir attempts to remove cynical
character_event = {
	id = Plus.1925
	desc = EVTDESC_Plus_1925
	picture = GFX_evt_imam
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_Plus_1925
		trigger = { NOT = { trait = deceitful } }
		remove_trait = cynical
		random_list = {
			50 = { add_trait = deceitful }
			50 = { add_trait = zealous }
		}
	}
	option = {
		name = EVTOPTB_Plus_1925
		trigger = { trait = deceitful }
		tooltip_info = deceitful
		remove_trait = cynical
	}
}

# Kafir attempts to remove drunkard
character_event = {
	id = Plus.1926
	desc = EVTDESC_Plus_1926
	picture = GFX_evt_imam
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_Plus_1926
		remove_trait = drunkard 
		random_list = {
			50 = {
				modifier = {
					factor = 0
					trait = humble
				}
				add_trait = humble
			}
			10 = { change_diplomacy = 1 }
			10 = { change_martial = 1 }
			10 = { change_intrigue = 1 }
			20 = {
				modifier = {
					factor = 1.5
					trait = weak
				}
				modifier = {
					factor = 0.5
					trait = strong
				}
				health = -1
			}
		}
	}
}

# Kafir attempts to remove hedonist
character_event = {
	id = Plus.1927
	desc = EVTDESC_Plus_1927
	picture = GFX_evt_imam
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_Plus_1926
		remove_trait = hedonist
		random_list = {
			50 = {
				modifier = {
					factor = 0
					trait = humble
				}
				add_trait = humble
			}
			10 = { change_diplomacy = 1 }
			10 = { change_martial = 1 }
			10 = { change_intrigue = 1 }
			20 = { add_trait = chaste }
		}
	}
}

# Kafir attempts to remove decadent
character_event = {
	id = Plus.1928
	desc = EVTDESC_Plus_1928
	picture = GFX_evt_imam
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_Plus_1926
		remove_trait = decadent
		random_list = {
			50 = {
				modifier = {
					factor = 0
					trait = humble
				}
				add_trait = humble
			}
			10 = { change_diplomacy = 1 }
			10 = { change_martial = 1 }
			10 = { change_intrigue = 1 }
			20 = { }
		}
	}
}

# Kafir clears their name
character_event = {
	id = Plus.1929
	desc = EVTDESC_Plus_1929
	picture = GFX_evt_imam
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	major = yes
	
	major_trigger = {
		religion = kharijite
		OR = {
			character = ROOT
			same_realm = ROOT
			dynasty = ROOT
		}
	}
	
	option = {
		name = EVTOPTA_Plus_1929
		trigger = { character = ROOT }
		remove_trait = kharijite_kafir 
		if = {
			limit = { dynasty_head = { character = ROOT } }
			decadence = 10
		}
	}
	option = {
		name = EVTOPTB_Plus_1929
		trigger = { NOT = { character = ROOT } }
		tooltip = { ROOT = { remove_trait = kharijite_kafir } }
	}
}

