decisions = {
	ai_austerity = {
		potential = {
			ai = yes
			is_ruler = yes
			is_playable = yes
			higher_tier_than = BARON
			NOT = {
				has_character_modifier = ai_austerity
				has_character_modifier = ai_austerity_timer
			}
		}
		allow = {
			OR = {
				#has a loan
				check_variable = { which = "loan_amount" value = 49.5 }
				#needs to get crowned
				AND = {
					trait = uncrowned
					is_adult = yes
				}
				#is excommunicated
				AND = {
					OR = {
						NOT = { has_character_flag = ask_for_repentance }
						had_character_flag = { flag = ask_for_repentance days = 1825 }
					}
					rightful_religious_head_scope = {
						ROOT = { excommunicated_for = PREV }
					}
				}
				#any part of the realm is occupied
				any_realm_title = { is_occupied = yes }
				#losing a war
				any_war = {
					OR = {
						attacker = {
							character = ROOT
							NOT = { war_score = -15 }
						}
						defender = {
							character = ROOT
							war_score = 15
						}
					}
				}				
				#king with enough titles to become emperor
				AND = {
					tier = KING
					num_of_king_titles = 3
					realm_size = 150
				}
				#duke with enough titles to become king
				AND = {
					tier = DUKE
					num_of_duke_titles = 3
				}
				#has all the counties in a duchy and can create or usurp it
				any_realm_province = {
					duchy = {
						OR = {
							has_holder = no
							holder_scope = {
								NOT = { character = ROOT }
								NOT = { is_liege_or_above = ROOT }
								NOT = { is_vassal_or_below = ROOT }
							}
						}
						NOT = {
							any_playable_ruler = {
								NOT = { character = ROOT }
								NOT = { is_liege_or_above = ROOT }
								any_demesne_province = {
									duchy = {
										title = PREVPREVPREV
									}
								}
							}
						}
					}
				}
			}
		}
		effect = {
			add_character_modifier = {
				name = ai_austerity
				duration = 3650
				hidden = yes
			}
			add_character_modifier = {
				name = ai_austerity_timer
				duration = 5475
				hidden = yes
			}
		}
		ai_will_do = {
			factor = 1
		}
	}
	
	ai_austerity_end = {
		potential = {
			ai = yes
			is_ruler = yes
			has_character_modifier = ai_austerity
		}
		allow = {
			NOT = {
				#has a loan
				check_variable = { which = "loan_amount" value = 49.5 }
				#needs to get crowned
				AND = {
					trait = uncrowned
					is_adult = yes
				}
				#is excommunicated
				AND = {
					OR = {
						NOT = { has_character_flag = ask_for_repentance }
						had_character_flag = { flag = ask_for_repentance days = 1825 }
					}
					rightful_religious_head_scope = {
						ROOT = { excommunicated_for = PREV }
					}
				}
				#any part of the realm is occupied
				any_realm_title = { is_occupied = yes }
				#losing a war
				any_war = {
					OR = {
						attacker = {
							character = ROOT
							NOT = { war_score = -15 }
						}
						defender = {
							character = ROOT
							war_score = 15
						}
					}
				}				
				#king with enough titles to become emperor
				AND = {
					tier = KING
					num_of_king_titles = 3
					realm_size = 150
				}
				#duke with enough titles to become king
				AND = {
					tier = DUKE
					num_of_duke_titles = 3
				}
				#has all the counties in a duchy and can create or usurp it
				any_realm_province = {
					duchy = {
						OR = {
							has_holder = no
							holder_scope = {
								NOT = { character = ROOT }
								NOT = { is_liege_or_above = ROOT }
								NOT = { is_vassal_or_below = ROOT }
							}
						}
						NOT = {
							any_playable_ruler = {
								NOT = { character = ROOT }
								NOT = { is_liege_or_above = ROOT }
								any_demesne_province = {
									duchy = {
										title = PREVPREVPREV
									}
								}
							}
						}
					}
				}
			}
		}
		effect = {
			remove_character_modifier = ai_austerity
			remove_character_modifier = ai_austerity_timer
		}
		ai_will_do = {
			factor = 1
		}
	}

	ai_maintenance = {
		potential = {
			has_landed_title = k_papal_state
			OR = {
				NOT = { has_global_flag = maintenance_pulse }
				had_global_flag = { flag = maintenance_pulse days = 365 }
			}
		}
		allow = { }
		effect = {
			clr_global_flag = maintenance_pulse
			set_global_flag = maintenance_pulse
			# re-evaluate the contingent territory for each independent nation
			character_event = { id = Plus.307 }
			# remove ai loan variable if now on a player
			any_playable_ruler = {
				limit = {
					ai = no
					check_variable = { which = "loan_amount" value = 0.1 }
				}
				disband_event_forces = yes
				set_variable = { which = "loan_amount" value = 0 }
				hidden_tooltip = { remove_character_modifier = loan_timer }
			}
			# misc fixes
			if = {
				limit = { is_ruler = yes }
				character_event = { id = Plus.349 }
			}
			any_independent_ruler = {
				character_event = { id = Plus.349 }
				any_realm_lord = {
					character_event = { id = Plus.349 }
				}
			}
			# fix for custom designed patricians not having seniority succession on family title
			any_playable_ruler = {
				limit = {
					ai = no
					is_patrician = yes
					any_demesne_title = {
						tier = BARON
						is_patrician = yes
						NOT = { has_law = succ_seniority }
					}
				}
				any_demesne_title = {
					limit = {
						tier = BARON
						is_patrician = yes
						NOT = { has_law = succ_seniority }
					}
					add_law = succ_seniority
				}
			}
			# regular law/title maintenance
			any_playable_ruler = {
				#patrician succession
				any_demesne_title = {
					limit = {
						OR = {
							NOT = { has_law = succ_seniority }
							NOT = { has_law = agnatic_succession }
						}
						holder_scope = { is_patrician = yes }
						OR = {
							is_primary_holder_title_tier = yes
							higher_tier_than = duke
						}
						OR = {
							is_primary_holder_title = no
							holder_scope = { is_merchant_republic = no }
						}
					}
					add_law = succ_seniority
					add_law = agnatic_succession
				}
				#non-patrician succession
				any_demesne_title = {
					limit = {
						holder_scope = { is_patrician = no }
						OR = {
							is_primary_holder_title = yes
							higher_tier_than = duke
						}
					}
					#holy orders, mercenaries, cites, and non-catholic temples
					if = {
						limit = {
							OR = {
								AND = {
									is_landless_type_title = yes
									is_tribal_type_title = no
								}
								holder_scope = {
									is_feudal = no
									is_tribal = no
									OR = {
										is_theocracy = no
										NOT = { religion = catholic }
									}
								}
							}
							NOT = { has_law = succ_open_elective }
						}
						add_law = succ_open_elective
					}
					#catholic temples
					if = {
						limit = {
							OR = {
								is_landless_type_title = no
								is_tribal_type_title = yes
							}
							holder_scope = {
								is_theocracy = yes
								religion = catholic
							}
							NOT = { has_law = succ_catholic_bishopric }
						}
						add_law = succ_catholic_bishopric
					}
					#feudal muslims
					if = {
						limit = {
							OR = {
								is_landless_type_title = no
								is_tribal_type_title = yes
							}
							holder_scope = {
								OR = {
									is_feudal = yes
									is_tribal = yes
								}
								religion_group = muslim
							}
							NOT = { has_law = succ_turkish_succession }
						}
						add_law = succ_turkish_succession
					}
					#feudal/tribal non-reformed pagans
					if = {
						limit = {
							OR = {
								is_landless_type_title = no
								is_tribal_type_title = yes
							}
							holder_scope = {
								OR = {
									is_tribal = yes
									is_feudal = yes
								}
								OR = {
									religion = norse_pagan
									religion = german_pagan
									religion = finnish_pagan
									religion = baltic_pagan
									religion = tengri_pagan
									religion = slavic_pagan
									religion = west_african_pagan
								}
								NOT = { has_global_flag = ancient_religions }
							}
							NOT = { has_law = succ_gavelkind }
							NOT = { has_law = succ_elective_gavelkind }
						}
						add_law = succ_gavelkind
					}
					#feudal non-muslim, non-unreformed pagans
					if = {
						limit = {
							OR = {
								is_landless_type_title = no
								is_tribal_type_title = yes
							}
							holder_scope = {
								OR = {
									is_feudal = yes
									is_tribal = yes
								}
								NOT = {
									religion = norse_pagan
									religion = german_pagan
									religion = finnish_pagan
									religion = baltic_pagan
									religion = tengri_pagan
									religion = slavic_pagan
									religion = west_african_pagan
									religion_group = muslim
								}
							}
							NOT = { has_law = succ_primogeniture }
							NOT = { has_law = succ_gavelkind }
							NOT = { has_law = succ_feudal_elective }
							NOT = { has_law = succ_seniority }
							NOT = { has_law = succ_tanistry }
							NOT = { has_law = succ_ultimogeniture }
							NOT = { has_law = succ_elective_gavelkind }
						}
						add_law = succ_primogeniture
					}
					#catholic investiture
					if = {
						limit = {
							higher_tier_than = DUKE
							holder_scope = {
								religion = catholic
							}
							NOT = { has_law = investiture_law_0 }
							NOT = { has_law = investiture_law_1 }
						}
						add_law = investiture_law_0
					}
					#non-catholic no investiture
					if = {
						limit = {
							higher_tier_than = DUKE
							holder_scope = {
								NOT = { religion = catholic }
							}
							OR = {
								has_law = investiture_law_0
								has_law = investiture_law_1
							}
						}
						revoke_law = investiture_law_0
						revoke_law = investiture_law_1
					}
				}
				#baron vassal succession
				any_vassal = {
					limit = {
						tier = baron
						is_patrician = no
					}
					any_demesne_title = {
						limit = { is_primary_holder_title = yes }
						if = {
							limit = {
								OR = {
									AND = {
										is_landless_type_title = yes
										is_tribal_type_title = no
									}
									holder_scope = {
										is_feudal = no
										is_tribal = no
										OR = {
											is_theocracy = no
											NOT = { religion = catholic }
										}
									}
								}
								NOT = { has_law = succ_open_elective }
							}
							add_law = succ_open_elective
						}
						if = {
							limit = {
								OR = {
									is_landless_type_title = no
									is_tribal_type_title = yes
								}
								holder_scope = {
									is_theocracy = yes
									religion = catholic
								}
								NOT = { has_law = succ_catholic_bishopric }
							}
							add_law = succ_catholic_bishopric
						}
						if = {
							limit = {
								OR = {
									is_landless_type_title = no
									is_tribal_type_title = yes
								}
								holder_scope = {
									OR = {
										is_feudal = yes
										is_tribal = yes
									}
									religion_group = muslim
								}
								NOT = { has_law = succ_turkish_succession }
							}
							add_law = succ_turkish_succession
						}
						if = {
							limit = {
								OR = {
									is_landless_type_title = no
									is_tribal_type_title = yes
								}
								holder_scope = {
									OR = {
										is_feudal = yes
										is_tribal = yes
									}
									OR = {
										religion = norse_pagan
										religion = german_pagan
										religion = tengri_pagan
										religion = baltic_pagan
										religion = finnish_pagan
										religion = slavic_pagan
										religion = west_african_pagan
									}
									NOT = { has_global_flag = ancient_religions }
								}
								NOT = { has_law = succ_gavelkind }
								NOT = { has_law = succ_elective_gavelkind }
							}
							add_law = succ_gavelkind
						}
						if = {
							limit = {
								OR = {
									is_landless_type_title = no
									is_tribal_type_title = yes
								}
								holder_scope = {
									OR = {
										is_feudal = yes
										is_tribal = yes
									}
									NOT = { religion_group = muslim }
									NOT = {
										religion = norse_pagan
										religion = german_pagan
										religion = tengri_pagan
										religion = baltic_pagan
										religion = finnish_pagan
										religion = slavic_pagan
										religion = west_african_pagan
									}
								}
								NOT = { has_law = succ_primogeniture }
								NOT = { has_law = succ_gavelkind }
								NOT = { has_law = succ_elective_gavelkind }
								NOT = { has_law = succ_feudal_elective }
								NOT = { has_law = succ_seniority }
								NOT = { has_law = succ_tanistry }
								NOT = { has_law = succ_ultimogeniture }
							}
							add_law = succ_primogeniture
						}
						if = {
							limit = {
								higher_tier_than = DUKE
								holder_scope = { religion = catholic }
								NOT = { has_law = investiture_law_0 }
								NOT = { has_law = investiture_law_1 }
							}
							add_law = investiture_law_0
						}
						if = {
							limit = {
								higher_tier_than = DUKE
								holder_scope = {
									NOT = { religion = catholic }
								}
								OR = {
									has_law = investiture_law_0
									has_law = investiture_law_1
								}
							}
							revoke_law = investiture_law_0
							revoke_law = investiture_law_1
						}
					}
				}
				#set laws for secondary titles
				any_demesne_title = {
					limit = {
						higher_tier_than = baron
						is_primary_holder_title = no
						OR = {
							is_primary_holder_title_tier = yes
							higher_tier_than = duke
						}
					}
					#copy primary title's laws to the secondary titles
					if = {
						limit = {
							holder_scope = {
								primary_title = { has_law = feudal_tax_0 }
							}
							NOT = { has_law = feudal_tax_0 }
						}
						add_law = feudal_tax_0
					}
					if = {
						limit = {
							holder_scope = {
								primary_title = { has_law = feudal_tax_1 }
							}
							NOT = { has_law = feudal_tax_1 }
						}
						add_law = feudal_tax_1
					}
					if = {
						limit = {
							holder_scope = {
								primary_title = { has_law = feudal_tax_2 }
							}
							NOT = { has_law = feudal_tax_2 }
						}
						add_law = feudal_tax_2
					}
					if = {
						limit = {
							holder_scope = {
								primary_title = { has_law = city_tax_0 }
							}
							NOT = { has_law = city_tax_0 }
						}
						add_law = city_tax_0
					}
					if = {
						limit = {
							holder_scope = {
								primary_title = { has_law = city_tax_1 }
							}
							NOT = { has_law = city_tax_1 }
						}
						add_law = city_tax_1
					}
					if = {
						limit = {
							holder_scope = {
								primary_title = { has_law = city_tax_2 }
							}
							NOT = { has_law = city_tax_2 }
						}
						add_law = city_tax_2
					}
					if = {
						limit = {
							holder_scope = {
								primary_title = { has_law = temple_tax_0 }
							}
							NOT = { has_law = temple_tax_0 }
						}
						add_law = temple_tax_0
					}
					if = {
						limit = {
							holder_scope = {
								primary_title = { has_law = temple_tax_1 }
							}
							NOT = { has_law = temple_tax_1 }
						}
						add_law = temple_tax_1
					}
					if = {
						limit = {
							holder_scope = {
								primary_title = { has_law = temple_tax_2 }
							}
							NOT = { has_law = temple_tax_2 }
						}
						add_law = temple_tax_2
					}
					if = {
						limit = {
							holder_scope = {
								primary_title = { has_law = tax_privileges_0 }
							}
							NOT = { has_law = tax_privileges_0 }
						}
						add_law = tax_privileges_0
					}
					if = {
						limit = {
							holder_scope = {
								primary_title = { has_law = tax_privileges_1 }
							}
							NOT = { has_law = tax_privileges_1 }
						}
						add_law = tax_privileges_1
					}
					if = {
						limit = {
							holder_scope = {
								primary_title = { has_law = tax_privileges_2 }
							}
							NOT = { has_law = tax_privileges_2 }
						}
						add_law = tax_privileges_2
					}
					if = {
						limit = {
							holder_scope = {
								primary_title = { has_law = levy_privileges_0 }
							}
							NOT = { has_law = levy_privileges_0 }
						}
						add_law = levy_privileges_0
					}
					if = {
						limit = {
							holder_scope = {
								primary_title = { has_law = levy_privileges_1 }
							}
							NOT = { has_law = levy_privileges_1 }
						}
						add_law = levy_privileges_1
					}
					if = {
						limit = {
							holder_scope = {
								primary_title = { has_law = council_privileges_0 }
							}
							NOT = { has_law = council_privileges_0 }
						}
						add_law = council_privileges_0
					}
					if = {
						limit = {
							holder_scope = {
								primary_title = { has_law = council_privileges_1 }
							}
							NOT = { has_law = council_privileges_1 }
						}
						add_law = council_privileges_1
					}
				}
			}
			# band-aid fix for improper de jure empires
			random_independent_ruler = {
				limit = {
					NOT = { has_global_flag = carolingian_empire_formed }
					any_realm_province = { empire = { title = e_karling } }
				}
				e_karling = {
					any_direct_de_jure_vassal_title = { de_jure_liege = 0 }
				}
			}
			random_independent_ruler = {
				limit = {
					NOT = { has_global_flag = hre_formed }
					any_realm_province = { empire = { title = e_hre } }
				}
				e_hre = {
					any_direct_de_jure_vassal_title = { de_jure_liege = 0 }
				}
			}
			random_independent_ruler = {
				limit = {
					any_realm_province = {
						empire = { NOT = { is_title_active = THIS } }
					}
				}
				random_realm_province = {
					limit = {
						empire = { NOT = { is_title_active = THIS } }
					}
					empire = {
						any_direct_de_jure_vassal_title = { de_jure_liege = 0 }
					}
				}
			}
		}
		ai_will_do = {
			factor = 1
		}
	}
	
	ai_estates_income = {
		potential = {
			ai = yes
			is_ruler = no
			OR = {
				has_character_modifier = estates_1
				has_character_modifier = estates_2
				has_character_modifier = estates_3
				has_character_modifier = estates_4
				has_character_modifier = estates_5
			}
			OR = {
				NOT = { has_character_flag = estates_income }
				had_character_flag = {
					flag = estates_income
					days = 365
				}
			}
		}
		allow = { }
		effect = {
			clr_character_flag = estates_income
			set_character_flag = estates_income
			if = {
				limit = {
					has_character_modifier = estates_1
				}
				wealth = 1
			}
			if = {
				limit = {
					has_character_modifier = estates_2
				}
				wealth = 2
			}
			if = {
				limit = {
					has_character_modifier = estates_3
				}
				wealth = 3
			}
			if = {
				limit = {
					has_character_modifier = estates_4
				}
				wealth = 4
			}
			if = {
				limit = {
					has_character_modifier = estates_5
				}
				wealth = 5
			}
		}
		ai_will_do = {
			factor = 1
		}
	}
	
	ai_faction_maintenance = {
		potential = {
			has_landed_title = k_papal_state
			OR = {
				NOT = { has_global_flag = faction_maintenance_pulse }
				had_global_flag = { flag = faction_maintenance_pulse days = 365 }
			}
		}
		allow = { }
		effect = {
			clr_global_flag = faction_maintenance_pulse
			set_global_flag = faction_maintenance_pulse
			
			#clean up flags
			if = {
				limit = { is_ruler = yes }
				if = {
					limit = {
						war = no
						OR = {
							has_character_flag = faction_court_war
							has_character_flag = faction_prosperity_war
							has_character_flag = faction_glory_war
							has_character_flag = faction_tradition_war
							has_character_flag = faction_pretender_war
							has_character_flag = faction_separatist_war
							has_character_flag = faction_religious_war
						}
					}
					clr_character_flag = faction_feudal_war
					clr_character_flag = faction_republican_war
					clr_character_flag = faction_religious_war
					clr_character_flag = faction_court_war
					clr_character_flag = faction_pretender_war
					clr_character_flag = faction_separatist_war
					clr_character_flag = faction_religious_war
				}
				if = {
					limit = {
						NOT = {
							leads_faction = faction_court
							leads_faction = faction_prosperity
							leads_faction = faction_glory
							leads_faction = faction_tradition
						}
						OR = {
							has_character_flag = faction_meeting
							has_character_flag = faction_meeting_called
							has_character_flag = faction_meeting_begun
							has_character_flag = faction_meeting_postponed
							has_character_flag = faction_leadership_challenge
						}
					}
					clr_character_flag = faction_meeting
					clr_character_flag = can_make_demand
					clr_character_flag = faction_meeting_called
					clr_character_flag = faction_meeting_begun
					clr_character_flag = faction_meeting_postponed
					clr_character_flag = faction_leadership_challenge
					clr_character_flag = faction_is_happy
					clr_character_flag = faction_is_content
					clr_character_flag = faction_is_unhappy
					clr_character_flag = faction_is_angry
					clr_character_flag = made_great_speech
					clr_character_flag = made_good_speech
					clr_character_flag = made_fair_speech
					clr_character_flag = made_poor_speech
					clr_character_flag = made_terrible_speech
					clr_character_flag = liege_opinion_increased
					clr_character_flag = liege_opinion_slightly_increased
					clr_character_flag = liege_opinion_slightly_decreased
					clr_character_flag = liege_opinion_decreased
					clr_character_flag = demand_money_liege
					clr_character_flag = demand_support_liege
					clr_character_flag = faction_demand_refused
					clr_character_flag = impeachment_very_likely
					clr_character_flag = impeachment_likely
					clr_character_flag = impeachment_unlikely
					clr_character_flag = impeachment_very_unlikely
				}
				if = {
					limit = {
						OR = {
							had_character_flag = { flag = faction_meeting_called days = 365 }
							had_character_flag = { flag = faction_meeting_begun days = 365 }
							had_character_flag = { flag = faction_leadership_challenge days = 365 }
						}
					}
					clr_character_flag = can_make_demand
					clr_character_flag = faction_meeting_called
					clr_character_flag = faction_meeting_begun
					clr_character_flag = faction_meeting_postponed
					clr_character_flag = faction_leadership_challenge
					clr_character_flag = faction_is_happy
					clr_character_flag = faction_is_content
					clr_character_flag = faction_is_unhappy
					clr_character_flag = faction_is_angry
					clr_character_flag = made_great_speech
					clr_character_flag = made_good_speech
					clr_character_flag = made_fair_speech
					clr_character_flag = made_poor_speech
					clr_character_flag = made_terrible_speech
					clr_character_flag = liege_opinion_increased
					clr_character_flag = liege_opinion_slightly_increased
					clr_character_flag = liege_opinion_slightly_decreased
					clr_character_flag = liege_opinion_decreased
					clr_character_flag = demand_money_liege
					clr_character_flag = demand_support_liege
					clr_character_flag = faction_demand_refused
					clr_character_flag = impeachment_very_likely
					clr_character_flag = impeachment_likely
					clr_character_flag = impeachment_unlikely
					clr_character_flag = impeachment_very_unlikely
				}
				if = {
					limit = { had_character_flag = { flag = former_faction_leader days = 7 } }
					clr_character_flag = former_faction_leader
				}
				if = {
					limit = { had_character_flag = { flag = faction_reboot days = 7 } }
					clr_character_flag = faction_reboot
				}
				any_realm_lord = {
					limit = { NOT = { character = ROOT } }
					if = {
						limit = {
							war = no
							OR = {
								has_character_flag = faction_court_war
								has_character_flag = faction_prosperity_war
								has_character_flag = faction_glory_war
								has_character_flag = faction_tradition_war
								has_character_flag = faction_pretender_war
								has_character_flag = faction_separatist_war
								has_character_flag = faction_religious_war
							}
						}
						clr_character_flag = faction_feudal_war
						clr_character_flag = faction_republican_war
						clr_character_flag = faction_religious_war
						clr_character_flag = faction_court_war
						clr_character_flag = faction_pretender_war
						clr_character_flag = faction_separatist_war
						clr_character_flag = faction_religious_war
					}
					if = {
						limit = {
							NOT = {
								leads_faction = faction_court
								leads_faction = faction_prosperity
								leads_faction = faction_glory
								leads_faction = faction_tradition
							}
							OR = {
								has_character_flag = faction_meeting
								has_character_flag = faction_meeting_called
								has_character_flag = faction_meeting_begun
								has_character_flag = faction_meeting_postponed
								has_character_flag = faction_leadership_challenge
							}
						}
						clr_character_flag = faction_meeting
						clr_character_flag = can_make_demand
						clr_character_flag = faction_meeting_called
						clr_character_flag = faction_meeting_begun
						clr_character_flag = faction_meeting_postponed
						clr_character_flag = faction_leadership_challenge
						clr_character_flag = faction_is_happy
						clr_character_flag = faction_is_content
						clr_character_flag = faction_is_unhappy
						clr_character_flag = faction_is_angry
						clr_character_flag = made_great_speech
						clr_character_flag = made_good_speech
						clr_character_flag = made_fair_speech
						clr_character_flag = made_poor_speech
						clr_character_flag = made_terrible_speech
						clr_character_flag = liege_opinion_increased
						clr_character_flag = liege_opinion_slightly_increased
						clr_character_flag = liege_opinion_slightly_decreased
						clr_character_flag = liege_opinion_decreased
						clr_character_flag = demand_money_liege
						clr_character_flag = demand_support_liege
						clr_character_flag = faction_demand_refused
						clr_character_flag = impeachment_very_likely
						clr_character_flag = impeachment_likely
						clr_character_flag = impeachment_unlikely
						clr_character_flag = impeachment_very_unlikely
					}
					if = {
						limit = {
							OR = {
								had_character_flag = { flag = faction_meeting_called days = 365 }
								had_character_flag = { flag = faction_meeting_begun days = 365 }
								had_character_flag = { flag = faction_leadership_challenge days = 365 }
							}
						}
						clr_character_flag = can_make_demand
						clr_character_flag = faction_meeting_called
						clr_character_flag = faction_meeting_begun
						clr_character_flag = faction_meeting_postponed
						clr_character_flag = faction_leadership_challenge
						clr_character_flag = faction_is_happy
						clr_character_flag = faction_is_content
						clr_character_flag = faction_is_unhappy
						clr_character_flag = faction_is_angry
						clr_character_flag = made_great_speech
						clr_character_flag = made_good_speech
						clr_character_flag = made_fair_speech
						clr_character_flag = made_poor_speech
						clr_character_flag = made_terrible_speech
						clr_character_flag = liege_opinion_increased
						clr_character_flag = liege_opinion_slightly_increased
						clr_character_flag = liege_opinion_slightly_decreased
						clr_character_flag = liege_opinion_decreased
						clr_character_flag = demand_money_liege
						clr_character_flag = demand_support_liege
						clr_character_flag = faction_demand_refused
						clr_character_flag = impeachment_very_likely
						clr_character_flag = impeachment_likely
						clr_character_flag = impeachment_unlikely
						clr_character_flag = impeachment_very_unlikely
					}
					if = {
						limit = { had_character_flag = { flag = former_faction_leader days = 7 } }
						clr_character_flag = former_faction_leader
					}
					if = {
						limit = { had_character_flag = { flag = faction_reboot days = 7 } }
						clr_character_flag = faction_reboot
					}
				}
			}
			any_independent_ruler = {
				limit = { NOT = { character = ROOT } }
				if = {
					limit = {
						war = no
						OR = {
							has_character_flag = faction_court_war
							has_character_flag = faction_prosperity_war
							has_character_flag = faction_glory_war
							has_character_flag = faction_tradition_war
							has_character_flag = faction_pretender_war
							has_character_flag = faction_separatist_war
							has_character_flag = faction_religious_war
						}
					}
					clr_character_flag = faction_feudal_war
					clr_character_flag = faction_republican_war
					clr_character_flag = faction_religious_war
					clr_character_flag = faction_court_war
					clr_character_flag = faction_pretender_war
					clr_character_flag = faction_separatist_war
					clr_character_flag = faction_religious_war
				}
				if = {
					limit = {
						NOT = {
							leads_faction = faction_court
							leads_faction = faction_prosperity
							leads_faction = faction_glory
							leads_faction = faction_tradition
						}
						OR = {
							has_character_flag = faction_meeting
							has_character_flag = faction_meeting_called
							has_character_flag = faction_meeting_begun
							has_character_flag = faction_meeting_postponed
							has_character_flag = faction_leadership_challenge
						}
					}
					clr_character_flag = faction_meeting
					clr_character_flag = can_make_demand
					clr_character_flag = faction_meeting_called
					clr_character_flag = faction_meeting_begun
					clr_character_flag = faction_meeting_postponed
					clr_character_flag = faction_leadership_challenge
					clr_character_flag = faction_is_happy
					clr_character_flag = faction_is_content
					clr_character_flag = faction_is_unhappy
					clr_character_flag = faction_is_angry
					clr_character_flag = made_great_speech
					clr_character_flag = made_good_speech
					clr_character_flag = made_fair_speech
					clr_character_flag = made_poor_speech
					clr_character_flag = made_terrible_speech
					clr_character_flag = liege_opinion_increased
					clr_character_flag = liege_opinion_slightly_increased
					clr_character_flag = liege_opinion_slightly_decreased
					clr_character_flag = liege_opinion_decreased
					clr_character_flag = demand_money_liege
					clr_character_flag = demand_support_liege
					clr_character_flag = faction_demand_refused
					clr_character_flag = impeachment_very_likely
					clr_character_flag = impeachment_likely
					clr_character_flag = impeachment_unlikely
					clr_character_flag = impeachment_very_unlikely
				}
				if = {
					limit = {
						OR = {
							had_character_flag = { flag = faction_meeting_called days = 365 }
							had_character_flag = { flag = faction_meeting_begun days = 365 }
							had_character_flag = { flag = faction_leadership_challenge days = 365 }
						}
					}
					clr_character_flag = can_make_demand
					clr_character_flag = faction_meeting_called
					clr_character_flag = faction_meeting_begun
					clr_character_flag = faction_meeting_postponed
					clr_character_flag = faction_leadership_challenge
					clr_character_flag = faction_is_happy
					clr_character_flag = faction_is_content
					clr_character_flag = faction_is_unhappy
					clr_character_flag = faction_is_angry
					clr_character_flag = made_great_speech
					clr_character_flag = made_good_speech
					clr_character_flag = made_fair_speech
					clr_character_flag = made_poor_speech
					clr_character_flag = made_terrible_speech
					clr_character_flag = liege_opinion_increased
					clr_character_flag = liege_opinion_slightly_increased
					clr_character_flag = liege_opinion_slightly_decreased
					clr_character_flag = liege_opinion_decreased
					clr_character_flag = demand_money_liege
					clr_character_flag = demand_support_liege
					clr_character_flag = faction_demand_refused
					clr_character_flag = impeachment_very_likely
					clr_character_flag = impeachment_likely
					clr_character_flag = impeachment_unlikely
					clr_character_flag = impeachment_very_unlikely
				}
				if = {
					limit = { had_character_flag = { flag = former_faction_leader days = 7 } }
					clr_character_flag = former_faction_leader
				}
				if = {
					limit = { had_character_flag = { flag = faction_reboot days = 7 } }
					clr_character_flag = faction_reboot
				}
				any_realm_lord = {
					limit = { NOT = { character = PREV } }
					if = {
						limit = {
							war = no
							OR = {
								has_character_flag = faction_court_war
								has_character_flag = faction_prosperity_war
								has_character_flag = faction_glory_war
								has_character_flag = faction_tradition_war
								has_character_flag = faction_pretender_war
								has_character_flag = faction_separatist_war
								has_character_flag = faction_religious_war
							}
						}
						clr_character_flag = faction_feudal_war
						clr_character_flag = faction_republican_war
						clr_character_flag = faction_religious_war
						clr_character_flag = faction_court_war
						clr_character_flag = faction_pretender_war
						clr_character_flag = faction_separatist_war
						clr_character_flag = faction_religious_war
					}
					if = {
						limit = {
							NOT = {
								leads_faction = faction_court
								leads_faction = faction_prosperity
								leads_faction = faction_glory
								leads_faction = faction_tradition
							}
							OR = {
								has_character_flag = faction_meeting
								has_character_flag = faction_meeting_called
								has_character_flag = faction_meeting_begun
								has_character_flag = faction_meeting_postponed
								has_character_flag = faction_leadership_challenge
							}
						}
						clr_character_flag = faction_meeting
						clr_character_flag = can_make_demand
						clr_character_flag = faction_meeting_called
						clr_character_flag = faction_meeting_begun
						clr_character_flag = faction_meeting_postponed
						clr_character_flag = faction_leadership_challenge
						clr_character_flag = faction_is_happy
						clr_character_flag = faction_is_content
						clr_character_flag = faction_is_unhappy
						clr_character_flag = faction_is_angry
						clr_character_flag = made_great_speech
						clr_character_flag = made_good_speech
						clr_character_flag = made_fair_speech
						clr_character_flag = made_poor_speech
						clr_character_flag = made_terrible_speech
						clr_character_flag = liege_opinion_increased
						clr_character_flag = liege_opinion_slightly_increased
						clr_character_flag = liege_opinion_slightly_decreased
						clr_character_flag = liege_opinion_decreased
						clr_character_flag = demand_money_liege
						clr_character_flag = demand_support_liege
						clr_character_flag = faction_demand_refused
						clr_character_flag = impeachment_very_likely
						clr_character_flag = impeachment_likely
						clr_character_flag = impeachment_unlikely
						clr_character_flag = impeachment_very_unlikely
					}
					if = {
						limit = {
							OR = {
								had_character_flag = { flag = faction_meeting_called days = 365 }
								had_character_flag = { flag = faction_meeting_begun days = 365 }
								had_character_flag = { flag = faction_leadership_challenge days = 365 }
							}
						}
						clr_character_flag = can_make_demand
						clr_character_flag = faction_meeting_called
						clr_character_flag = faction_meeting_begun
						clr_character_flag = faction_meeting_postponed
						clr_character_flag = faction_leadership_challenge
						clr_character_flag = faction_is_happy
						clr_character_flag = faction_is_content
						clr_character_flag = faction_is_unhappy
						clr_character_flag = faction_is_angry
						clr_character_flag = made_great_speech
						clr_character_flag = made_good_speech
						clr_character_flag = made_fair_speech
						clr_character_flag = made_poor_speech
						clr_character_flag = made_terrible_speech
						clr_character_flag = liege_opinion_increased
						clr_character_flag = liege_opinion_slightly_increased
						clr_character_flag = liege_opinion_slightly_decreased
						clr_character_flag = liege_opinion_decreased
						clr_character_flag = demand_money_liege
						clr_character_flag = demand_support_liege
						clr_character_flag = faction_demand_refused
						clr_character_flag = impeachment_very_likely
						clr_character_flag = impeachment_likely
						clr_character_flag = impeachment_unlikely
						clr_character_flag = impeachment_very_unlikely
					}
					if = {
						limit = { had_character_flag = { flag = former_faction_leader days = 7 } }
						clr_character_flag = former_faction_leader
					}
					if = {
						limit = { had_character_flag = { flag = faction_reboot days = 7 } }
						clr_character_flag = faction_reboot
					}
				}
			}
			
			#faction system
			if = {
				limit = { higher_tier_than = COUNT }
				set_character_flag = annual_faction_maintenance
				character_event = { id = PlusFaction.200 } #faction maintenance event
				any_realm_lord = {
					limit = {
						NOT = { character = ROOT }
						higher_tier_than = COUNT
					}
					set_character_flag = annual_faction_maintenance
					character_event = { id = PlusFaction.200 } #faction maintenance event
				}
			}
			any_independent_ruler = {
				limit = {
					NOT = { character = ROOT }
					higher_tier_than = COUNT
				}
				set_character_flag = annual_faction_maintenance
				character_event = { id = PlusFaction.200 } #faction maintenance event
				any_realm_lord = {
					limit = {
						NOT = { character = PREV }
						higher_tier_than = COUNT
					}
					set_character_flag = annual_faction_maintenance
					character_event = { id = PlusFaction.200 } #faction maintenance event
				}
			}
		}
		ai_will_do = {
			factor = 100
		}
	}
}

