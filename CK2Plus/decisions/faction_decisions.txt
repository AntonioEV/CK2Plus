plot_decisions = {

	faction_separatist_war = {
		is_high_prio = yes

		potential = {
			ai = no
			leads_faction = faction_separatist
		}
		allow = {
			war = no
			has_regent = no
			faction_power = {
				faction = faction_separatist
				power = 0.75
			}
			liege = {
				NOT = { war_with = ROOT }
				NOT = { reverse_has_truce = ROOT }
			}
		}
		effect = {
			liege = {
				set_character_flag = faction_separatist_war
				hidden_tooltip = {
					ROOT = {
						add_trait = rebel
						hidden_tooltip = {
							opinion = { who = PREV modifier = revolting_against years = 100 }
						}
					}
					any_faction_backer = {
						faction = faction_separatist
						add_trait = rebel
						hidden_tooltip = {
							opinion = { who = PREV modifier = revolting_against years = 100 }
						}
					}
				}
				reverse_war = {
					target = ROOT
					casus_belli = cb_faction_independence
					faction = faction_separatist
				}
				#any faction might join
				hidden_tooltip = {
					any_vassal = {
						limit = {
							OR = {
								leads_faction = faction_feudal_emperor
								leads_faction = faction_feudal_king
								leads_faction = faction_feudal_duke
							}
						}
						character_event = { id = PlusFaction.400 }
					}
					any_vassal = {
						limit = {
							OR = {
								leads_faction = faction_court_emperor
								leads_faction = faction_court_king
								leads_faction = faction_court_duke
							}
						}
						character_event = { id = PlusFaction.410 }
					}
					any_vassal = {
						limit = {
							OR = {
								leads_faction = faction_religious_emperor
								leads_faction = faction_religious_king
								leads_faction = faction_religious_duke
							}
						}
						character_event = { id = PlusFaction.420 }
					}
					any_vassal = {
						limit = {
							OR = {
								leads_faction = faction_republican_emperor
								leads_faction = faction_republican_king
								leads_faction = faction_republican_duke
							}
						}
						character_event = { id = PlusFaction.430 }
					}
					any_vassal = { character_event = { id = PlusFaction.440 } }
				}
			}
		}
		revoke_allowed = {
			always = no
		}
		ai_will_do = {
			factor = 0
		}
	}
	
	faction_claimant_ultimatum = {
		is_high_prio = yes

		potential = {
			ai = no
			leads_faction = faction_pretender
			OR = {
				NOT = { has_character_flag = faction_claimant_ultimatum_taken }
				had_character_flag = { flag = faction_claimant_ultimatum_taken days = 7 }
			}
		}
		allow = {
			war = no
			has_regent = no
			faction_power = {
				faction = faction_pretender
				power = 0.5
			}
			liege = {
				NOT = { war_with = ROOT }
				NOT = { reverse_has_truce = ROOT }
			}
		}
		effect = {
			liege = {
				letter_event = { id = 8036 days = 7 tooltip = "EVTTOOLTIP8005" }
			}
			if = {
				limit = {
					supported_claimant = {
						NOT = { character = ROOT }
						OR = {
							NOT = { same_liege = ROOT }
							NOT = { in_faction = faction_pretender }
							NOT = { supported_claimant = { character = PREV } }
						}
					}
				}
				supported_claimant = {
					letter_event = { id = 8037 days = 1 }
				}
			}
			hidden_tooltip = {
				set_character_flag = faction_claimant_ultimatum_taken
			}
		}
		revoke_allowed = {
			always = no
		}
		ai_will_do = {
			factor = 0
		}
	}

	faction_antiking_ultimatum = {
		is_high_prio = yes
		
		potential = {
			leads_faction = faction_antiking
			OR = {
				NOT = { has_character_flag = faction_install_antiking_ultimatum_taken }
				had_character_flag = { flag = faction_install_antiking_ultimatum_taken days = 7 }
			}
		}
		allow = {
			war = no
			has_regent = no
			liege = {
				NOT = { war_with = ROOT }
				NOT = { reverse_has_truce = ROOT }
			}
			capital_holding = {
				controller = {
					character = ROOT
				}
			}
		}
		
		effect = {
			liege = {
				letter_event = { id = 8200 days = 3 tooltip = EVTTOOLTIP8005 }
			}
			hidden_tooltip = {
				set_character_flag = faction_install_antiking_ultimatum_taken
			}
		}
		
		revoke_allowed = {
			always = no
		}
		
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				NOT = { 
					faction_power = {
						faction = faction_antiking
						power = 0.5
					}
				}
			}		
			modifier = {
				factor = 0.5 # Slow it down a bit
				always = yes
			}		
			modifier = {
				factor = 0
				liege = {
					any_war = {
						OR = {
							AND = {
								defender = { character = PREVPREV }
								NOT = { using_cb = depose_liege }
								NOT = { using_cb = overthrow_ruler }
								NOT = { using_cb = overthrow_ruler_no_calls }
								NOT = { using_cb = claim_on_liege_plot }
								NOT = { using_cb = other_claim_on_liege_plot }
								NOT = { using_cb = cb_faction_overthrow_ruler }
							}
							AND = {
								attacker = { character = PREVPREV }
								OR = {
									using_cb = invasion
									using_cb = holy_war
									using_cb = tribal_invasion
									using_cb = manifest_destiny_invasion
									using_cb = viking_invasion
									using_cb = claim_all
									using_cb = claim
									using_cb = other_claim
								}
							}
						}
					}
				}
			}
		}
	}
	
	hold_court_faction_meeting = {
		is_high_prio = yes
		
		potential = {
			OR = {
				leads_faction = faction_court_emperor
				leads_faction = faction_court_king
				leads_faction = faction_court_duke
			}
			NOT = {
				trait = rebel
				trait = loyalist
				trait = neutral
			}
			any_faction_backer = {
				OR = {
					AND = {
						ROOT = { leads_faction = faction_court_emperor }
						in_faction = faction_court_emperor
						higher_tier_than = BARON
					}
					AND = {
						ROOT = { leads_faction = faction_court_king }
						in_faction = faction_court_king
						higher_tier_than = BARON
					}
					AND = {
						ROOT = { leads_faction = faction_court_duke }
						in_faction = faction_court_duke
						higher_tier_than = BARON
					}
				}
			}
			had_global_flag = { flag = startup days = 730 }
			NOT = { has_character_flag = faction_meeting_called }
		}
		allow = {
			custom_tooltip = {
				text = CAN_HOLD_FACTION_MEETING
				hidden_tooltip = {
					OR = {
						NOT = { has_character_flag = faction_meeting }
						had_character_flag = { flag = faction_meeting days = 1095 }
						AND = {
							had_character_flag = { flag = faction_meeting days = 730 }
							liege = { has_character_flag = faction_court_angry }
						}
					}
				}
			}
		}
		effect = {
			custom_tooltip = { text = CUSTOMTOOLTIP52 }
			set_character_flag = faction_meeting_called
			clr_character_flag = faction_meeting_postponed
			hidden_tooltip = {
				set_variable = { which = "faction_votes" value = 0 }
				set_variable = { which = "faction_meeting_delay" value = 0 }
				any_faction_backer = {
					limit = {
						OR = {
							AND = {
								ROOT = { leads_faction = faction_court_emperor }
								in_faction = faction_court_emperor
							}
							AND = {
								ROOT = { leads_faction = faction_court_king }
								in_faction = faction_court_king
							}
							AND = {
								ROOT = { leads_faction = faction_court_duke }
								in_faction = faction_court_duke
							}
						}
					}
					character_event = { id = PlusFaction.102 }
				}
				character_event = { id = PlusFaction.105 days = 7 } # regular meeting
				character_event = { id = PlusFaction.106 days = 7 } # angry meeting
			}
		}
		ai_will_do = {
			factor = 0
		}
	}
	
	hold_feudal_faction_meeting = {
		is_high_prio = yes
		
		potential = {
			OR = {
				leads_faction = faction_feudal_emperor
				leads_faction = faction_feudal_king
				leads_faction = faction_feudal_duke
			}
			NOT = {
				trait = rebel
				trait = loyalist
				trait = neutral
			}
			any_faction_backer = {
				OR = {
					AND = {
						ROOT = { leads_faction = faction_feudal_emperor }
						in_faction = faction_feudal_emperor
						higher_tier_than = BARON
					}
					AND = {
						ROOT = { leads_faction = faction_feudal_king }
						in_faction = faction_feudal_king
						higher_tier_than = BARON
					}
					AND = {
						ROOT = { leads_faction = faction_feudal_duke }
						in_faction = faction_feudal_duke
						higher_tier_than = BARON
					}
				}
			}
			had_global_flag = { flag = startup days = 730 }
			NOT = { has_character_flag = faction_meeting_called }
		}
		allow = {
			custom_tooltip = {
				text = CAN_HOLD_FACTION_MEETING
				hidden_tooltip = {
					OR = {
						NOT = { has_character_flag = faction_meeting }
						had_character_flag = { flag = faction_meeting days = 1095 }
						AND = {
							had_character_flag = { flag = faction_meeting days = 730 }
							liege = { has_character_flag = faction_feudal_angry }
						}
					}
				}
			}
		}
		effect = {
			custom_tooltip = { text = CUSTOMTOOLTIP51 }
			set_character_flag = faction_meeting_called
			clr_character_flag = faction_meeting_postponed
			hidden_tooltip = {
				set_variable = { which = "faction_votes" value = 0 }
				set_variable = { which = "faction_meeting_delay" value = 0 }
				any_faction_backer = {
					limit = {
						OR = {
							AND = {
								ROOT = { leads_faction = faction_feudal_emperor }
								in_faction = faction_feudal_emperor
							}
							AND = {
								ROOT = { leads_faction = faction_feudal_king }
								in_faction = faction_feudal_king
							}
							AND = {
								ROOT = { leads_faction = faction_feudal_duke }
								in_faction = faction_feudal_duke
							}
						}
					}
					character_event = { id = PlusFaction.102 }
				}
				character_event = { id = PlusFaction.105 days = 7 } # regular meeting
				character_event = { id = PlusFaction.106 days = 7 } # angry meeting
			}
		}
		ai_will_do = {
			factor = 0
		}
	}
	
	hold_religious_faction_meeting = {
		is_high_prio = yes
		
		potential = {
			OR = {
				leads_faction = faction_religious_emperor
				leads_faction = faction_religious_king
				leads_faction = faction_religious_duke
			}
			NOT = {
				trait = rebel
				trait = loyalist
				trait = neutral
			}
			any_faction_backer = {
				OR = {
					AND = {
						ROOT = { leads_faction = faction_religious_emperor }
						in_faction = faction_religious_emperor
						higher_tier_than = BARON
					}
					AND = {
						ROOT = { leads_faction = faction_religious_king }
						in_faction = faction_religious_king
						higher_tier_than = BARON
					}
					AND = {
						ROOT = { leads_faction = faction_religious_duke }
						in_faction = faction_religious_duke
						higher_tier_than = BARON
					}
				}
			}
			had_global_flag = { flag = startup days = 730 }
			NOT = { has_character_flag = faction_meeting_called }
		}
		allow = {
			custom_tooltip = {
				text = CAN_HOLD_FACTION_MEETING
				hidden_tooltip = {
					OR = {
						NOT = { has_character_flag = faction_meeting }
						had_character_flag = { flag = faction_meeting days = 1095 }
						AND = {
							had_character_flag = { flag = faction_meeting days = 730 }
							liege = { has_character_flag = faction_religious_angry }
						}
					}
				}
			}
		}
		effect = {
			custom_tooltip = { text = CUSTOMTOOLTIP53 }
			set_character_flag = faction_meeting_called
			clr_character_flag = faction_meeting_postponed
			hidden_tooltip = {
				set_variable = { which = "faction_votes" value = 0 }
				set_variable = { which = "faction_meeting_delay" value = 0 }
				any_faction_backer = {
					limit = {
						OR = {
							AND = {
								ROOT = { leads_faction = faction_religious_emperor }
								in_faction = faction_religious_emperor
							}
							AND = {
								ROOT = { leads_faction = faction_religious_king }
								in_faction = faction_religious_king
							}
							AND = {
								ROOT = { leads_faction = faction_religious_duke }
								in_faction = faction_religious_duke
							}
						}
					}
					character_event = { id = PlusFaction.102 }
				}
				character_event = { id = PlusFaction.105 days = 7 } # regular meeting
				character_event = { id = PlusFaction.106 days = 7 } # angry meeting
			}
		}
		ai_will_do = {
			factor = 0
		}
	}

	hold_republican_faction_meeting = {
		is_high_prio = yes
		
		potential = {
			OR = {
				leads_faction = faction_republican_emperor
				leads_faction = faction_republican_king
				leads_faction = faction_republican_duke
			}
			NOT = {
				trait = rebel
				trait = loyalist
				trait = neutral
			}
			any_faction_backer = {
				OR = {
					AND = {
						ROOT = { leads_faction = faction_republican_emperor }
						in_faction = faction_republican_emperor
						higher_tier_than = BARON
					}
					AND = {
						ROOT = { leads_faction = faction_republican_king }
						in_faction = faction_republican_king
						higher_tier_than = BARON
					}
					AND = {
						ROOT = { leads_faction = faction_republican_duke }
						in_faction = faction_republican_duke
						higher_tier_than = BARON
					}
				}
			}
			had_global_flag = { flag = startup days = 730 }
			NOT = { has_character_flag = faction_meeting_called }
		}
		allow = {
			custom_tooltip = {
				text = CAN_HOLD_FACTION_MEETING
				hidden_tooltip = {
					OR = {
						NOT = { has_character_flag = faction_meeting }
						had_character_flag = { flag = faction_meeting days = 1095 }
						AND = {
							had_character_flag = { flag = faction_meeting days = 730 }
							liege = { has_character_flag = faction_republican_angry }
						}
					}
				}
			}
		}
		effect = {
			custom_tooltip = { text = CUSTOMTOOLTIP54 }
			set_character_flag = faction_meeting_called
			clr_character_flag = faction_meeting_postponed
			hidden_tooltip = {
				set_variable = { which = "faction_votes" value = 0 }
				set_variable = { which = "faction_meeting_delay" value = 0 }
				any_faction_backer = {
					limit = {
						OR = {
							AND = {
								ROOT = { leads_faction = faction_republican_emperor }
								in_faction = faction_republican_emperor
							}
							AND = {
								ROOT = { leads_faction = faction_republican_king }
								in_faction = faction_republican_king
							}
							AND = {
								ROOT = { leads_faction = faction_religious_duke }
								in_faction = faction_republican_duke
							}
						}
					}
					character_event = { id = PlusFaction.102 }
				}
				character_event = { id = PlusFaction.105 days = 7 } # regular meeting
				character_event = { id = PlusFaction.106 days = 7 } # angry meeting
			}
		}
		ai_will_do = {
			factor = 0
		}
	}	
}