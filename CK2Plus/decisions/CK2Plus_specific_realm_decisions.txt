decisions = {

	### ENGLAND
	
	abolish_witan_william = {
		is_high_prio = yes

		potential = {
			NOT = { has_global_flag = witan_abolished_norwegian }
			NOT = { has_global_flag = witan_abolished }
			has_character_flag = william_the_conqueror
			has_landed_title = k_england
		}

		allow = {
			war = no
			prisoner = no
		}

		effect = {
			set_global_flag = witan_abolished
			character_event = { id = Plus.500 }
		}

		ai_will_do = {
			factor = 1
		}
	}
	
	abolish_witan_hardrada = {
		is_high_prio = yes

		potential = {
			NOT = { has_global_flag = witan_abolished_norwegian }
			NOT = { has_global_flag = witan_abolished }
			has_character_flag = harald_hardrada
			has_landed_title = k_england
		}

		allow = {
			war = no
			prisoner = no   
		}

		effect = {
			set_global_flag = witan_abolished_norwegian
			character_event = { id = Plus.501 }
		}

		ai_will_do = {
			factor = 1	
		}
	}

	### ITALY / SICILY
	
	sicily_falls = {
		is_high_prio = yes
		
		potential = {
			has_landed_title = k_papal_state # He always exists		
			NOT = { 
				has_global_flag = sicily_falls
				has_global_flag = italian_rec_success
				has_global_flag = italian_rec_failure
				has_global_flag = christian_crusades_unlocked # This event unlocks them
			}
		}
		allow = { # Don't fire if independent Christians still inhabit k_sicily
			c_benevento = {
				holder_scope = {
					top_liege = { NOT = { religion_group = christian } }
				}
			}
			c_teate = {
				holder_scope = {
					top_liege = { NOT = { religion_group = christian } }
				}
			}
			c_foggia = {
				holder_scope = {
					top_liege = { NOT = { religion_group = christian } }
				}
			}			
			c_capua = {
				holder_scope = {
					top_liege = { NOT = { religion_group = christian } }
				}
			}
			c_napoli = {
				holder_scope = {
					top_liege = { NOT = { religion_group = christian } }
				}
			}
			c_gaete = {
				holder_scope = {
					top_liege = { NOT = { religion_group = christian } }
				}
			}
			c_apulia = {
				holder_scope = {
					top_liege = { NOT = { religion_group = christian } }
				}
			}
			c_bari = {
				holder_scope = {
					top_liege = { NOT = { religion_group = christian } }
				}
			}
			c_lecce = {
				holder_scope = {
					top_liege = { NOT = { religion_group = christian } }
				}
			}
			c_salerno = {
				holder_scope = {
					top_liege = { NOT = { religion_group = christian } }
				}
			}
			c_taranto = {
				holder_scope = {
					top_liege = { NOT = { religion_group = christian } }
				}
			}
			c_amalfi = {
				holder_scope = {
					top_liege = { NOT = { religion_group = christian } }
				}
			}
			c_consenza = {
				holder_scope = {
					top_liege = { NOT = { religion_group = christian } }
				}
			}
			c_reggio = {
				holder_scope = {
					top_liege = { NOT = { religion_group = christian } }
				}
			}
			c_palermo = {
				holder_scope = {
					top_liege = { NOT = { religion_group = christian } }
				}
			}
			c_messina = {
				holder_scope = {
					top_liege = { NOT = { religion_group = christian } }
				}
			}
			c_siracusa = {
				holder_scope = {
					top_liege = { NOT = { religion_group = christian } }
				}
			}
			c_agrigento = {
				holder_scope = {
					top_liege = { NOT = { religion_group = christian } }
				}
			}
			c_trapani = {
				holder_scope = {
					top_liege = { NOT = { religion_group = christian } }
				}
			}
			c_malta = {
				holder_scope = {
					top_liege = { NOT = { religion_group = christian } }
				}
			}		
		}		
		effect = {
			set_global_flag = sicily_falls
			set_global_flag = italian_reconquest_planning
			k_papal_state = {
				holder_scope = {
					add_character_modifier = {
						name = italian_reconquest_pope
						duration = -1
						inherit = yes
						hidden = yes
					}
				}
			}
			any_playable_ruler = { narrative_event = { id = Plus.504 } }
		}
		revoke_allowed = {
			always = no
		}
		ai_will_do = {
			factor = 1
		}		
	}
	
	sicily_regained = {
		is_high_prio = yes
		
		potential = {
			has_global_flag = italian_reconquest_started
			NOT = { 
				has_global_flag = italian_rec_success
				has_global_flag = italian_rec_failure
			}
			OR = {
				has_landed_title = d_benevento
				has_landed_title = d_capua
				has_landed_title = d_apulia
				has_landed_title = d_salerno
				has_landed_title = d_calabria
				has_landed_title = d_sicily
			}
			has_character_modifier = italian_reconquest 
		}
		allow = {
			war = no
			custom_tooltip = {
				text = italian_reconq_ctt
				c_benevento = {
					holder_scope = {
						top_liege = { religion_group = christian }
					}
				}
				c_teate = {
					holder_scope = {
						top_liege = { religion_group = christian }
					}
				}
				c_foggia = {
					holder_scope = {
						top_liege = { religion_group = christian }
					}
				}				
				c_capua = {
					holder_scope = {
						top_liege = { religion_group = christian }
					}
				}
				c_napoli = {
					holder_scope = {
						top_liege = { religion_group = christian }
					}
				}
				c_gaete = {
					holder_scope = {
						top_liege = { religion_group = christian }
					}
				}
				c_apulia = {
					holder_scope = {
						top_liege = { religion_group = christian }
					}
				}
				c_bari = {
					holder_scope = {
						top_liege = { religion_group = christian }
					}
				}
				c_lecce = {
					holder_scope = {
						top_liege = { religion_group = christian }
					}
				}
				c_salerno = {
					holder_scope = {
						top_liege = { religion_group = christian }
					}
				}
				c_taranto = {
					holder_scope = {
						top_liege = { religion_group = christian }
					}
				}
				c_amalfi = {
					holder_scope = {
						top_liege = { religion_group = christian }
					}
				}
				c_consenza = {
					holder_scope = {
						top_liege = { religion_group = christian }
					}
				}
				c_reggio = {
					holder_scope = {
						top_liege = { religion_group = christian }
					}
				}
				c_palermo = {
					holder_scope = {
						top_liege = { religion_group = christian }
					}
				}
				c_messina = {
					holder_scope = {
						top_liege = { religion_group = christian }
					}
				}
				c_siracusa = {
					holder_scope = {
						top_liege = { religion_group = christian }
					}
				}
				c_agrigento = {
					holder_scope = {
						top_liege = { religion_group = christian }
					}
				}
				c_trapani = {
					holder_scope = {
						top_liege = { religion_group = christian }
					}
				}
				c_malta = {
					holder_scope = {
						top_liege = { religion_group = christian }
					}
				}
			}
		}
		effect = {
			set_global_flag = italian_rec_success
			set_global_flag = christian_crusades_unlocked
			k_sicily = { gain_title = ROOT }
			prestige = 500
			hidden_tooltip = {
				remove_character_modifier = italian_reconquest
				narrative_event = { id = Plus.516 }
				any_playable_ruler = {
					limit = { NOT = { character = ROOT } }
					narrative_event = { id = Plus.510 }
				}
			}
		}
		revoke_allowed = {
			always = no
		}
		ai_will_do = {
			factor = 1
		}	
	}
	
	### ALBANIA
	
	create_kingdomofalbania = {

		potential = {
			NOT = { has_global_flag = kingdom_of_albania_formed }
			470 = { culture = arberian }
			completely_controls = c_dyrrachion
			k_albania = { is_titular = yes }
			OR = {
				tier = KING
				tier = EMPEROR 
				AND = {
					num_of_duke_titles = 2
					culture_group = south_slavic
				}
			}
			NOT = {
				OR = {
					has_landed_title = e_roman_empire
					has_landed_title = e_byzantium
				}
			}
		}

		allow = {
			treasury = 300
			OR = {
				piety = 500
				prestige = 500
			}
			OR = {
				independent = yes
				tier = KING
			}
		}

		effect = {
			set_global_flag = kingdom_of_albania_formed
			treasury = -300
			narrative_event = { id = Plus.522 }
		}

		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				NOT = { culture_group = south_slavic }
			}
		}
	}
	
	### POLAND
	
	extend_claims_boleslaw = {
		is_high_prio = yes

		potential = {
			has_character_flag = boleslaw_the_brave
			NOT = { has_character_flag = extend_claim_boleslaw }
			independent = yes
			has_landed_title = d_moravia
			NOT = { has_landed_title = d_bohemia }
		}

		allow = {
			war = no
			prisoner = no
			prestige = 500
			piety = 0
			wealth = 0
		}

		effect = {
			set_character_flag = extend_claim_boleslaw
			prestige = 50
			add_claim = c_lausitz
			add_claim = d_bohemia
			hidden_tooltip = {
				random_independent_ruler = {
					limit = { has_landed_title = d_bohemia }
					character_event = { id = Plus.524 }
				}
			}
		}

		ai_will_do = {
			factor = 1
		}
	}

	become_king_of_poland_boleslaw = {
		is_high_prio = yes

		potential = {
			has_character_flag = boleslaw_the_brave
			has_character_flag = extend_claim_boleslaw
			piety = 0
			wealth = 0
			has_landed_title = d_silesia
			has_landed_title = d_greater_poland
			has_landed_title = d_lesser_poland
			NOT = { has_character_flag = k_poland_boleslaw }
			k_poland = { has_holder = no }
		}

		allow = {
			war = no
			prisoner = no
			independent = yes
			has_landed_title = d_moravia
			prestige = 1000
		}

		effect = {
			set_character_flag = k_poland_boleslaw
			prestige = 200
			k_poland = { grant_title = ROOT }
		}

		ai_will_do = {
			factor = 1
		}
	}
	
	### HRE
	
	coronation  = {
		is_high_prio = yes
		potential = {
			is_feudal = yes
			independent = yes
			religion = catholic
			tier = EMPEROR
			has_landed_title = e_hre
			NOT = {
				has_character_flag = wants_coronation
				trait = excommunicated
				is_heretic = yes
				trait = crowned_by_pope
			}
		}
		allow = {
			war = no
			has_regent = no
			prestige = 1000
			wealth = 200
			piety = 200
			rightful_religious_head_scope = {
				NOT = {
					has_opinion_modifier = {
						who = ROOT
						modifier = coronation_rejected
					}
				}
			}
		}
		effect = {
			set_character_flag = wants_coronation
			wealth = -200
			character_event = { id = Plus.525 }
		}
		ai_will_do = {
			factor = 1
		}
	}
	
	###SCANDINAVIA
	
	###PERSIA
}

